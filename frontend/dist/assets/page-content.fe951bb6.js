var e=Object.defineProperty,t=(t,a,n)=>(((t,a,n)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n})(t,"symbol"!=typeof a?a+"":a,n),n);import{d as a,k as n,l as s,m as i,p as r,n as o,o as l,s as c,F as d,q as u,t as m,v as h,w as p,x as g,r as x,u as y,j as f,a as j,E as v,g as b,y as C,z as S,A as w,R as k,i as _,B as T,G as I,N as A}from"./vendor-react.862bc4d9.js";import{u as E,b as L,C as B}from"./page-brands.b39b5443.js";import{B as D,T as R,e as z,aE as P,aU as M,l as F,aV as W,P as O,G as $,g as H,i as V,c8 as q,X as N,aW as U,a as G,be as Q,aP as K,c9 as J,D as Y,aG as Z,aY as X,ca as ee,W as te,M as ae,aO as ne,ah as se,br as ie,cb as re,cc as oe,cd as le,aZ as ce,f as de,A as ue,aB as me,ce as he,cf as pe,cg as ge,bf as xe,ch as ye,ci as fe,cj as je,ck as ve,aj as be,F as Ce,I as Se,S as we,cl as ke,E as _e,cm as Te,ak as Ie,al as Ae,cn as Ee,an as Le,au as Be,b7 as De,b8 as Re,b9 as ze,co as Pe,cp as Me,cq as Fe,a_ as We,a$ as Oe,cr as $e,cs as He,o as Ve,ct as qe,j as Ne,k as Ue,cu as Ge,cv as Qe,cw as Ke,bt as Je,cx as Ye,Y as Ze,ae as Xe,Z as et,cy as tt,af as at,u as nt,cz as st,cA as it,cB as rt,cC as ot,aS as lt,cD as ct,cE as dt,cF as ut,cG as mt,cH as ht,cI as pt,cJ as gt,cK as xt,cL as yt,cM as ft,cN as jt,cO as vt,ay as bt,cP as Ct,cQ as St,cR as wt,bm as kt,cS as _t,cT as Tt,cU as It,bs as At,cV as Et,b3 as Lt,b5 as Bt,cW as Dt,p as Rt,q as zt,v as Pt,s as Mt,t as Ft,r as Wt,C as Ot,b6 as $t,cX as Ht,aC as Vt,cY as qt,H as Nt,am as Ut,cZ as Gt,bM as Qt,b as Kt,at as Jt,as as Yt,c_ as Zt,bx as Xt,c$ as ea,ax as ta,d as aa,h as na,d0 as sa}from"./vendor-mui.1e5c58eb.js";import{b as ia,a as ra,G as oa}from"./page-analytics.7c777a5d.js";import{a as la}from"./vendor-utils.787fabe2.js";import{c as ca,u as da}from"./vendor.def2142b.js";import{a as ua}from"./page-auth.0bd7ec1c.js";import{R as ma,L as ha,C as pa,X as ga,Y as xa,T as ya,a as fa,b as ja,A as va,k as ba,P as Ca,c as Sa,d as wa}from"./vendor-charts.6105f747.js";import{T as ka,a as _a}from"./page-templates.9409aed2.js";const Ta=a({name:"brands",initialState:{brands:[],selectedBrand:null,isLoading:!1,error:null},reducers:{fetchBrandsStart:e=>{e.isLoading=!0,e.error=null},fetchBrandsSuccess:(e,t)=>{e.isLoading=!1,e.brands=t.payload},fetchBrandsFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},selectBrand:(e,t)=>{e.selectedBrand=e.brands.find((e=>e.id===t.payload))||null},clearSelectedBrand:e=>{e.selectedBrand=null},createBrandStart:e=>{e.isLoading=!0,e.error=null},createBrandSuccess:(e,t)=>{e.isLoading=!1,e.brands.push(t.payload)},createBrandFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},updateBrandStart:e=>{e.isLoading=!0,e.error=null},updateBrandSuccess:(e,t)=>{e.isLoading=!1;const a=e.brands.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.brands[a]=t.payload),e.selectedBrand&&e.selectedBrand.id===t.payload.id&&(e.selectedBrand=t.payload)},updateBrandFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},deleteBrandStart:e=>{e.isLoading=!0,e.error=null},deleteBrandSuccess:(e,t)=>{e.isLoading=!1,e.brands=e.brands.filter((e=>e.id!==t.payload)),e.selectedBrand&&e.selectedBrand.id===t.payload&&(e.selectedBrand=null)},deleteBrandFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload}}}),{fetchBrandsStart:Ia,fetchBrandsSuccess:Aa,fetchBrandsFailure:Ea,selectBrand:La,clearSelectedBrand:Ba,createBrandStart:Da,createBrandSuccess:Ra,createBrandFailure:za,updateBrandStart:Pa,updateBrandSuccess:Ma,updateBrandFailure:Fa,deleteBrandStart:Wa,deleteBrandSuccess:Oa,deleteBrandFailure:$a}=Ta.actions,Ha=Ta.reducer,Va="/api",qa={getCalendarEntriesOriginal:async(e,t,a,n)=>{let s=`${Va}/content-calendar/?project_id=${e}`;t&&(s+=`&start_date=${t}`),a&&(s+=`&end_date=${a}`),n&&(s+=`&status=${n}`);try{return(await la.get(s)).data}catch(i){return[]}},getCalendarEntries:async e=>{let t=`${Va}/content-calendar/`,a=new URLSearchParams;e.startDate&&a.append("start_date",e.startDate),e.endDate&&a.append("end_date",e.endDate),a.toString()&&(t+=`?${a.toString()}`);try{return{data:(await la.get(t)).data}}catch(n){return{data:[]}}},getCalendarEntry:async e=>(await la.get(`${Va}/content-calendar/${e}`)).data,createCalendarEntry:async e=>(await la.post(`${Va}/content-calendar/`,e)).data,updateCalendarEntry:async(e,t)=>(await la.put(`${Va}/content-calendar/${e}`,t)).data,deleteCalendarEntry:async e=>{await la.delete(`${Va}/content-calendar/${e}`)},bulkCreateCalendarEntries:async e=>(await la.post(`${Va}/content-calendar/bulk`,e)).data,bulkUpdateCalendarEntries:async(e,t)=>(await la.put(`${Va}/content-calendar/bulk`,{item_ids:e,updates:t})).data,publishContent:async e=>(await la.post(`${Va}/content-calendar/${e}/publish`)).data,getSchedulingInsights:async(e,t,a)=>{try{const n=`${Va}/content-calendar/insights/conflicts`,s=new URLSearchParams;s.append("project_id",e.toString()),s.append("start_date",t),s.append("end_date",a);return(await la.get(`${n}?${s.toString()}`)).data}catch(n){return[{insight_type:"content_gap",description:"There is a gap in your content schedule next week",severity:"warning",start_date:t,end_date:a,recommendation:"Consider scheduling content for next week to maintain engagement"},{insight_type:"platform_neglect",description:"LinkedIn has had minimal content recently",severity:"info",recommendation:"Increase LinkedIn posting frequency to 2-3 times per week"}]}},_staticBestTimeRecommendations:[{platform:"instagram",day_of_week:2,dayOfWeek:"Tuesday",hour_of_day:12,timeOfDay:"12:00 PM",average_engagement:.072,engagementScore:72,confidence:.82},{platform:"facebook",day_of_week:4,dayOfWeek:"Thursday",hour_of_day:15,timeOfDay:"3:00 PM",average_engagement:.064,engagementScore:64,confidence:.78},{platform:"twitter",day_of_week:1,dayOfWeek:"Monday",hour_of_day:9,timeOfDay:"9:00 AM",average_engagement:.098,engagementScore:98,confidence:.85},{platform:"linkedin",day_of_week:3,dayOfWeek:"Wednesday",hour_of_day:11,timeOfDay:"11:00 AM",average_engagement:.083,engagementScore:83,confidence:.79},{platform:"tiktok",day_of_week:5,dayOfWeek:"Friday",hour_of_day:18,timeOfDay:"6:00 PM",average_engagement:.105,engagementScore:105,confidence:.89}],getBestTimeRecommendations:async e=>qa._staticBestTimeRecommendations,_staticCalendarInsights:[{id:"insight-1",type:"warning",message:"Content distribution is not optimal. Consider spreading out your Instagram posts.",affectedItems:["1","2"],severity:"warning",action:"Reschedule posts for better engagement"},{id:"insight-2",type:"info",message:"Your email content is performing well. Consider creating more email campaigns.",severity:"info",action:"Increase email frequency"},{id:"insight-3",type:"error",message:"Multiple posts scheduled at the same time on March 15.",severity:"error",date:"2025-03-15",affectedItems:["5","8"],action:"Reschedule one of the conflicting posts"}],getCalendarInsights:async e=>({data:qa._staticCalendarInsights}),publishCalendarEntry:async e=>({data:(await la.post(`${Va}/content-calendar/${e}/publish`)).data})},Na={1:[{id:"1-1",title:"Top 10 SaaS Trends for 2025",type:"blog",status:"published",date:"2025-03-15",author:"Jane Smith",score:92,brandId:"1",body:"<p>In 2025, SaaS is evolving faster than ever. Here are the top 10 trends...</p>",topics:["Technology","SaaS","Cloud","Trends"],updated_at:"2025-03-15T10:30:00Z",created_at:"2025-03-10T14:20:00Z",performance:{views:1250,engagement:4.8,conversion:2.3}},{id:"1-2",title:"TechPro Solutions Quarterly Newsletter",type:"email",status:"scheduled",date:"2025-03-25",author:"John Doe",score:88,brandId:"1",performance:{views:0,engagement:0,conversion:0}},{id:"1-3",title:"Cloud Solution Case Study: Enterprise Implementation",type:"blog",status:"published",date:"2025-03-05",author:"Michael Brown",score:95,brandId:"1",performance:{views:3200,engagement:5.2,conversion:3.7}},{id:"1-4",title:"Developer Conference Announcement",type:"social",status:"draft",date:"2025-03-18",author:"Chris Wilson",score:82,brandId:"1",performance:{views:0,engagement:0,conversion:0}},{id:"1-5",title:"How AI is Transforming Enterprise Solutions",type:"blog",status:"published",date:"2025-02-20",author:"Jane Smith",score:91,brandId:"1",performance:{views:1870,engagement:4.9,conversion:2.8}}],2:[{id:"2-1",title:"Sustainable Farming Practices for 2025",type:"blog",status:"published",date:"2025-03-12",author:"Emma Green",score:89,brandId:"2",performance:{views:980,engagement:5.2,conversion:1.8}},{id:"2-2",title:"New Organic Product Line Launch",type:"email",status:"scheduled",date:"2025-03-22",author:"David Miller",score:85,brandId:"2",performance:{views:0,engagement:0,conversion:0}},{id:"2-3",title:"Earth Day Campaign Announcement",type:"social",status:"draft",date:"2025-03-10",author:"Sarah Johnson",score:76,brandId:"2",performance:{views:0,engagement:0,conversion:0}},{id:"2-4",title:"Benefits of Organic Personal Care Products",type:"blog",status:"published",date:"2025-02-28",author:"Emily Chen",score:93,brandId:"2",performance:{views:1450,engagement:6.1,conversion:2.9}},{id:"2-5",title:"Organic Recipes for Spring",type:"blog",status:"published",date:"2025-03-08",author:"Chef Marco",score:97,brandId:"2",performance:{views:2100,engagement:7.3,conversion:3.2}}],3:[{id:"3-1",title:"Home Workout Equipment Essentials",type:"blog",status:"published",date:"2025-03-10",author:"Alex Trainer",score:94,brandId:"3",performance:{views:1850,engagement:6.7,conversion:4.1}},{id:"3-2",title:"Spring Fitness Challenge Announcement",type:"email",status:"scheduled",date:"2025-03-20",author:"Fitness Team",score:87,brandId:"3",performance:{views:0,engagement:0,conversion:0}},{id:"3-3",title:"New Subscription Training Program",type:"social",status:"draft",date:"2025-03-15",author:"Marketing Team",score:83,brandId:"3",performance:{views:0,engagement:0,conversion:0}},{id:"3-4",title:"30-Day Transformation Challenge Results",type:"blog",status:"published",date:"2025-02-25",author:"Coach Sarah",score:96,brandId:"3",performance:{views:2300,engagement:8.2,conversion:5.7}},{id:"3-5",title:"Best Nutrition Plans for Muscle Gain",type:"blog",status:"published",date:"2025-03-05",author:"Nutritionist Mark",score:91,brandId:"3",performance:{views:1650,engagement:5.8,conversion:3.2}}],4:[{id:"4-1",title:"Spring Interior Design Trends 2025",type:"blog",status:"published",date:"2025-03-12",author:"Sophia Designer",score:90,brandId:"4",performance:{views:1320,engagement:4.5,conversion:2.1}},{id:"4-2",title:"Luxury Collection Launch",type:"email",status:"scheduled",date:"2025-03-28",author:"Marketing Team",score:86,brandId:"4",performance:{views:0,engagement:0,conversion:0}},{id:"4-3",title:"Designer Showcase Event Announcement",type:"social",status:"draft",date:"2025-03-16",author:"Events Team",score:79,brandId:"4",performance:{views:0,engagement:0,conversion:0}},{id:"4-4",title:"Home Office Design Inspiration",type:"blog",status:"published",date:"2025-03-01",author:"Design Team",score:93,brandId:"4",performance:{views:1780,engagement:5.7,conversion:3.4}},{id:"4-5",title:"Client Transformation: Luxury Villa Redesign",type:"blog",status:"published",date:"2025-02-22",author:"Lead Designer",score:98,brandId:"4",performance:{views:2450,engagement:7.8,conversion:4.6}}]};const Ua=new class{async getContentItems(e){try{return await ia.get("/content",{params:{brandId:e}})}catch(t){return e&&Na[e]?Promise.resolve([...Na[e]]):Promise.resolve(Object.values(Na).flat())}}async getContentItemById(e){try{return await ia.get(`/content/${e}`)}catch(t){const a=Object.values(Na).flat().find((t=>t.id===e));if(!a)throw new Error(`Content item with ID ${e} not found`);return Promise.resolve({...a})}}async getContentPerformance(e,t){try{return await ia.get(`/content/${e}/performance`,{params:t})}catch(a){const e=this.getDaysBetweenDates(t.start_date,t.end_date);return Promise.resolve(e.map((e=>this.generateMockPerformanceData(e))))}}getDaysBetweenDates(e,t){const a=[];let n=new Date(e);const s=new Date(t);for(;n<=s;)a.push(n.toISOString().split("T")[0]),n.setDate(n.getDate()+1);return a}generateMockPerformanceData(e){const t=Math.floor(1e3*Math.random())+100,a=Math.floor(t*(.3*Math.random()+.1)),n=Math.floor(t*(.05*Math.random()+.01)),s=Math.floor(t*(.03*Math.random()+.005)),i=parseFloat((.08*Math.random()+.02).toFixed(4)),r={};return["facebook","twitter","linkedin","instagram"].forEach((e=>{const a=Math.floor(t*(.4*Math.random()+.1));r[e]={views:a,clicks:Math.floor(a*(.3*Math.random()+.1)),shares:Math.floor(a*(.05*Math.random()+.01)),comments:Math.floor(a*(.03*Math.random()+.005))}})),{date:e,views:t,clicks:a,shares:n,comments:s,engagement_rate:i,platform_data:r}}async getDraftById(e){return this.getContentItemById(e)}async getDrafts(e){try{return await ia.get("/drafts",{params:e})}catch(t){let a=[...Object.values(Na).flat()];if(e&&(e.draftStatus&&(a=a.filter((t=>t.status===e.draftStatus))),e.brandId&&(a=a.filter((t=>t.brandId===e.brandId))),e.type&&(a=a.filter((t=>t.type===e.type))),e.searchQuery)){const t=e.searchQuery.toLowerCase();a=a.filter((e=>e.title.toLowerCase().includes(t)))}return Promise.resolve(a)}}async createDraft(e){try{return await ia.post("/drafts",e)}catch(t){const a={id:`${e.brandId||"0"}-${Date.now()}`,title:e.title||"New Draft",type:e.type||"blog",status:"draft",date:(new Date).toISOString().split("T")[0],author:e.author||"Current User",score:0,brandId:e.brandId||"1",performance:{views:0,engagement:0,conversion:0}};return Promise.resolve(a)}}async updateDraft(e){try{return await ia.put(`/drafts/${e.id}`,e)}catch(t){return Promise.resolve({id:e.id||"0",title:e.title||"Updated Draft",type:e.type||"blog",status:e.status||"draft",date:(new Date).toISOString().split("T")[0],author:e.author||"Current User",score:0,brandId:e.brandId||"1",performance:{views:0,engagement:0,conversion:0}})}}async deleteDraft(e){try{await ia.delete(`/drafts/${e}`)}catch(t){return Promise.resolve()}}async getTopics(){try{return await ia.get("/topics")}catch(e){return Promise.resolve(["Technology","Marketing","Business","Design","Development","AI","Machine Learning","Cloud","Security","Mobile","Web","Social Media","Content Strategy","SEO","Analytics"])}}async getABTests(e){try{return await ia.get(`/content/${e}/abtests`)}catch(t){return Promise.resolve([{id:"1",name:"Headline Optimization Test",content_draft_id:e,status:"active",metrics:["clicks","views","engagement"],start_date:"2025-03-01",end_date:"2025-03-15"},{id:"2",name:"CTA Button Test",content_draft_id:e,status:"completed",metrics:["clicks","conversion"],start_date:"2025-02-15",end_date:"2025-02-28"}])}}async getABTestById(e){try{return await ia.get(`/abtests/${e}`)}catch(t){return Promise.resolve({id:e,name:"Headline Optimization Test",content_draft_id:"1-1",status:"active",metrics:["clicks","views","engagement"],start_date:"2025-03-01",end_date:"2025-03-15"})}}async getABTestVariants(e){try{return await ia.get(`/abtests/${e}/variants`)}catch(t){return Promise.resolve([{id:"1",test_id:e,variant_name:"Control",content:"<p>This is the control content</p>",is_control:!0,performance:{views:500,clicks:50,engagement:.1}},{id:"2",test_id:e,variant_name:"Variant A",content:"<p>This is variant A content</p>",is_control:!1,performance:{views:490,clicks:65,engagement:.13}},{id:"3",test_id:e,variant_name:"Variant B",content:"<p>This is variant B content</p>",is_control:!1,performance:{views:505,clicks:48,engagement:.095}}])}}},Ga=n("content/fetchCalendarItems",(async(e,{getState:t,rejectWithValue:a})=>{try{const a=t(),n=`${e.startDate}_${e.endDate}`,s=a.content.calendar.lastFetched[n]||0,i=6e4;if(!e.force&&Date.now()-s<i)return null;return{items:(await qa.getCalendarEntries({startDate:e.startDate,endDate:e.endDate})).data,dateRange:n}}catch(n){return a(n instanceof Error?n.message:"Failed to fetch calendar items")}})),Qa=n("content/fetchCalendarInsights",(async(e,{rejectWithValue:t})=>{try{return(await qa.getCalendarInsights(e)).data}catch(a){return t(a instanceof Error?a.message:"Failed to fetch calendar insights")}})),Ka=n("content/fetchBestTimeRecommendations",(async(e,{rejectWithValue:t})=>{try{return await qa.getBestTimeRecommendations(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch best time recommendations")}})),Ja=n("content/createCalendarItem",(async(e,{rejectWithValue:t})=>{try{const t={project_id:parseInt(e.brandId),content_draft_id:null,scheduled_date:e.scheduledDate,status:e.status,platform:e.platform?e.platform.join(","):void 0,content_type:e.contentType};return await qa.createCalendarEntry(t)}catch(a){return t(a instanceof Error?a.message:"Failed to create calendar item")}})),Ya=n("content/updateCalendarItem",(async(e,{rejectWithValue:t})=>{try{const t="string"==typeof e.id?parseInt(e.id):e.id,a={status:e.status,scheduled_date:e.scheduledDate,platform:e.platform?e.platform.join(","):void 0,content_type:e.contentType};return await qa.updateCalendarEntry(t,a)}catch(a){return t(a instanceof Error?a.message:"Failed to update calendar item")}})),Za=n("content/deleteCalendarItem",(async(e,{rejectWithValue:t})=>{try{const t=parseInt(e);return await qa.deleteCalendarEntry(t),e}catch(a){return t(a instanceof Error?a.message:"Failed to delete calendar item")}})),Xa=n("content/publishCalendarItem",(async(e,{rejectWithValue:t})=>{try{return(await qa.publishCalendarEntry(e)).data}catch(a){return t(a instanceof Error?a.message:"Failed to publish calendar item")}})),en=n("content/fetchDraftById",(async(e,{rejectWithValue:t})=>{try{return await Ua.getDraftById(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch draft content")}})),tn=n("content/fetchDrafts",(async(e,{rejectWithValue:t})=>{try{return await Ua.getDrafts(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch drafts")}})),an=n("content/createDraft",(async(e,{rejectWithValue:t})=>{try{return await Ua.createDraft(e)}catch(a){return t(a instanceof Error?a.message:"Failed to create draft")}})),nn=n("content/updateDraft",(async(e,{rejectWithValue:t})=>{try{return await Ua.updateDraft(e)}catch(a){return t(a instanceof Error?a.message:"Failed to update draft")}})),sn=n("content/deleteDraft",(async(e,{rejectWithValue:t})=>{try{return await Ua.deleteDraft(e),e}catch(a){return t(a instanceof Error?a.message:"Failed to delete draft")}})),rn=n("content/fetchTopics",(async(e,{rejectWithValue:t})=>{try{return await Ua.getTopics()}catch(a){return t(a instanceof Error?a.message:"Failed to fetch topics")}})),on=n("content/fetchABTests",(async(e,{rejectWithValue:t})=>{try{return await Ua.getABTests(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch A/B tests")}})),ln=n("content/fetchABTestById",(async(e,{rejectWithValue:t})=>{try{return await Ua.getABTestById(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch A/B test")}})),cn=n("content/fetchABTestVariants",(async(e,{rejectWithValue:t})=>{try{return await Ua.getABTestVariants(e)}catch(a){return t(a instanceof Error?a.message:"Failed to fetch A/B test variants")}})),dn=n("content/fetchContentPerformance",(async({contentId:e,timeRange:t},{rejectWithValue:a})=>{try{return await Ua.getContentPerformance(e,t)}catch(n){return a(n instanceof Error?n.message:"Failed to fetch content performance data")}})),un=a({name:"content",initialState:{items:[],selectedContent:null,selectedDraft:null,draftsError:null,isLoading:!1,error:null,filters:{},calendar:{items:{},itemsByDate:{},insights:[],bestTimeRecommendations:[],lastFetched:{},isLoading:!1,error:null},performance:{data:[],isLoading:!1,error:null},abTests:[],selectedABTest:null,abTestVariants:[],abTestsLoading:!1,abTestsError:null,topics:[],topicsLoading:!1,topicsError:null},reducers:{fetchContentStart:e=>{e.isLoading=!0,e.error=null},fetchContentSuccess:(e,t)=>{e.isLoading=!1,e.items=t.payload},fetchContentFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},selectContent:(e,t)=>{e.selectedContent=e.items.find((e=>e.id===t.payload))||null},clearSelectedContent:e=>{e.selectedContent=null},createContentStart:e=>{e.isLoading=!0,e.error=null},createContentSuccess:(e,t)=>{e.isLoading=!1,e.items.push(t.payload)},createContentFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},updateContentItem:(e,t)=>{const a=e.items.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.items[a]=t.payload),e.selectedContent&&e.selectedContent.id===t.payload.id&&(e.selectedContent=t.payload)},updateContentStart:e=>{e.isLoading=!0,e.error=null},updateContentSuccess:(e,t)=>{e.isLoading=!1;const a=e.items.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.items[a]=t.payload),e.selectedContent&&e.selectedContent.id===t.payload.id&&(e.selectedContent=t.payload)},updateContentFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},deleteContentStart:e=>{e.isLoading=!0,e.error=null},deleteContentSuccess:(e,t)=>{e.isLoading=!1,e.items=e.items.filter((e=>e.id!==t.payload)),e.selectedContent&&e.selectedContent.id===t.payload&&(e.selectedContent=null)},deleteContentFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},setContentFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearContentFilters:e=>{e.filters={}},addCalendarItemOptimistic:(e,t)=>{const a=t.payload;e.calendar.items[a.id]=a;const n=a.scheduledDate.split("T")[0];e.calendar.itemsByDate[n]||(e.calendar.itemsByDate[n]=[]),e.calendar.itemsByDate[n].push(a.id)},updateCalendarItemOptimistic:(e,t)=>{const a=t.payload,n=e.calendar.items[a.id];if(n){if(n.scheduledDate!==a.scheduledDate){const t=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[t]&&(e.calendar.itemsByDate[t]=e.calendar.itemsByDate[t].filter((e=>e!==a.id)));const s=a.scheduledDate.split("T")[0];e.calendar.itemsByDate[s]||(e.calendar.itemsByDate[s]=[]),e.calendar.itemsByDate[s].push(a.id)}e.calendar.items[a.id]=a}},deleteCalendarItemOptimistic:(e,t)=>{const a=t.payload,n=e.calendar.items[a];if(n){const t=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[t]&&(e.calendar.itemsByDate[t]=e.calendar.itemsByDate[t].filter((e=>e!==a))),delete e.calendar.items[a]}},invalidateCalendarCache:e=>{e.calendar.lastFetched={}}},extraReducers:e=>{e.addCase(Ga.pending,(e=>{e.calendar.isLoading=!0,e.calendar.error=null})).addCase(Ga.fulfilled,((e,t)=>{if(e.calendar.isLoading=!1,null===t.payload)return;const{items:a,dateRange:n}=t.payload,{itemsRecord:s,itemsByDate:i}=(e=>{const t={},a={};return e.forEach((e=>{t[e.id]=e;const n=e.scheduledDate.split("T")[0];a[n]||(a[n]=[]),a[n].push(e.id)})),{itemsRecord:t,itemsByDate:a}})(a);e.calendar.items={...e.calendar.items,...s},e.calendar.itemsByDate={...e.calendar.itemsByDate,...i},e.calendar.lastFetched[n]=Date.now()})).addCase(Ga.rejected,((e,t)=>{e.calendar.isLoading=!1,e.calendar.error=t.payload})).addCase(Qa.pending,(e=>{e.calendar.isLoading=!0})).addCase(Qa.fulfilled,((e,t)=>{e.calendar.isLoading=!1,e.calendar.insights=t.payload})).addCase(Qa.rejected,((e,t)=>{e.calendar.isLoading=!1,e.calendar.error=t.payload})).addCase(Ka.pending,(e=>{e.calendar.isLoading=!0})).addCase(Ka.fulfilled,((e,t)=>{e.calendar.isLoading=!1;const a=t.payload.map((e=>({...e,dayOfWeek:e.dayOfWeek||e.day_of_week.toString(),timeOfDay:e.timeOfDay||`${e.hour_of_day}:00`,engagementScore:e.engagementScore||Math.round(100*e.average_engagement)})));e.calendar.bestTimeRecommendations=a})).addCase(Ka.rejected,((e,t)=>{e.calendar.isLoading=!1,e.calendar.error=t.payload})).addCase(Ja.fulfilled,((e,t)=>{const a=t.payload,n={id:a.id.toString(),project_id:a.project_id,content_draft_id:a.content_draft_id,scheduled_date:a.scheduled_date,scheduledDate:a.scheduled_date,published_date:a.published_date,publishedDate:a.published_date||void 0,status:a.status,contentType:a.content_type||"other",content_type:a.content_type,platform:a.platform,brandId:a.project_id.toString(),tags:[],author:a.title||"Unknown",title:a.title||"Untitled",description:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};e.calendar.items[n.id]=n;const s=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[s]||(e.calendar.itemsByDate[s]=[]),e.calendar.itemsByDate[s].push(n.id)})).addCase(Ya.fulfilled,((e,t)=>{const a=t.payload,n={id:a.id.toString(),project_id:a.project_id,content_draft_id:a.content_draft_id,scheduled_date:a.scheduled_date,scheduledDate:a.scheduled_date,published_date:a.published_date,publishedDate:a.published_date||void 0,status:a.status,contentType:a.content_type||"other",content_type:a.content_type,platform:a.platform,brandId:a.project_id.toString(),tags:[],author:a.title||"Unknown",title:a.title||"Untitled",description:"",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},s=e.calendar.items[n.id];if(s){if(s.scheduledDate!==n.scheduledDate){const t=s.scheduledDate.split("T")[0];e.calendar.itemsByDate[t]&&(e.calendar.itemsByDate[t]=e.calendar.itemsByDate[t].filter((e=>e!==n.id)));const a=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[a]||(e.calendar.itemsByDate[a]=[]),e.calendar.itemsByDate[a].push(n.id)}e.calendar.items[n.id]={...s,...n}}else{e.calendar.items[n.id]=n;const t=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[t]||(e.calendar.itemsByDate[t]=[]),e.calendar.itemsByDate[t].push(n.id)}})).addCase(Za.fulfilled,((e,t)=>{const a=t.payload,n=e.calendar.items[a];if(n){const t=n.scheduledDate.split("T")[0];e.calendar.itemsByDate[t]&&(e.calendar.itemsByDate[t]=e.calendar.itemsByDate[t].filter((e=>e!==a))),delete e.calendar.items[a]}})).addCase(Xa.fulfilled,((e,t)=>{const a=t.payload;e.calendar.items[a.id]&&(e.calendar.items[a.id]=a)})).addCase(en.pending,(e=>{e.isLoading=!0,e.draftsError=null})).addCase(en.fulfilled,((e,t)=>{e.isLoading=!1,e.selectedDraft=t.payload})).addCase(en.rejected,((e,t)=>{e.isLoading=!1,e.draftsError=t.payload})).addCase(dn.pending,(e=>{e.performance.isLoading=!0,e.performance.error=null})).addCase(dn.fulfilled,((e,t)=>{e.performance.isLoading=!1,e.performance.data=t.payload})).addCase(dn.rejected,((e,t)=>{e.performance.isLoading=!1,e.performance.error=t.payload})).addCase(tn.pending,(e=>{e.isLoading=!0,e.error=null})).addCase(tn.fulfilled,((e,t)=>{e.isLoading=!1,e.items=t.payload})).addCase(tn.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload})).addCase(an.pending,(e=>{e.isLoading=!0,e.error=null})).addCase(an.fulfilled,((e,t)=>{e.isLoading=!1,e.items.push(t.payload)})).addCase(an.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload})).addCase(nn.pending,(e=>{e.isLoading=!0,e.error=null})).addCase(nn.fulfilled,((e,t)=>{e.isLoading=!1;const a=e.items.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.items[a]=t.payload)})).addCase(nn.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload})).addCase(sn.pending,(e=>{e.isLoading=!0,e.error=null})).addCase(sn.fulfilled,((e,t)=>{e.isLoading=!1,e.items=e.items.filter((e=>e.id!==t.payload))})).addCase(sn.rejected,((e,t)=>{e.isLoading=!1,e.error=t.payload})).addCase(rn.pending,(e=>{e.topicsLoading=!0,e.topicsError=null})).addCase(rn.fulfilled,((e,t)=>{e.topicsLoading=!1,e.topics=t.payload})).addCase(rn.rejected,((e,t)=>{e.topicsLoading=!1,e.topicsError=t.payload})).addCase(on.pending,(e=>{e.abTestsLoading=!0,e.abTestsError=null})).addCase(on.fulfilled,((e,t)=>{e.abTestsLoading=!1,e.abTests=t.payload})).addCase(on.rejected,((e,t)=>{e.abTestsLoading=!1,e.abTestsError=t.payload})).addCase(ln.pending,(e=>{e.abTestsLoading=!0,e.abTestsError=null})).addCase(ln.fulfilled,((e,t)=>{e.abTestsLoading=!1,e.selectedABTest=t.payload})).addCase(ln.rejected,((e,t)=>{e.abTestsLoading=!1,e.abTestsError=t.payload})).addCase(cn.pending,(e=>{e.abTestsLoading=!0,e.abTestsError=null})).addCase(cn.fulfilled,((e,t)=>{e.abTestsLoading=!1,e.abTestVariants=t.payload})).addCase(cn.rejected,((e,t)=>{e.abTestsLoading=!1,e.abTestsError=t.payload}))}}),{fetchContentStart:mn,fetchContentSuccess:hn,fetchContentFailure:pn,selectContent:gn,clearSelectedContent:xn,createContentStart:yn,createContentSuccess:fn,createContentFailure:jn,updateContentItem:vn,updateContentStart:bn,updateContentSuccess:Cn,updateContentFailure:Sn,deleteContentStart:wn,deleteContentSuccess:kn,deleteContentFailure:_n,setContentFilters:Tn,clearContentFilters:In,addCalendarItemOptimistic:An,updateCalendarItemOptimistic:En,deleteCalendarItemOptimistic:Ln,invalidateCalendarCache:Bn}=un.actions,Dn=un.reducer,Rn=a({name:"campaigns",initialState:{campaigns:[],selectedCampaign:null,isLoading:!1,error:null,filters:{}},reducers:{fetchCampaignsStart:e=>{e.isLoading=!0,e.error=null},fetchCampaignsSuccess:(e,t)=>{e.isLoading=!1,e.campaigns=t.payload},fetchCampaignsFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},selectCampaign:(e,t)=>{e.selectedCampaign=e.campaigns.find((e=>e.id===t.payload))||null},clearSelectedCampaign:e=>{e.selectedCampaign=null},createCampaignStart:e=>{e.isLoading=!0,e.error=null},createCampaignSuccess:(e,t)=>{e.isLoading=!1,e.campaigns.push(t.payload)},createCampaignFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},updateCampaignStart:e=>{e.isLoading=!0,e.error=null},updateCampaignSuccess:(e,t)=>{e.isLoading=!1;const a=e.campaigns.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.campaigns[a]=t.payload),e.selectedCampaign&&e.selectedCampaign.id===t.payload.id&&(e.selectedCampaign=t.payload)},updateCampaignFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},deleteCampaignStart:e=>{e.isLoading=!0,e.error=null},deleteCampaignSuccess:(e,t)=>{e.isLoading=!1,e.campaigns=e.campaigns.filter((e=>e.id!==t.payload)),e.selectedCampaign&&e.selectedCampaign.id===t.payload&&(e.selectedCampaign=null)},deleteCampaignFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},setCampaignFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearCampaignFilters:e=>{e.filters={}}}});Rn.actions;const zn=Rn.reducer;const Pn=new class{async getDailyCosts(e,t,a){const n={};e&&(n.start_date=e),t&&(n.end_date=t),a&&(n.provider=a);try{return(await ra.get("/metrics/ai/daily-costs",{params:n})).data}catch(s){return[]}}async getProviderCosts(e,t){const a={};e&&(a.start_date=e),t&&(a.end_date=t);try{return(await ra.get("/metrics/ai/provider-costs",{params:a})).data}catch(n){return{}}}async getModelCosts(e,t,a){const n={};e&&(n.start_date=e),t&&(n.end_date=t),a&&(n.provider=a);try{return(await ra.get("/metrics/ai/model-costs",{params:n})).data}catch(s){return[]}}async getBudgetStatus(){try{return(await ra.get("/metrics/ai/budget-status")).data}catch(e){return{}}}async getCacheMetrics(e,t){const a={};e&&(a.start_date=e),t&&(a.end_date=t);try{return(await ra.get("/metrics/ai/cache-metrics",{params:a})).data}catch(n){return{cache_hit_ratio:0,estimated_savings:0,total_requests:0,cached_requests:0}}}async getErrorRates(e,t){const a={};e&&(a.start_date=e),t&&(a.end_date=t);try{return(await ra.get("/metrics/ai/error-rates",{params:a})).data}catch(n){return{}}}async getAgentUsage(e,t){const a={};e&&(a.start_date=e),t&&(a.end_date=t);try{return(await ra.get("/metrics/ai/agent-usage",{params:a})).data}catch(n){return[]}}},Mn=n("analytics/fetchDailyCosts",(async({startDate:e,endDate:t,provider:a})=>await Pn.getDailyCosts(e,t,a))),Fn=n("analytics/fetchProviderCosts",(async({startDate:e,endDate:t})=>await Pn.getProviderCosts(e,t))),Wn=n("analytics/fetchModelCosts",(async({startDate:e,endDate:t,provider:a})=>await Pn.getModelCosts(e,t,a))),On=n("analytics/fetchBudgetStatus",(async()=>await Pn.getBudgetStatus())),$n=n("analytics/fetchCacheMetrics",(async({startDate:e,endDate:t})=>await Pn.getCacheMetrics(e,t))),Hn=n("analytics/fetchErrorRates",(async({startDate:e,endDate:t})=>await Pn.getErrorRates(e,t))),Vn=n("analytics/fetchAgentUsage",(async({startDate:e,endDate:t})=>await Pn.getAgentUsage(e,t))),qn=n("analytics/fetchTemplateAnalytics",(async e=>({totalUsage:1250,usageGrowth:12.5,avgConversionRate:8.2,conversionGrowth:3.4,avgEngagementScore:7.8,engagementGrowth:5.2,avgCompletionTime:4.5,completionTimeGrowth:-1.2,usageOverTime:[{date:"2023-01-01",count:45},{date:"2023-01-02",count:52},{date:"2023-01-03",count:48},{date:"2023-01-04",count:67},{date:"2023-01-05",count:58}],usageByContentType:[{name:"Blog",value:450},{name:"Social",value:380},{name:"Email",value:250},{name:"Ad",value:170}],usageByPlatform:[{name:"Facebook",value:280},{name:"Instagram",value:240},{name:"Twitter",value:180},{name:"LinkedIn",value:220},{name:"Website",value:330}]}))),Nn=n("analytics/fetchIndustryPerformance",(async e=>[{industry:"Technology",usageCount:450,conversionRate:8.7,engagementScore:8.1},{industry:"Finance",usageCount:380,conversionRate:7.2,engagementScore:6.9},{industry:"Healthcare",usageCount:320,conversionRate:8.1,engagementScore:7.8},{industry:"Education",usageCount:280,conversionRate:7.9,engagementScore:8.3},{industry:"Retail",usageCount:340,conversionRate:7.6,engagementScore:7.5}])),Un=n("analytics/fetchTopPerformingTemplates",(async e=>[{templateId:"1",templateName:"Product Launch Email",usageCount:215,conversionRate:9.2,engagement:8.7,completionTime:3.5},{templateId:"2",templateName:"Social Media Contest",usageCount:198,conversionRate:8.9,engagement:9.1,completionTime:4.2},{templateId:"3",templateName:"Blog Post Template",usageCount:187,conversionRate:8.5,engagement:8.3,completionTime:5.1},{templateId:"4",templateName:"Weekly Newsletter",usageCount:165,conversionRate:7.8,engagement:7.9,completionTime:3.8},{templateId:"5",templateName:"Sales Promotion",usageCount:143,conversionRate:8.1,engagement:7.7,completionTime:4}])),Gn=a({name:"analytics",initialState:{dashboardMetrics:[],charts:[],brandAnalytics:{},contentAnalytics:{},campaignAnalytics:{},dateRange:{start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:(new Date).toISOString().split("T")[0]},isLoading:!1,error:null,templateAnalytics:null,industryPerformance:[],topPerformingTemplates:[],templateAnalyticsLoading:!1,templateAnalyticsError:null,aiMetrics:{dailyCosts:[],providerCosts:{},modelCosts:[],budgetStatus:{},cacheMetrics:{cache_hit_ratio:0,estimated_savings:0,total_requests:0,cached_requests:0},errorRates:{},agentUsage:[],isLoading:!1,error:null}},reducers:{fetchAnalyticsStart:e=>{e.isLoading=!0,e.error=null},fetchAnalyticsSuccess:(e,t)=>{e.isLoading=!1,t.payload.metrics&&(e.dashboardMetrics=t.payload.metrics),t.payload.charts&&(e.charts=t.payload.charts)},fetchAnalyticsFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},fetchBrandAnalyticsSuccess:(e,t)=>{e.brandAnalytics[t.payload.brandId]=t.payload.data},fetchContentAnalyticsSuccess:(e,t)=>{e.contentAnalytics[t.payload.contentId]=t.payload.data},fetchCampaignAnalyticsSuccess:(e,t)=>{e.campaignAnalytics[t.payload.campaignId]=t.payload.data},setDateRange:(e,t)=>{e.dateRange=t.payload},clearAnalytics:e=>{e.dashboardMetrics=[],e.charts=[],e.brandAnalytics={},e.contentAnalytics={},e.campaignAnalytics={}}},extraReducers:e=>{e.addCase(Mn.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(Mn.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.dailyCosts=t.payload})).addCase(Mn.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch daily costs"})),e.addCase(Fn.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(Fn.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.providerCosts=t.payload})).addCase(Fn.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch provider costs"})),e.addCase(Wn.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(Wn.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.modelCosts=t.payload})).addCase(Wn.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch model costs"})),e.addCase(On.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(On.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.budgetStatus=t.payload})).addCase(On.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch budget status"})),e.addCase($n.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase($n.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.cacheMetrics=t.payload})).addCase($n.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch cache metrics"})),e.addCase(Hn.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(Hn.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.errorRates=t.payload})).addCase(Hn.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch error rates"})),e.addCase(Vn.pending,(e=>{e.aiMetrics.isLoading=!0,e.aiMetrics.error=null})).addCase(Vn.fulfilled,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.agentUsage=t.payload})).addCase(Vn.rejected,((e,t)=>{e.aiMetrics.isLoading=!1,e.aiMetrics.error=t.error.message||"Failed to fetch agent usage"})),e.addCase(qn.pending,(e=>{e.templateAnalyticsLoading=!0,e.templateAnalyticsError=null})).addCase(qn.fulfilled,((e,t)=>{e.templateAnalyticsLoading=!1,e.templateAnalytics=t.payload})).addCase(qn.rejected,((e,t)=>{e.templateAnalyticsLoading=!1,e.templateAnalyticsError=t.error.message||"Failed to fetch template analytics"})).addCase(Nn.pending,(e=>{e.templateAnalyticsLoading=!0})).addCase(Nn.fulfilled,((e,t)=>{e.templateAnalyticsLoading=!1,e.industryPerformance=t.payload})).addCase(Nn.rejected,((e,t)=>{e.templateAnalyticsLoading=!1,e.templateAnalyticsError=t.error.message||"Failed to fetch industry performance"})).addCase(Un.pending,(e=>{e.templateAnalyticsLoading=!0})).addCase(Un.fulfilled,((e,t)=>{e.templateAnalyticsLoading=!1,e.topPerformingTemplates=t.payload})).addCase(Un.rejected,((e,t)=>{e.templateAnalyticsLoading=!1,e.templateAnalyticsError=t.error.message||"Failed to fetch top performing templates"}))}});Gn.actions;const Qn=Gn.reducer,Kn=a({name:"ads",initialState:{ads:[],selectedAd:null,isLoading:!1,error:null,filters:{}},reducers:{fetchAdsStart:e=>{e.isLoading=!0,e.error=null},fetchAdsSuccess:(e,t)=>{e.isLoading=!1,e.ads=t.payload},fetchAdsFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},selectAd:(e,t)=>{e.selectedAd=e.ads.find((e=>e.id===t.payload))||null},clearSelectedAd:e=>{e.selectedAd=null},createAdStart:e=>{e.isLoading=!0,e.error=null},createAdSuccess:(e,t)=>{e.isLoading=!1,e.ads.push(t.payload)},createAdFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},updateAd:(e,t)=>{const a=e.ads.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.ads[a]=t.payload),e.selectedAd&&e.selectedAd.id===t.payload.id&&(e.selectedAd=t.payload)},updateAdStart:e=>{e.isLoading=!0,e.error=null},updateAdSuccess:(e,t)=>{e.isLoading=!1;const a=e.ads.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.ads[a]=t.payload),e.selectedAd&&e.selectedAd.id===t.payload.id&&(e.selectedAd=t.payload)},updateAdFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},deleteAdStart:e=>{e.isLoading=!0,e.error=null},deleteAdSuccess:(e,t)=>{e.isLoading=!1,e.ads=e.ads.filter((e=>e.id!==t.payload)),e.selectedAd&&e.selectedAd.id===t.payload&&(e.selectedAd=null)},deleteAdFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},setAdFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearAdFilters:e=>{e.filters={}}}}),{fetchAdsStart:Jn,fetchAdsSuccess:Yn,fetchAdsFailure:Zn,selectAd:Xn,clearSelectedAd:es,createAdStart:ts,createAdSuccess:as,createAdFailure:ns,updateAd:ss,updateAdStart:is,updateAdSuccess:rs,updateAdFailure:os,deleteAdStart:ls,deleteAdSuccess:cs,deleteAdFailure:ds,setAdFilters:us,clearAdFilters:ms}=Kn.actions,hs=Kn.reducer,ps=a({name:"projects",initialState:{projects:[],selectedProject:null,isLoading:!1,error:null,filters:{}},reducers:{fetchProjectsStart:e=>{e.isLoading=!0,e.error=null},fetchProjectsSuccess:(e,t)=>{e.isLoading=!1,e.projects=t.payload},fetchProjectsFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},selectProject:(e,t)=>{e.selectedProject=e.projects.find((e=>e.id===t.payload))||null},clearSelectedProject:e=>{e.selectedProject=null},createProjectStart:e=>{e.isLoading=!0,e.error=null},createProjectSuccess:(e,t)=>{e.isLoading=!1,e.projects.push(t.payload)},createProjectFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},updateProject:(e,t)=>{const a=e.projects.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.projects[a]=t.payload),e.selectedProject&&e.selectedProject.id===t.payload.id&&(e.selectedProject=t.payload)},updateProjectStart:e=>{e.isLoading=!0,e.error=null},updateProjectSuccess:(e,t)=>{e.isLoading=!1;const a=e.projects.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.projects[a]=t.payload),e.selectedProject&&e.selectedProject.id===t.payload.id&&(e.selectedProject=t.payload)},updateProjectFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},deleteProjectStart:e=>{e.isLoading=!0,e.error=null},deleteProjectSuccess:(e,t)=>{e.isLoading=!1,e.projects=e.projects.filter((e=>e.id!==t.payload)),e.selectedProject&&e.selectedProject.id===t.payload&&(e.selectedProject=null)},deleteProjectFailure:(e,t)=>{e.isLoading=!1,e.error=t.payload},setProjectFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearProjectFilters:e=>{e.filters={}},updateProjectTask:(e,t)=>{const{projectId:a,taskId:n,updates:s}=t.payload,i=e.projects.findIndex((e=>e.id===a));if(-1!==i){const t=e.projects[i],a=t.tasks.findIndex((e=>e.id===n));if(-1!==a&&(t.tasks[a]={...t.tasks[a],...s},void 0!==s.completed)){const e=t.tasks.filter((e=>e.completed)).length;t.progress=Math.round(e/t.tasks.length*100)}}if(e.selectedProject&&e.selectedProject.id===a){const t=e.selectedProject.tasks.findIndex((e=>e.id===n));if(-1!==t&&(e.selectedProject.tasks[t]={...e.selectedProject.tasks[t],...s},void 0!==s.completed)){const t=e.selectedProject.tasks.filter((e=>e.completed)).length;e.selectedProject.progress=Math.round(t/e.selectedProject.tasks.length*100)}}}}}),{fetchProjectsStart:gs,fetchProjectsSuccess:xs,fetchProjectsFailure:ys,selectProject:fs,clearSelectedProject:js,createProjectStart:vs,createProjectSuccess:bs,createProjectFailure:Cs,updateProject:Ss,updateProjectStart:ws,updateProjectSuccess:ks,updateProjectFailure:_s,deleteProjectStart:Ts,deleteProjectSuccess:Is,deleteProjectFailure:As,setProjectFilters:Es,clearProjectFilters:Ls,updateProjectTask:Bs}=ps.actions,Ds=ps.reducer,Rs=n("predictiveAnalytics/fetchPredictedPerformance",(async({campaignId:e,daysAhead:t=14},{rejectWithValue:a})=>{var n,s;try{const a=await((e,t=14)=>ra.get(`/campaigns/${e}/predictions`,{params:{days_ahead:t}}))(e,t);return{campaignId:e,data:a.data}}catch(i){return a((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch performance predictions")}})),zs=n("predictiveAnalytics/fetchBudgetRecommendations",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaigns/${e}/budget-recommendations`))(e);return{campaignId:e,data:t.data}}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch budget recommendations")}})),Ps=n("predictiveAnalytics/fetchCampaignPerformanceAlerts",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaigns/${e}/performance-alerts`))(e);return{campaignId:e,data:t.data}}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch performance alerts")}})),Ms=n("predictiveAnalytics/fetchHistoricalVsPredictedPerformance",(async({campaignId:e,metric:t,timeRange:a},{rejectWithValue:n})=>{var s,i;try{const n=await((e,t,a)=>ra.get(`/campaigns/${e}/historical-vs-predicted`,{params:{metric:t,...a}}))(e,t,a);return n.data}catch(r){return n((null==(i=null==(s=r.response)?void 0:s.data)?void 0:i.message)||"Failed to fetch historical vs predicted data")}})),Fs=a({name:"predictiveAnalytics",initialState:{predictions:{data:{},loading:!1,error:null},budgetRecommendations:{data:{},loading:!1,error:null},performanceAlerts:{data:{},loading:!1,error:null},historicalVsPredicted:{data:{historical:[],predicted:[]},loading:!1,error:null}},reducers:{clearPredictionsData(e){e.predictions.data={}},clearBudgetRecommendationsData(e){e.budgetRecommendations.data={}},clearPerformanceAlertsData(e){e.performanceAlerts.data={}},clearHistoricalVsPredictedData(e){e.historicalVsPredicted.data={historical:[],predicted:[]}}},extraReducers:e=>{e.addCase(Rs.pending,(e=>{e.predictions.loading=!0,e.predictions.error=null})).addCase(Rs.fulfilled,((e,t)=>{e.predictions.loading=!1;const{campaignId:a,data:n}=t.payload;e.predictions.data[a]=n})).addCase(Rs.rejected,((e,t)=>{e.predictions.loading=!1,e.predictions.error=t.payload})),e.addCase(zs.pending,(e=>{e.budgetRecommendations.loading=!0,e.budgetRecommendations.error=null})).addCase(zs.fulfilled,((e,t)=>{e.budgetRecommendations.loading=!1;const{campaignId:a,data:n}=t.payload;e.budgetRecommendations.data[a]=n})).addCase(zs.rejected,((e,t)=>{e.budgetRecommendations.loading=!1,e.budgetRecommendations.error=t.payload})),e.addCase(Ps.pending,(e=>{e.performanceAlerts.loading=!0,e.performanceAlerts.error=null})).addCase(Ps.fulfilled,((e,t)=>{e.performanceAlerts.loading=!1;const{campaignId:a,data:n}=t.payload;e.performanceAlerts.data[a]=n})).addCase(Ps.rejected,((e,t)=>{e.performanceAlerts.loading=!1,e.performanceAlerts.error=t.payload})),e.addCase(Ms.pending,(e=>{e.historicalVsPredicted.loading=!0,e.historicalVsPredicted.error=null})).addCase(Ms.fulfilled,((e,t)=>{e.historicalVsPredicted.loading=!1,e.historicalVsPredicted.data=t.payload})).addCase(Ms.rejected,((e,t)=>{e.historicalVsPredicted.loading=!1,e.historicalVsPredicted.error=t.payload}))}});Fs.actions;const Ws=Fs.reducer,Os=n("campaignRules/fetchCampaignRules",(async(e={},{rejectWithValue:t})=>{var a,n,s;try{const t="string"==typeof e?{campaign_id:e}:e;return(await(s=t.campaign_id,ra.get("/campaign-rules",{params:{campaign_id:s}}))).data}catch(i){return t((null==(n=null==(a=i.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch campaign rules")}})),$s=n("campaignRules/fetchScheduledRules",(async(e={},{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get("/campaign-rules/scheduled",{params:e}))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch scheduled rules")}})),Hs=n("campaignRules/fetchCampaignRuleById",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaign-rules/${e}`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch campaign rule")}})),Vs=n("campaignRules/createCampaignRule",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.post("/campaign-rules",e))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to create campaign rule")}})),qs=n("campaignRules/updateCampaignRule",(async({ruleId:e,rule:t},{rejectWithValue:a})=>{var n,s;try{const a=await((e,t)=>ra.put(`/campaign-rules/${e}`,t))(e,t);return a.data}catch(i){return a((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to update campaign rule")}})),Ns=n("campaignRules/deleteCampaignRule",(async(e,{rejectWithValue:t})=>{var a,n;try{return await(e=>ra.delete(`/campaign-rules/${e}`))(e),e}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to delete campaign rule")}})),Us=n("campaignRules/pauseScheduledRule",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.post(`/campaign-rules/${e}/pause-schedule`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to pause scheduled rule")}})),Gs=n("campaignRules/resumeScheduledRule",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.post(`/campaign-rules/${e}/resume-schedule`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to resume scheduled rule")}})),Qs=n("campaignRules/fetchRuleExecutionHistory",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaign-rules/${e}/history`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch rule execution history")}})),Ks=n("campaignRules/fetchCampaignRuleExecutionHistory",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaigns/${e}/rule-executions`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch campaign rule execution history")}})),Js=n("campaignRules/executeRuleManually",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.post(`/campaign-rules/${e}/execute`))(e);return t.data}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to execute rule manually")}})),Ys=n("campaignRules/fetchNotificationConfig",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaign-rules/${e}/notifications`))(e);return{ruleId:e,data:t.data}}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch notification config")}})),Zs=n("campaignRules/updateNotificationConfig",(async({ruleId:e,config:t},{rejectWithValue:a})=>{var n,s;try{const a=await((e,t)=>ra.put(`/campaign-rules/${e}/notifications`,t))(e,t);return{ruleId:e,data:a.data}}catch(i){return a((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to update notification config")}})),Xs=n("campaignRules/getCampaignPerformanceThresholds",(async(e,{rejectWithValue:t})=>{var a,n;try{const t=await(e=>ra.get(`/campaigns/${e}/performance-thresholds`))(e);return{campaignId:e,data:t.data}}catch(s){return t((null==(n=null==(a=s.response)?void 0:a.data)?void 0:n.message)||"Failed to fetch performance thresholds")}})),ei=n("campaignRules/updateCampaignPerformanceThresholds",(async({campaignId:e,thresholds:t},{rejectWithValue:a})=>{var n,s;try{const a=await((e,t)=>ra.put(`/campaigns/${e}/performance-thresholds`,t))(e,t);return{campaignId:e,data:a.data}}catch(i){return a((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to update performance thresholds")}})),ti=n("campaignRules/testRuleCondition",(async({ruleData:e,campaignId:t},{rejectWithValue:a})=>{var n,s;try{const a=await((e,t)=>ra.post(`/campaigns/${t}/test-rule`,e))(e,t);return a.data}catch(i){return a((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to test rule condition")}})),ai=a({name:"campaignRules",initialState:{rules:{data:[],scheduledRules:[],loading:!1,error:null,selectedRule:null},executionHistory:{data:[],loading:!1,error:null},notifications:{data:{},loading:!1,error:null},testResults:{data:null,loading:!1,error:null},performanceThresholds:{data:{},loading:!1,error:null}},reducers:{clearSelectedRule(e){e.rules.selectedRule=null},clearExecutionHistory(e){e.executionHistory.data=[]},clearTestResults(e){e.testResults.data=null},clearNotificationConfig(e){}},extraReducers:e=>{e.addCase(Os.pending,(e=>{e.rules.loading=!0,e.rules.error=null})).addCase(Os.fulfilled,((e,t)=>{e.rules.loading=!1,e.rules.data=t.payload})).addCase(Os.rejected,((e,t)=>{e.rules.loading=!1,e.rules.error=t.payload})).addCase($s.pending,(e=>{e.rules.loading=!0,e.rules.error=null})).addCase($s.fulfilled,((e,t)=>{e.rules.loading=!1,e.rules.scheduledRules=t.payload})).addCase($s.rejected,((e,t)=>{e.rules.loading=!1,e.rules.error=t.payload})).addCase(Hs.pending,(e=>{e.rules.loading=!0,e.rules.error=null})).addCase(Hs.fulfilled,((e,t)=>{e.rules.loading=!1,e.rules.selectedRule=t.payload})).addCase(Hs.rejected,((e,t)=>{e.rules.loading=!1,e.rules.error=t.payload})).addCase(Vs.fulfilled,((e,t)=>{e.rules.data.push(t.payload),"one_time"!==t.payload.schedule_type&&"recurring"!==t.payload.schedule_type||e.rules.scheduledRules.push(t.payload)})).addCase(qs.fulfilled,((e,t)=>{var a;const n=e.rules.data.findIndex((e=>e.id===t.payload.id));-1!==n&&(e.rules.data[n]=t.payload);const s=e.rules.scheduledRules.findIndex((e=>e.id===t.payload.id));-1!==s?e.rules.scheduledRules[s]=t.payload:"one_time"!==t.payload.schedule_type&&"recurring"!==t.payload.schedule_type||e.rules.scheduledRules.push(t.payload),(null==(a=e.rules.selectedRule)?void 0:a.id)===t.payload.id&&(e.rules.selectedRule=t.payload)})).addCase(Ns.fulfilled,((e,t)=>{var a;e.rules.data=e.rules.data.filter((e=>e.id!==t.payload)),e.rules.scheduledRules=e.rules.scheduledRules.filter((e=>e.id!==t.payload)),(null==(a=e.rules.selectedRule)?void 0:a.id)===t.payload&&(e.rules.selectedRule=null)})).addCase(Us.fulfilled,((e,t)=>{const a=e.rules.data.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.rules.data[a]=t.payload);const n=e.rules.scheduledRules.findIndex((e=>e.id===t.payload.id));-1!==n&&(e.rules.scheduledRules[n]=t.payload)})).addCase(Gs.fulfilled,((e,t)=>{const a=e.rules.data.findIndex((e=>e.id===t.payload.id));-1!==a&&(e.rules.data[a]=t.payload);const n=e.rules.scheduledRules.findIndex((e=>e.id===t.payload.id));-1!==n&&(e.rules.scheduledRules[n]=t.payload)})).addCase(Qs.pending,(e=>{e.executionHistory.loading=!0,e.executionHistory.error=null})).addCase(Qs.fulfilled,((e,t)=>{e.executionHistory.loading=!1,e.executionHistory.data=t.payload})).addCase(Qs.rejected,((e,t)=>{e.executionHistory.loading=!1,e.executionHistory.error=t.payload})).addCase(Ks.pending,(e=>{e.executionHistory.loading=!0,e.executionHistory.error=null})).addCase(Ks.fulfilled,((e,t)=>{e.executionHistory.loading=!1,e.executionHistory.data=t.payload})).addCase(Ks.rejected,((e,t)=>{e.executionHistory.loading=!1,e.executionHistory.error=t.payload})).addCase(Js.fulfilled,((e,t)=>{e.executionHistory.data.unshift(t.payload)})).addCase(Ys.pending,(e=>{e.notifications.loading=!0,e.notifications.error=null})).addCase(Ys.fulfilled,((e,t)=>{e.notifications.loading=!1,e.notifications.data[t.payload.ruleId]=t.payload.data})).addCase(Ys.rejected,((e,t)=>{e.notifications.loading=!1,e.notifications.error=t.payload})).addCase(Zs.fulfilled,((e,t)=>{e.notifications.data[t.payload.ruleId]=t.payload.data})).addCase(Xs.pending,(e=>{e.performanceThresholds.loading=!0,e.performanceThresholds.error=null})).addCase(Xs.fulfilled,((e,t)=>{e.performanceThresholds.loading=!1,e.performanceThresholds.data[t.payload.campaignId]=t.payload.data})).addCase(Xs.rejected,((e,t)=>{e.performanceThresholds.loading=!1,e.performanceThresholds.error=t.payload})).addCase(ei.fulfilled,((e,t)=>{e.performanceThresholds.data[t.payload.campaignId]=t.payload.data})).addCase(ti.pending,(e=>{e.testResults.loading=!0,e.testResults.error=null})).addCase(ti.fulfilled,((e,t)=>{e.testResults.loading=!1,e.testResults.data=t.payload})).addCase(ti.rejected,((e,t)=>{e.testResults.loading=!1,e.testResults.error=t.payload}))}});ai.actions;const ni=ai.reducer;ca({auth:ua,brands:Ha,content:Dn,campaigns:zn,analytics:Qn,ui:E,ads:hs,projects:Ds,predictiveAnalytics:Ws,campaignRules:ni});const si={key:"auth",storage:s,whitelist:["user"],transforms:[i((e=>(null==e?void 0:e.user)?{user:e.user}:e),(e=>e))]},ii={key:"ui",storage:s,whitelist:["darkMode","currentTheme","sidebarOpen"],transforms:[i((e=>({darkMode:e.darkMode,currentTheme:e.currentTheme,sidebarOpen:e.sidebarOpen})),(e=>e))]},ri={key:"content",storage:s,whitelist:["calendar"],blacklist:[],transforms:[i((e=>(null==e?void 0:e.calendar)?{calendar:{items:e.calendar.items,itemsByDate:e.calendar.itemsByDate,insights:e.calendar.insights,bestTimeRecommendations:e.calendar.bestTimeRecommendations,lastFetched:e.calendar.lastFetched}}:e),(e=>e),{whitelist:["calendar"]})]},oi={key:"root",storage:s,whitelist:[],blacklist:["auth","ui","content"]},li=r(si,ua),ci=r(ii,E),di=r(ri,Dn),ui=o({reducer:r(oi,ca({auth:li,brands:Ha,content:di,campaigns:zn,analytics:Qn,ui:ci,ads:hs,projects:Ds,predictiveAnalytics:Ws,campaignRules:ni})),middleware:e=>e({serializableCheck:{ignoredActions:[d,u,m,h,p,g],ignoredPaths:["ui.confirmDialog.confirmAction","ui.confirmDialog.onCancel","ui.pendingSyncActions"]}}),devTools:!1}),mi=l(ui);c(ui.dispatch);const hi={pingInterval:3e4,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,maxReconnectAttempts:1/0,debug:!1,autoReconnect:!0,queueSizeLimit:100};const pi=new class{constructor(e={}){t(this,"socket",null),t(this,"reconnectTimer",null),t(this,"pingInterval",null),t(this,"reconnectAttempts",0),t(this,"status","disconnected"),t(this,"messageHandlers",{}),t(this,"messageQueue",[]),t(this,"options"),t(this,"lastTokenUsed",null),t(this,"lastActivity",Date.now()),t(this,"inactivityTimer",null),t(this,"connectionStartTime",0),t(this,"bytesReceived",0),t(this,"bytesSent",0),t(this,"messagesReceived",0),t(this,"messagesSent",0),this.options={...hi,...e},this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.handleOpen=this.handleOpen.bind(this),this.handleMessage=this.handleMessage.bind(this),this.handleClose=this.handleClose.bind(this),this.handleError=this.handleError.bind(this),this.send=this.send.bind(this),this.processQueue=this.processQueue.bind(this),this.options.autoReconnect&&this.startInactivityDetection(),window.addEventListener("beforeunload",(()=>{this.cleanupBeforeUnload()}))}startInactivityDetection(){this.inactivityTimer&&clearInterval(this.inactivityTimer),this.inactivityTimer=setInterval((()=>{Date.now()-this.lastActivity>3e5&&"connected"===this.status&&(this.log("Connection inactive for 5 minutes, reconnecting..."),this.reconnect())}),6e4)}recordActivity(){this.lastActivity=Date.now()}cleanupBeforeUnload(){if(this.socket&&this.socket.readyState===WebSocket.OPEN){try{this.send({type:"client_disconnect",reason:"page_unload"})}catch(e){}const t=this.options.autoReconnect;this.options.autoReconnect=!1,this.disconnect(),this.options.autoReconnect=t}}log(...e){this.options.debug}connect(){return new Promise(((e,t)=>{this.socket&&this.disconnect();const a=localStorage.getItem("token");if(!a){const e=new Error("No authentication token found");return this.log("Connection error:",e),this.status="error",void t(e)}this.lastTokenUsed=a;try{this.status="connecting",this.connectionStartTime=Date.now();const n="https:"===window.location.protocol?"wss:":"ws:";let s={}.VITE_WS_BASE_URL||"";s||(s=`${n}//${window.location.host}/api/v1/ws`);const i=`${s}?token=${a}`;this.socket=new WebSocket(i),this.socket.onopen=()=>{this.handleOpen(),e()},this.socket.onmessage=this.handleMessage,this.socket.onclose=this.handleClose,this.socket.onerror=e=>{this.handleError(e),t(e)},"binaryType"in this.socket&&(this.socket.binaryType="arraybuffer")}catch(n){this.log("WebSocket connection error:",n),this.status="error",this.scheduleReconnect(),t(n)}}))}reconnect(){this.disconnect(),this.status="reconnecting",this.connect().catch((e=>{this.log("Reconnection failed:",e)}))}disconnect(){if(this.status="disconnected",this.socket){if(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.readyState===WebSocket.OPEN)try{this.socket.close(1e3,"Client disconnecting")}catch(e){this.log("Error closing WebSocket:",e)}this.socket=null}this.clearTimers()}clearTimers(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}getStatus(){return this.status}send(e){if(this.recordActivity(),"object"==typeof e&&(e.timestamp=e.timestamp||(new Date).toISOString(),e.client_id=e.client_id||this.generateClientId()),!this.socket||this.socket.readyState!==WebSocket.OPEN)return this.queueMessage(e),"connecting"!==this.status&&"reconnecting"!==this.status&&this.options.autoReconnect&&this.scheduleReconnect(),!1;try{const t=JSON.stringify(e);return this.socket.send(t),this.bytesSent+=t.length,this.messagesSent++,!0}catch(t){return this.log("Error sending message:",t),this.queueMessage(e),!1}}queueMessage(e){this.messageQueue.length>=(this.options.queueSizeLimit||100)&&this.messageQueue.shift(),this.messageQueue.push(e),this.log(`Message queued. Queue size: ${this.messageQueue.length}`)}processQueue(){if(!this.messageQueue.length||!this.isConnected())return;this.log(`Processing message queue. Size: ${this.messageQueue.length}`);const e=[...this.messageQueue];this.messageQueue=[];for(const t of e)this.send(t)}generateClientId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}on(e,t){return this.messageHandlers[e]||(this.messageHandlers[e]=[]),this.messageHandlers[e].push(t),()=>{this.messageHandlers[e]&&(this.messageHandlers[e]=this.messageHandlers[e].filter((e=>e!==t)))}}addMessageHandler(e){return this.on("all",e)}isConnected(){return"connected"===this.status&&null!==this.socket&&this.socket.readyState===WebSocket.OPEN}getStats(){const e=Date.now(),t=this.connectionStartTime?e-this.connectionStartTime:0;return{status:this.status,reconnectAttempts:this.reconnectAttempts,messageQueueSize:this.messageQueue.length,messagesReceived:this.messagesReceived,messagesSent:this.messagesSent,bytesReceived:this.bytesReceived,bytesSent:this.bytesSent,connectionDuration:t,connectionDurationFormatted:this.formatDuration(t),lastActivity:this.lastActivity?new Date(this.lastActivity).toISOString():null,inactiveTime:e-this.lastActivity}}formatDuration(e){if(e<1e3)return`${e}ms`;const t=Math.floor(e/1e3)%60,a=Math.floor(e/6e4)%60,n=Math.floor(e/36e5);return n>0?`${n}h ${a}m ${t}s`:a>0?`${a}m ${t}s`:`${t}s`}handleOpen(){this.status="connected",this.log("WebSocket connected"),this.reconnectAttempts=0,this.recordActivity(),this.options.pingInterval&&this.options.pingInterval>0&&(this.pingInterval=setInterval((()=>{this.isConnected()?this.send({type:"ping",timestamp:(new Date).toISOString()}):this.clearTimers()}),this.options.pingInterval)),this.processQueue()}handleMessage(e){if(this.recordActivity(),this.messagesReceived++,"string"==typeof e.data?this.bytesReceived+=e.data.length:e.data instanceof ArrayBuffer?this.bytesReceived+=e.data.byteLength:e.data instanceof Blob&&(this.bytesReceived+=e.data.size),e.data instanceof ArrayBuffer||e.data instanceof Blob)this.handleBinaryMessage(e.data);else try{const t=JSON.parse(e.data),a=t.type;if("pong"===a){if(t.original_timestamp){const e=Date.now()-new Date(t.original_timestamp).getTime();this.log(`Connection latency: ${e}ms`)}return}this.dispatchToStore(t),this.messageHandlers[a]&&this.messageHandlers[a].forEach((e=>{try{e(t)}catch(a){}})),this.messageHandlers.all&&this.messageHandlers.all.forEach((e=>{try{e(t)}catch(a){}}))}catch(t){}}handleBinaryMessage(e){if(e instanceof Blob){const t=new FileReader;t.onload=e=>{var t;(null==(t=e.target)?void 0:t.result)instanceof ArrayBuffer&&this.processBinaryData(e.target.result)},t.readAsArrayBuffer(e)}else this.processBinaryData(e)}processBinaryData(e){this.log(`Received binary data of size ${e.byteLength} bytes`);const t=new DataView(e).getUint32(0);this.messageHandlers[`binary_${t}`]&&this.messageHandlers[`binary_${t}`].forEach((t=>{try{t(e)}catch(a){}}))}dispatchToStore(e){const{type:t}=e;switch(t){case"notification":ui.dispatch(L({id:e.id||`notification-${Date.now()}`,type:e.notificationType||"info",message:e.message,read:!1,createdAt:e.timestamp||(new Date).toISOString()}));break;case"content_update":e.content&&ui.dispatch(vn(e.content));break;case"project_update":e.project&&ui.dispatch(Ss(e.project));break;case"ad_update":e.ad&&ui.dispatch(ss(e.ad))}}handleClose(e){const t="connected"===this.status;this.status="disconnected",this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.log(`WebSocket closed: ${e.code} ${e.reason}`);const a=1008===e.code,n=1e3===e.code&&"Client disconnecting"===e.reason;t&&!n&&!a&&this.options.autoReconnect?this.scheduleReconnect():a&&this.log("Authentication error, not reconnecting")}handleError(e){if(this.status="error",this.socket){try{this.socket.close()}catch(t){}this.socket=null}this.options.autoReconnect&&this.scheduleReconnect()}scheduleReconnect(){if(this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.options.maxReconnectAttempts!==1/0&&this.reconnectAttempts>=(this.options.maxReconnectAttempts||1/0))return void this.log("Maximum reconnect attempts reached, giving up");const e=Math.min((this.options.reconnectInterval||1e3)*Math.pow(this.options.reconnectDecay||1.5,this.reconnectAttempts),this.options.maxReconnectInterval||3e4);this.reconnectAttempts++,this.log(`Scheduling reconnect attempt ${this.reconnectAttempts} in ${e}ms`),this.reconnectTimer=setTimeout((()=>{this.log(`Attempting to reconnect (${this.reconnectAttempts}/${this.options.maxReconnectAttempts||"Infinity"})`),this.status="reconnecting",this.connect().catch((e=>{this.log("Reconnection failed:",e)}))}),e)}},gi=()=>{const[e,t]=x.useState(null),[a,n]=x.useState(null),s=y(),i=()=>{t(null),n(null)},r=()=>{s("/content/generator")},o=()=>{s("/content/templates")},l=()=>{s("/content/calendar")},c=e=>{switch(e){case"published":return"#4caf50";case"scheduled":return"#2196f3";case"draft":return"#ff9800";default:return"#9e9e9e"}},d=e=>{switch(e){case"blog":return"#4caf50";case"email":return"#2196f3";case"social":return"#9c27b0";case"ad":return"#f44336";default:return"#9e9e9e"}};return f.jsxs(D,{children:[f.jsxs(D,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx(R,{variant:"h4",component:"h1",fontWeight:"bold",children:"Content Overview"}),f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(z,{placeholder:"Search content...",size:"small",sx:{mr:2,width:250},InputProps:{startAdornment:f.jsx(P,{position:"start",children:f.jsx(M,{fontSize:"small"})})}}),f.jsx(F,{size:"small",sx:{mr:2},children:f.jsx(W,{})}),f.jsx(B,{})]})]}),f.jsxs(O,{sx:{p:3,mb:4},children:[f.jsx(R,{variant:"h6",sx:{mb:2},children:"Content Management"}),f.jsxs($,{container:!0,spacing:3,children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{boxShadow:3}},onClick:r,children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[f.jsx(q,{color:"primary",fontSize:"large"}),f.jsx(N,{label:"New",color:"primary",size:"small"})]}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Generator"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Generate high-quality content using AI templates. Create blog posts, emails, social media updates, and more with customizable templates."})]}),f.jsx(U,{children:f.jsx(G,{size:"small",endIcon:f.jsx(Q,{}),onClick:r,children:"Open Tool"})})]})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{boxShadow:3}},onClick:o,children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsx(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:f.jsx(K,{color:"primary",fontSize:"large"})}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Templates Library"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Browse and manage your content templates. Find templates for different content types, industries, and use cases."})]}),f.jsx(U,{children:f.jsx(G,{size:"small",endIcon:f.jsx(Q,{}),onClick:o,children:"View Templates"})})]})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer","&:hover":{boxShadow:3}},onClick:l,children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsx(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:f.jsx(J,{color:"primary",fontSize:"large"})}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Calendar"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Plan and schedule your content across channels. Visualize your content strategy and manage publication dates."})]}),f.jsx(U,{children:f.jsx(G,{size:"small",endIcon:f.jsx(Q,{}),onClick:l,children:"Open Calendar"})})]})})]})]}),f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[f.jsx(R,{variant:"h5",component:"h2",fontWeight:"medium",children:"Content Library"}),f.jsx(G,{variant:"outlined",endIcon:f.jsx(Q,{}),onClick:()=>{s("/content/library")},children:"View Full Library"})]}),f.jsx($,{container:!0,spacing:3,children:[{id:"1",title:"Top 10 Marketing Trends for 2025",type:"blog",status:"published",date:"2025-03-15",author:"Jane Smith",score:92,performance:{views:1250,engagement:4.8,conversion:2.3}},{id:"2",title:"March Newsletter: Product Updates",type:"email",status:"scheduled",date:"2025-03-25",author:"John Doe",score:88,performance:{views:0,engagement:0,conversion:0}},{id:"3",title:"Spring Sale Announcement",type:"social",status:"draft",date:"2025-03-10",author:"Sarah Johnson",score:76,performance:{views:0,engagement:0,conversion:0}},{id:"4",title:"Product Launch: Next-Gen Platform",type:"blog",status:"published",date:"2025-03-05",author:"Michael Brown",score:95,performance:{views:3200,engagement:5.2,conversion:3.7}}].map((e=>{return f.jsx($,{item:!0,xs:12,md:6,lg:4,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[f.jsx(N,{label:e.type,size:"small",sx:{bgcolor:d(e.type),color:"white",textTransform:"capitalize"}}),f.jsx(N,{label:e.status,size:"small",sx:{bgcolor:c(e.status),color:"white",textTransform:"capitalize"}})]}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:e.title}),f.jsxs(R,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created by ",e.author," on ",e.date]}),"published"===e.status&&f.jsx(D,{sx:{mt:2},children:f.jsxs($,{container:!0,spacing:2,children:[f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Views"}),f.jsx(R,{variant:"subtitle2",fontWeight:"bold",children:e.performance.views.toLocaleString()})]}),f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Engagement"}),f.jsxs(R,{variant:"subtitle2",fontWeight:"bold",children:[e.performance.engagement,"%"]})]}),f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Conversion"}),f.jsxs(R,{variant:"subtitle2",fontWeight:"bold",children:[e.performance.conversion,"%"]})]})]})}),f.jsxs(D,{sx:{display:"flex",alignItems:"center",mt:2},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Quality Score:"}),f.jsxs(D,{sx:{display:"inline-block",ml:1,px:1,py:.25,borderRadius:1,bgcolor:(a=e.score,a>=90?"#4caf50":a>=70?"#ff9800":"#f44336"),color:"white",fontWeight:"bold",fontSize:"0.75rem"},children:[e.score,"/100"]})]})]}),f.jsx(Y,{}),f.jsxs(U,{children:[f.jsx(G,{size:"small",startIcon:f.jsx(Z,{}),children:"View"}),f.jsx(G,{size:"small",startIcon:f.jsx(X,{}),children:"Edit"}),f.jsx(F,{size:"small",sx:{ml:"auto"},onClick:a=>{return s=a,i=e.id,t(s.currentTarget),void n(i);var s,i},children:f.jsx(ee,{})})]})]})},e.id);var a}))}),f.jsxs(te,{anchorEl:e,open:Boolean(e),onClose:i,children:[f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(X,{fontSize:"small"})}),f.jsx(se,{children:"Edit"})]}),f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(ie,{fontSize:"small"})}),f.jsx(se,{children:"Duplicate"})]}),f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(re,{fontSize:"small"})}),f.jsx(se,{children:"Share"})]}),f.jsx(Y,{}),f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(oe,{fontSize:"small"})}),f.jsx(se,{children:"Create A/B Test"})]}),f.jsx(Y,{}),f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(le,{fontSize:"small"})}),f.jsx(se,{children:"Archive"})]}),f.jsxs(ae,{onClick:i,children:[f.jsx(ne,{children:f.jsx(ce,{fontSize:"small",color:"error"})}),f.jsx(se,{sx:{color:"error.main"},children:"Delete"})]})]})]})},xi=()=>{const e=y(),[t,a]=x.useState(""),[n,s]=x.useState([]),[i,r]=x.useState([]),[o,l]=x.useState(!0),[c,d]=x.useState(null),[u,m]=x.useState(null),[h,p]=x.useState(null),{selectedBrand:g}=j((e=>e.brands));x.useEffect((()=>{(async()=>{l(!0),d(null);try{if(g){const e=await Ua.getContentItems(g.id);s(e),r(e)}else{const e=await Ua.getContentItems();s(e),r(e)}}catch(e){d("Failed to load content. Please try again later.")}finally{l(!1)}})()}),[g]),x.useEffect((()=>{l(!0);const e=setTimeout((()=>{const e=n.filter((e=>e.title.toLowerCase().includes(t.toLowerCase())||e.type.toLowerCase().includes(t.toLowerCase())||e.author.toLowerCase().includes(t.toLowerCase())));r(e),l(!1)}),300);return()=>clearTimeout(e)}),[t,n]);const v=()=>{m(null),p(null)},b=e=>{switch(e){case"published":return"#4caf50";case"scheduled":return"#2196f3";case"draft":return"#ff9800";default:return"#9e9e9e"}},C=e=>{switch(e){case"blog":return"#4caf50";case"email":return"#2196f3";case"social":return"#9c27b0";case"ad":return"#f44336";default:return"#9e9e9e"}};return f.jsxs(D,{sx:{p:3},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[f.jsx(R,{variant:"h4",component:"h1",fontWeight:"bold",children:"Content Library"}),f.jsxs(D,{sx:{display:"flex",alignItems:"center",gap:2},children:[f.jsx(z,{placeholder:"Search content...",value:t,onChange:e=>a(e.target.value),size:"small",sx:{width:250},InputProps:{startAdornment:f.jsx(P,{position:"start",children:f.jsx(M,{fontSize:"small"})}),endAdornment:t&&f.jsx(P,{position:"end",children:f.jsx(F,{"aria-label":"clear search",onClick:()=>a(""),edge:"end",size:"small",children:f.jsx(F,{size:"small",children:""})})})}}),f.jsx(G,{variant:"outlined",startIcon:f.jsx(W,{}),children:"Filter"}),f.jsx(B,{})]})]}),f.jsxs(D,{sx:{mb:4,display:"flex",gap:1,flexWrap:"wrap"},children:[f.jsx(N,{label:"All Content",onClick:()=>a(""),color:t?"default":"primary",sx:{borderRadius:1.5}}),f.jsx(N,{label:"Blog Posts",onClick:()=>a("blog"),color:"blog"===t?"primary":"default",sx:{borderRadius:1.5}}),f.jsx(N,{label:"Social Media",onClick:()=>a("social"),color:"social"===t?"primary":"default",sx:{borderRadius:1.5}}),f.jsx(N,{label:"Email",onClick:()=>a("email"),color:"email"===t?"primary":"default",sx:{borderRadius:1.5}}),f.jsx(N,{label:"Ad Copy",onClick:()=>a("ad"),color:"ad"===t?"primary":"default",sx:{borderRadius:1.5}})]}),o&&f.jsx(D,{sx:{display:"flex",justifyContent:"center",my:4},children:f.jsx(de,{})}),c&&f.jsxs(D,{sx:{my:4},children:[f.jsx(ue,{severity:"error",sx:{mb:2},children:c}),f.jsx(G,{variant:"outlined",onClick:()=>window.location.reload(),children:"Try Again"})]}),!o&&!c&&!g&&f.jsx(D,{sx:{my:4},children:f.jsx(ue,{severity:"info",children:"Please select a brand from the dropdown in the header to view brand-specific content."})}),!o&&!c&&0===i.length&&f.jsxs(D,{sx:{textAlign:"center",my:6},children:[f.jsx(R,{variant:"h6",color:"text.secondary",children:"No content items found matching your search."}),f.jsx(G,{variant:"outlined",sx:{mt:2},onClick:()=>a(""),children:"Clear Search"})]}),!o&&i.length>0&&f.jsx($,{container:!0,spacing:3,children:i.map((t=>{return f.jsx($,{item:!0,xs:12,sm:6,md:4,lg:3,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:3}},children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[f.jsx(N,{label:t.type,size:"small",sx:{bgcolor:C(t.type),color:"white",textTransform:"capitalize"}}),f.jsx(N,{label:t.status,size:"small",sx:{bgcolor:b(t.status),color:"white",textTransform:"capitalize"}})]}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:t.title}),f.jsxs(R,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Created by ",t.author," on ",t.date]}),"published"===t.status&&f.jsx(D,{sx:{mt:2},children:f.jsxs($,{container:!0,spacing:2,children:[f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Views"}),f.jsx(R,{variant:"subtitle2",fontWeight:"bold",children:t.performance.views.toLocaleString()})]}),f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Engagement"}),f.jsxs(R,{variant:"subtitle2",fontWeight:"bold",children:[t.performance.engagement,"%"]})]}),f.jsxs($,{item:!0,xs:4,children:[f.jsx(R,{variant:"caption",color:"text.secondary",display:"block",children:"Conversion"}),f.jsxs(R,{variant:"subtitle2",fontWeight:"bold",children:[t.performance.conversion,"%"]})]})]})}),f.jsxs(D,{sx:{display:"flex",alignItems:"center",mt:2},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Quality Score:"}),f.jsxs(D,{sx:{display:"inline-block",ml:1,px:1,py:.25,borderRadius:1,bgcolor:(a=t.score,a>=90?"#4caf50":a>=70?"#ff9800":"#f44336"),color:"white",fontWeight:"bold",fontSize:"0.75rem"},children:[t.score,"/100"]})]})]}),f.jsx(Y,{}),f.jsxs(U,{children:[f.jsx(G,{size:"small",startIcon:f.jsx(Z,{}),onClick:()=>e(`/content/${t.id}`),children:"View"}),f.jsx(G,{size:"small",startIcon:f.jsx(X,{}),onClick:()=>e(`/content/${t.id}/edit`),children:"Edit"}),f.jsx(F,{size:"small",sx:{ml:"auto"},onClick:e=>{return a=e,n=t.id,m(a.currentTarget),void p(n);var a,n},"aria-label":"more options",children:f.jsx(ee,{})})]})]})},t.id);var a}))}),f.jsxs(te,{anchorEl:u,open:Boolean(u),onClose:v,children:[f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(Z,{fontSize:"small"})}),f.jsx(se,{children:"View Details"})]}),f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(X,{fontSize:"small"})}),f.jsx(se,{children:"Edit"})]}),f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(ie,{fontSize:"small"})}),f.jsx(se,{children:"Duplicate"})]}),f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(re,{fontSize:"small"})}),f.jsx(se,{children:"Share"})]}),f.jsx(Y,{}),f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(le,{fontSize:"small"})}),f.jsx(se,{children:"Archive"})]}),f.jsxs(ae,{onClick:v,children:[f.jsx(ne,{children:f.jsx(ce,{fontSize:"small",color:"error"})}),f.jsx(se,{sx:{color:"error.main"},children:"Delete"})]})]})]})},yi=Object.freeze(Object.defineProperty({__proto__:null,default:xi},Symbol.toStringTag,{value:"Module"})),fi=()=>{const[e,t]=x.useState(!0),a=(e,a)=>{"clickaway"!==a&&t(!1)};return f.jsxs(D,{children:[f.jsx(R,{variant:"h4",component:"h1",sx:{mb:3},children:"Content Calendar"}),f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Calendar Insights"}),qa._staticCalendarInsights.map((e=>f.jsx(ue,{severity:e.severity,sx:{mb:1},children:e.message},e.id)))]}),f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Upcoming Content"}),[{id:1,title:"Instagram Post",scheduled_date:"2025-03-25T10:00:00Z",platform:"instagram"},{id:2,title:"Facebook Promotion",scheduled_date:"2025-03-26T14:30:00Z",platform:"facebook"},{id:3,title:"Monthly Newsletter",scheduled_date:"2025-03-27T09:00:00Z",platform:"email"}].map((e=>f.jsxs(D,{sx:{p:2,mb:1,border:"1px solid #eee",borderRadius:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs(D,{children:[f.jsx(R,{variant:"subtitle1",children:e.title}),f.jsxs(R,{variant:"body2",color:"text.secondary",children:["Platform: ",e.platform]})]}),f.jsx(R,{variant:"body2",children:new Date(e.scheduled_date).toLocaleString()})]},e.id)))]}),f.jsxs(O,{sx:{p:3,mb:3,bgcolor:"#f5f5f5"},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"Calendar Status"}),f.jsx(R,{variant:"body2",children:"This is a simplified calendar view while the staging environment is being set up. The full calendar with all features will be available once connected to the backend."})]}),f.jsx(me,{open:e,autoHideDuration:8e3,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:f.jsx(ue,{onClose:a,severity:"info",variant:"filled",sx:{width:"100%"},children:"This is a simplified calendar view until staging is set up"})})]})},ji=()=>f.jsx(v,{FallbackComponent:oa,children:f.jsx(fi,{})}),vi=Object.freeze(Object.defineProperty({__proto__:null,default:ji},Symbol.toStringTag,{value:"Module"})),bi=()=>{var e,t,a;const{id:n}=b(),s=y(),[i,r]=x.useState(!0),[o,l]=x.useState(null);x.useEffect((()=>{const e=setTimeout((()=>{r(!1),l("new"===n?{isNew:!0,title:"",type:"",status:"draft"}:{id:n,title:"Sample Content Title",type:"blog",status:"published",date:"2025-03-15",author:"Jane Smith",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla facilisi. Sed euismod, nisl nec ultricies lacinia, nisl nisl aliquet nisl, nec aliquet nisl nisl nec nisl.",score:92,performance:{views:1250,engagement:4.8,conversion:2.3}})}),800);return()=>clearTimeout(e)}),[n]);return f.jsxs(D,{children:[f.jsxs(D,{sx:{mb:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(G,{startIcon:f.jsx(he,{}),onClick:()=>{s("/content")},sx:{mr:2},children:"Back"}),f.jsx(R,{variant:"h4",component:"h1",fontWeight:"bold",children:"new"===n?"Create New Content":"Content Detail"})]}),"new"!==n&&f.jsxs(D,{children:[f.jsx(G,{variant:"outlined",startIcon:f.jsx(ce,{}),color:"error",sx:{mr:2},children:"Delete"}),f.jsx(G,{variant:"contained",startIcon:f.jsx(X,{}),children:"Edit Content"})]})]}),i?f.jsx(D,{sx:{display:"flex",justifyContent:"center",my:4},children:f.jsx(de,{})}):"new"===n?f.jsx(ue,{severity:"info",sx:{mb:4},children:"This is where the content creation form will be displayed. You'll be able to create new content items here."}):f.jsxs(O,{sx:{p:3},children:[f.jsxs(D,{sx:{mb:3},children:[f.jsx(R,{variant:"h5",fontWeight:"medium",gutterBottom:!0,children:null==o?void 0:o.title}),f.jsxs(D,{sx:{display:"flex",gap:1,mb:2},children:[f.jsx(N,{label:null==o?void 0:o.type,size:"small",color:"primary"}),f.jsx(N,{label:null==o?void 0:o.status,size:"small",color:"success"})]}),f.jsxs(R,{variant:"body2",color:"text.secondary",children:["Created by ",null==o?void 0:o.author," on ",null==o?void 0:o.date]})]}),f.jsx(Y,{sx:{my:3}}),f.jsx(R,{variant:"body1",paragraph:!0,children:null==o?void 0:o.content}),f.jsx(Y,{sx:{my:3}}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Performance"}),f.jsxs($,{container:!0,spacing:4,sx:{mb:2},children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"overline",color:"text.secondary",children:"Views"}),f.jsx(R,{variant:"h4",children:null==(e=null==o?void 0:o.performance)?void 0:e.views.toLocaleString()})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"overline",color:"text.secondary",children:"Engagement Rate"}),f.jsxs(R,{variant:"h4",children:[null==(t=null==o?void 0:o.performance)?void 0:t.engagement,"%"]})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"overline",color:"text.secondary",children:"Conversion Rate"}),f.jsxs(R,{variant:"h4",children:[null==(a=null==o?void 0:o.performance)?void 0:a.conversion,"%"]})]})})})]})]})]})},Ci=Object.freeze(Object.defineProperty({__proto__:null,default:bi},Symbol.toStringTag,{value:"Module"}));class Si extends x.Component{constructor(e){super(e),t(this,"handleRetry",(()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onRetry&&this.props.onRetry()})),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({errorInfo:t}),this.props.onError&&this.props.onError(e,t)}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:f.jsx(H,{sx:{mt:2,mb:2,borderLeft:5,borderColor:"error.main"},children:f.jsxs(V,{children:[f.jsxs(D,{display:"flex",alignItems:"center",mb:2,children:[f.jsx(pe,{color:"error",fontSize:"large",sx:{mr:2}}),f.jsx(R,{variant:"h6",component:"h2",color:"error",children:"API Error"})]}),f.jsx(ue,{severity:"error",sx:{mb:2},children:(null==(e=this.state.error)?void 0:e.message)||"An unexpected error occurred while fetching data."}),f.jsx(R,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Please try again or contact support if the problem persists."}),f.jsx(G,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:1},children:"Retry"}),f.jsx(G,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]})}):this.props.children}}const wi=x.forwardRef(((e,t)=>f.jsx(ge,{...e,direction:"up",ref:t}))),ki=e=>{switch(e){case"success":return f.jsx(ve,{fontSize:"small"});case"warning":return f.jsx(je,{fontSize:"small"});case"error":return f.jsx(fe,{fontSize:"small"});default:return f.jsx(ye,{fontSize:"small"})}},_i=({open:e,type:t="info",message:a,detail:n,autoHideDuration:s=5e3,onClose:i,anchorOrigin:r={vertical:"bottom",horizontal:"left"}})=>{const[o,l]=x.useState(e);x.useEffect((()=>{l(e)}),[e]);const c=(e,t)=>{"clickaway"!==t&&(l(!1),i())};return f.jsx(me,{open:o,autoHideDuration:s,onClose:c,anchorOrigin:r,TransitionComponent:wi,children:f.jsx(ue,{severity:t,variant:"filled",onClose:c,icon:ki(t),action:f.jsx(F,{"aria-label":"close",color:"inherit",size:"small",onClick:c,children:f.jsx(xe,{fontSize:"small"})}),sx:{width:"100%",alignItems:"center"},children:f.jsxs(D,{children:[f.jsx(R,{variant:"body2",fontWeight:"medium",children:a}),n&&f.jsx(R,{variant:"caption",display:"block",sx:{mt:.5,opacity:.9},children:n})]})})})},Ti=()=>{const[e,t]=x.useState({open:!1,type:"info",message:"",detail:void 0}),a=(e,a,n)=>{t({open:!0,type:e,message:a,detail:n})},n=()=>{t((e=>({...e,open:!1})))};return{showSuccess:(e,t)=>a("success",e,t),showError:(e,t)=>a("error",e,t),showWarning:(e,t)=>a("warning",e,t),showInfo:(e,t)=>a("info",e,t),ToastComponent:()=>f.jsx(_i,{open:e.open,type:e.type,message:e.message,detail:e.detail,onClose:n}),hideToast:n}},Ii={getTemplates:()=>ra.get("/content-generation/templates"),getTemplateById:e=>ra.get(`/content-generation/templates/${e}`),renderTemplate:(e,t)=>ra.post(`/content-generation/templates/${e}/render`,{variables:t}),createTemplate:e=>ra.post("/content-generation/templates",e),updateTemplate:(e,t)=>ra.put(`/content-generation/templates/${e}`,t),deleteTemplate:e=>ra.delete(`/content-generation/templates/${e}`),generateContent:e=>ra.post("/content-generation/generate",e),generateBatchContent:e=>ra.post("/content-generation/batch",{requests:e}),getTaskStatus:e=>ra.get(`/content-generation/tasks/${e}`),getQualityAssessment:e=>ra.get(`/content-generation/quality-assessment/${e}`),requestQualityAssessment:(e,t)=>ra.post("/content-generation/quality-assessment",{content:e,content_type:t}),createABTest:e=>ra.post("/content-generation/ab-tests",e),getABTests:()=>ra.get("/content-generation/ab-tests"),getABTestById:e=>ra.get(`/content-generation/ab-tests/${e}`),updateABTest:(e,t)=>ra.put(`/content-generation/ab-tests/${e}`,t),deleteABTest:e=>ra.delete(`/content-generation/ab-tests/${e}`),startABTest:e=>ra.post(`/content-generation/ab-tests/${e}/start`,{}),stopABTest:e=>ra.post(`/content-generation/ab-tests/${e}/stop`,{})};const Ai=new class{constructor(){t(this,"taskEventHandlers",new Map),t(this,"assessmentEventHandlers",new Map),t(this,"abTestEventHandlers",new Map),t(this,"initialized",!1),t(this,"handleWebSocketMessage",(e=>{if(e&&e.event_type){if(e.event_type.startsWith("generation_")&&e.task_id){const t=this.taskEventHandlers.get(e.task_id);t&&t(e)}if(e.event_type.startsWith("assessment_")&&e.content_id){const t=this.assessmentEventHandlers.get(e.content_id);t&&t(e)}if(e.event_type.startsWith("abtest_")&&e.test_id){const t=this.abTestEventHandlers.get(e.test_id);t&&t(e)}}})),this.init()}init(){this.initialized||(pi.addMessageHandler(this.handleWebSocketMessage),this.initialized=!0)}subscribeToGenerationTask(e,t){return this.taskEventHandlers.set(e,t),()=>this.taskEventHandlers.delete(e)}subscribeToQualityAssessment(e,t){return this.assessmentEventHandlers.set(e,t),()=>this.assessmentEventHandlers.delete(e)}subscribeToABTest(e,t){return this.abTestEventHandlers.set(e,t),()=>this.abTestEventHandlers.delete(e)}connect(){pi.connect()}disconnect(){pi.disconnect()}isConnected(){return pi.isConnected()}},Ei="templates",Li="abTests",Bi=()=>{var e;const t=C(),a=S([Ei],(()=>Ii.getTemplates()),{staleTime:3e5}),n=x.useCallback((e=>t.fetchQuery([Ei,e],(()=>Ii.getTemplateById(e)))),[t]),s=w((e=>Ii.createTemplate(e)),{onSuccess:()=>{t.invalidateQueries([Ei])}}),i=w((({templateId:e,template:t})=>Ii.updateTemplate(e,t)),{onSuccess:e=>{t.invalidateQueries([Ei]),t.setQueryData([Ei,e.id],e)}}),r=w((e=>Ii.deleteTemplate(e)),{onSuccess:()=>{t.invalidateQueries([Ei])}}),o=w((({templateId:e,variables:t})=>Ii.renderTemplate(e,t)));return{templatesQuery:a,getTemplate:n,createTemplate:s.mutate,updateTemplate:i.mutate,deleteTemplate:r.mutate,renderTemplate:o.mutate,isCreatingTemplate:s.isLoading,isUpdatingTemplate:i.isLoading,isDeletingTemplate:r.isLoading,isRenderingTemplate:o.isLoading,renderTemplateResult:null==(e=o.data)?void 0:e.rendered,renderTemplateError:o.error}},Di=()=>{const e=C(),[t,a]=x.useState(null),[n,s]=x.useState(!1),i=x.useRef(null);x.useEffect((()=>(Ai.isConnected()||Ai.connect(),s(Ai.isConnected()),()=>{i.current&&clearInterval(i.current)})),[]);const r=w((e=>Ii.generateContent(e)),{onSuccess:e=>{e.task_id&&(a({task_id:e.task_id,status:e.status,progress:e.progress||0,estimated_completion_time:e.estimated_completion_time}),"completed"===e.status&&e.variations&&a((t=>t?{...t,status:"completed",result:e.variations,progress:100}:null)))}}),o=x.useCallback((e=>{i.current&&clearInterval(i.current);const t=async()=>{try{const t=await Ii.getTaskStatus(e);a(t),"completed"!==t.status&&"failed"!==t.status||i.current&&(clearInterval(i.current),i.current=null)}catch(t){}};t(),i.current=setInterval(t,3e3)}),[]),l=x.useCallback((e=>Ai.subscribeToGenerationTask(e,(e=>{e.data&&a((t=>({...t,...e.data})))}))),[]),c=x.useCallback((e=>r.mutateAsync(e).then((e=>(e.task_id&&(n?l(e.task_id):o(e.task_id)),e)))),[r,o,l,n]),d=w((({content:e,contentType:t})=>Ii.requestQualityAssessment(e,t))),u=x.useCallback((t=>e.fetchQuery(["qualityAssessment",t],(()=>Ii.getQualityAssessment(t)))),[e]);return{generateContent:c,assessContent:d.mutate,getQualityAssessment:u,taskStatus:t,isGenerating:r.isLoading,isAssessing:d.isLoading,generationError:r.error,assessmentError:d.error,clearTaskStatus:()=>a(null),wsConnected:n}},Ri=()=>{const e=C(),t=S([Li],(()=>Ii.getABTests()),{staleTime:6e4}),a=x.useCallback((t=>e.fetchQuery([Li,t],(()=>Ii.getABTestById(t)))),[e]),n=w((e=>Ii.createABTest(e)),{onSuccess:()=>{e.invalidateQueries([Li])}}),s=w((({testId:e,testData:t})=>Ii.updateABTest(e,t)),{onSuccess:t=>{e.invalidateQueries([Li]),e.setQueryData([Li,t.id],t)}}),i=w((e=>Ii.deleteABTest(e)),{onSuccess:()=>{e.invalidateQueries([Li])}}),r=w((e=>Ii.startABTest(e)),{onSuccess:t=>{e.invalidateQueries([Li]),e.setQueryData([Li,t.id],t)}}),o=w((e=>Ii.stopABTest(e)),{onSuccess:t=>{e.invalidateQueries([Li]),e.setQueryData([Li,t.id],t)}});return{abTestsQuery:t,getABTest:a,createABTest:n.mutate,updateABTest:s.mutate,deleteABTest:i.mutate,startABTest:r.mutate,stopABTest:o.mutate,isCreatingABTest:n.isLoading,isUpdatingABTest:s.isLoading,isDeletingABTest:i.isLoading,isStartingABTest:r.isLoading,isStoppingABTest:o.isLoading}},zi=({onSelect:e,selectedTemplateId:t,error:a=!1,helperText:n,disabled:s=!1})=>{const{templatesQuery:i}=Bi(),r=e=>({blog:"#4caf50",email:"#2196f3",social:"#9c27b0",ad:"#f44336",landing:"#ff9800",other:"#607d8b"}[e]);if(i.isLoading)return f.jsx(D,{sx:{width:"100%"},children:f.jsx(be,{variant:"rectangular",width:"100%",height:60})});if(i.isError)return f.jsx(ue,{severity:"error",sx:{width:"100%"},children:"Error loading templates. Please try again later."});const o=(i.data||[]).map((e=>({id:e.id,name:e.name,description:e.description,type:e.content_type||"other",tags:e.tags||[],lastModified:e.updated_at})));return f.jsxs(Ce,{fullWidth:!0,error:a,disabled:s,children:[f.jsx(Se,{id:"template-select-label",children:"Content Template"}),f.jsxs(we,{labelId:"template-select-label",id:"template-select",value:t||"",label:"Content Template",onChange:t=>{e(t.target.value)},sx:{mb:2},renderValue:e=>{const t=o.find((t=>t.id===e));return t?f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[t.name,f.jsx(N,{label:t.type,size:"small",sx:{ml:1,bgcolor:r(t.type),color:"white"}})]}):f.jsx("em",{children:"Select a template"})},children:[f.jsx(ae,{value:"",disabled:!0,children:f.jsx("em",{children:"Select a template"})}),o.map((e=>f.jsx(ae,{value:e.id,children:f.jsxs(D,{sx:{width:"100%"},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx(R,{variant:"body1",children:e.name}),f.jsx(N,{label:e.type,size:"small",sx:{bgcolor:r(e.type),color:"white"}})]}),f.jsx(R,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8rem"},children:e.description}),f.jsx(D,{sx:{display:"flex",mt:.5,gap:.5},children:e.tags.map((e=>f.jsx(N,{label:e,size:"small",variant:"outlined",sx:{height:20,fontSize:"0.7rem"}},e)))})]})},e.id)))]}),n&&f.jsx(ke,{children:n})]})},Pi=({templateId:e,onChange:t,initialValues:a={},disabled:n=!1})=>{const{getTemplate:s}=Bi(),[i,r]=x.useState(null),[o,l]=x.useState([]),[c,d]=x.useState(a),[u,m]=x.useState(!0),[h,p]=x.useState(null),[g,y]=x.useState({}),j=e=>({name:e.label,key:e.name,description:e.description||"",type:(()=>{switch(e.type){case"string":default:return"text";case"text":return"multiline";case"number":return"number";case"boolean":case"select":return"select"}})(),required:e.required,defaultValue:void 0!==e.default_value?e.default_value.toString():"",options:"select"===e.type&&e.options?e.options.map((e=>e.label)):"boolean"===e.type?["Yes","No"]:void 0,validation:{min:void 0!==e.min?e.min:void 0,max:void 0!==e.max?e.max:void 0,pattern:e.validation,message:`Must be between ${e.min||0} and ${e.max||"unlimited"} characters`}});x.useEffect((()=>{if(!e)return m(!1),void l([]);m(!0),p(null),s(e).then((e=>{if(!e)throw new Error("Template data not found");r(e);const t=(Array.isArray(e.variables)?e.variables:[]).map(j);l(t),m(!1)})).catch((e=>{p("Failed to load template variables. Please try again."),m(!1)}))}),[e,s]),x.useEffect((()=>{const e={...c};o.forEach((t=>{t.key in e||void 0===t.defaultValue||(e[t.key]=t.defaultValue)})),d(e)}),[o]);const v=(e,a)=>{const n={...c,[e]:a};d(n);const s={...g},i=o.find((t=>t.key===e));(null==i?void 0:i.validation)&&(void 0!==i.validation.min&&a.length<i.validation.min?s[e]=i.validation.message||`Minimum ${i.validation.min} characters required`:void 0!==i.validation.max&&a.length>i.validation.max?s[e]=i.validation.message||`Maximum ${i.validation.max} characters allowed`:i.validation.pattern&&!new RegExp(i.validation.pattern).test(a)?s[e]=i.validation.message||"Invalid format":delete s[e]),y(s),t(n)};if(u)return f.jsx(D,{sx:{width:"100%",mt:2},children:f.jsx(be,{variant:"rectangular",width:"100%",height:400})});if(h)return f.jsx(ue,{severity:"error",sx:{mt:2},children:h});if(!e||0===o.length)return f.jsx(O,{sx:{p:3,mt:2,bgcolor:"#f5f5f5",textAlign:"center"},children:f.jsx(R,{variant:"body1",color:"text.secondary",children:"Please select a template to see available variables"})});const b=o.filter((e=>e.required)),C=o.filter((e=>!e.required));return f.jsxs(D,{sx:{mt:3},children:[f.jsxs(R,{variant:"h6",gutterBottom:!0,children:["Template Variables",f.jsx(_e,{title:"These variables will be used to generate your content based on the selected template.",children:f.jsx(F,{size:"small",sx:{ml:1},children:f.jsx(Te,{fontSize:"small"})})})]}),f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,fontWeight:"bold",children:"Required Information"}),f.jsx($,{container:!0,spacing:3,children:b.map((e=>{var t,a;return f.jsxs($,{item:!0,xs:12,md:"multiline"===e.type?12:6,children:["text"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),required:!0,error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n,InputProps:{endAdornment:(null==(t=e.validation)?void 0:t.max)&&f.jsxs(R,{variant:"caption",color:"text.secondary",children:[(c[e.key]||"").length,"/",e.validation.max]})}}),"number"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,type:"number",value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),required:!0,error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n}),"date"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,type:"date",value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),required:!0,error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n,InputLabelProps:{shrink:!0}}),"select"===e.type&&f.jsx(z,{fullWidth:!0,select:!0,label:e.name,value:c[e.key]||e.options&&e.options[0]||"",onChange:t=>v(e.key,t.target.value),required:!0,error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n,children:null==(a=e.options)?void 0:a.map((e=>f.jsx("option",{value:e,children:e},e)))}),"multiline"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,multiline:!0,rows:4,value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),required:!0,error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n})]},e.key)}))})]}),C.length>0&&f.jsxs(Ie,{children:[f.jsxs(Ae,{expandIcon:f.jsx(Ee,{}),children:[f.jsx(R,{children:"Optional Variables"}),f.jsx(N,{label:`${C.length} fields`,size:"small",sx:{ml:1},color:"primary",variant:"outlined"})]}),f.jsx(Le,{children:f.jsx($,{container:!0,spacing:3,children:C.map((e=>{var t;return f.jsxs($,{item:!0,xs:12,md:"multiline"===e.type?12:6,children:["text"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n}),"number"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,type:"number",value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n}),"date"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,type:"date",value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n,InputLabelProps:{shrink:!0}}),"select"===e.type&&f.jsx(z,{fullWidth:!0,select:!0,label:e.name,value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n,children:null==(t=e.options)?void 0:t.map((e=>f.jsx("option",{value:e,children:e},e)))}),"multiline"===e.type&&f.jsx(z,{fullWidth:!0,label:e.name,multiline:!0,rows:4,value:c[e.key]||"",onChange:t=>v(e.key,t.target.value),error:!!g[e.key],helperText:g[e.key]||e.description,disabled:n})]},e.key)}))})})]}),f.jsxs(D,{sx:{mt:2,display:"flex",alignItems:"center"},children:[f.jsx(ye,{fontSize:"small",color:"info",sx:{mr:1}}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"These variables will be used to customize your content based on the selected template"})]})]})},Mi=[{id:"template-preparation",label:"Template Preparation",description:"Loading template and preparing variables",status:"pending"},{id:"content-generation",label:"Content Generation",description:"Generating content based on your specifications",status:"pending"},{id:"quality-assessment",label:"Quality Assessment",description:"Evaluating content quality and readability",status:"pending"},{id:"optimization",label:"Content Optimization",description:"Applying final enhancements and improvements",status:"pending"}],Fi=({taskId:e,onCancel:t,onComplete:a})=>{const{getTaskStatus:n,wsConnected:s}=Di(),[i,r]=x.useState(Mi),[o,l]=x.useState(null),[c,d]=x.useState(0),[u,m]=x.useState(0),[h,p]=x.useState(null),[g,y]=x.useState(!1),j=x.useRef(null),v=x.useRef(null),b=x.useCallback((e=>{if(l(e),void 0!==e.progress&&m(e.progress),void 0!==e.steps_completed&&void 0!==e.total_steps){const t=Math.min(e.steps_completed,i.length-1);d(t),r((a=>{const n=[...a];for(let e=0;e<t;e++)n[e].status="completed",n[e].progress=100;if(t<n.length){const a=e.total_steps?((e.progress||0)-t*(100/n.length))*n.length:50;n[t].status="in-progress",n[t].progress=a,n[t].message=e.current_step}return n}))}"completed"===e.status?(y(!0),a&&e.result&&a(e.result),r((e=>e.map((e=>({...e,status:"completed",progress:100}))))),j.current&&(clearInterval(j.current),j.current=null)):"failed"===e.status&&(p(e.error||"Content generation failed"),r((t=>{const a=[...t];return c<a.length&&(a[c].status="error",a[c].message=e.error),a})),j.current&&(clearInterval(j.current),j.current=null))}),[i.length,c,a]);x.useEffect((()=>{if(!e)return;const t=e=>{e.data&&b(e.data)};if(n(e).then((e=>{b(e)})).catch((e=>{p("Failed to fetch generation status")})),s)v.current=Ai.subscribeToGenerationTask(e,t);else{const t=3e3,a=async()=>{try{const t=await n(e);b(t),"completed"!==t.status&&"failed"!==t.status||j.current&&(clearInterval(j.current),j.current=null)}catch(t){}};a(),j.current=setInterval(a,t)}return()=>{v.current&&(v.current(),v.current=null),j.current&&(clearInterval(j.current),j.current=null)}}),[e,n,b,s]);return f.jsxs(O,{sx:{p:3,mt:2},children:[f.jsxs(D,{sx:{mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Generation in Progress"}),f.jsx(R,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:g?"Content generation complete!":"Your content is being generated. This might take a few moments."}),s?f.jsx(N,{label:"Real-time updates",size:"small",color:"primary",sx:{mb:2}}):f.jsx(N,{label:"Polling for updates",size:"small",color:"default",sx:{mb:2}}),f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:1,mt:2},children:[f.jsx(R,{variant:"body2",sx:{mr:1},children:"Overall Progress:"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto"},children:[Math.round(u),"%"]})]}),f.jsx(Be,{variant:"determinate",value:u,sx:{height:8,borderRadius:4}}),(null==o?void 0:o.estimated_completion_time)&&!g&&f.jsxs(R,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1},children:["Estimated completion: ",new Date(o.estimated_completion_time).toLocaleTimeString()]})]}),f.jsx(De,{activeStep:c,orientation:"vertical",children:i.map(((e,t)=>f.jsxs(Re,{completed:"completed"===e.status,children:[f.jsx(ze,{StepIconComponent:()=>(e=>{switch(e){case"completed":return f.jsx(ve,{color:"success"});case"error":return f.jsx(fe,{color:"error"});case"in-progress":return f.jsx(de,{size:20});default:return null}})(e.status),optional:f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:["in-progress"===e.status&&f.jsx(N,{label:"Processing",size:"small",color:"primary",sx:{height:20,fontSize:"0.7rem"}}),"completed"===e.status&&f.jsx(N,{label:"Completed",size:"small",color:"success",sx:{height:20,fontSize:"0.7rem"}}),"error"===e.status&&f.jsx(N,{label:"Error",size:"small",color:"error",sx:{height:20,fontSize:"0.7rem"}})]}),children:e.label}),f.jsxs(Pe,{children:[f.jsx(R,{variant:"body2",color:"text.secondary",children:e.description}),"in-progress"===e.status&&void 0!==e.progress&&f.jsx(D,{sx:{mt:1,mb:1},children:f.jsx(Be,{variant:"determinate",value:e.progress,sx:{height:4,borderRadius:2}})}),e.message&&f.jsxs(D,{sx:{mt:1,display:"flex",alignItems:"flex-start"},children:[f.jsx(ye,{color:"info",fontSize:"small",sx:{mr:1,mt:.3}}),f.jsx(R,{variant:"caption",children:e.message})]})]})]},e.id)))}),h&&f.jsx(ue,{severity:"error",sx:{mt:2},children:h}),f.jsx(D,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:!g&&t&&f.jsx(G,{variant:"outlined",color:"inherit",onClick:()=>{t&&(t(),v.current&&(v.current(),v.current=null),j.current&&(clearInterval(j.current),j.current=null))},disabled:g,children:"Cancel Generation"})})]})},Wi=({data:e,assessment:t,isLoading:a=!1,contentId:n,onApplySuggestion:s})=>{const[i,r]=x.useState(!0),o=t?(e=>({overallScore:e.overall_score,metrics:{readability:e.metrics.readability,grammar:e.metrics.grammar_spelling,seo:e.metrics.seo_alignment,engagement:e.metrics.engagement,brandConsistency:e.metrics.brand_alignment},strengths:e.strengths,improvements:e.improvement_areas,suggestions:e.improvement_suggestions}))(t):e;if(a)return f.jsxs(O,{sx:{p:3,textAlign:"center"},children:[f.jsx(R,{variant:"body1",children:"Loading quality assessment..."}),f.jsx(Be,{sx:{mt:2}})]});if(!o)return f.jsxs(O,{sx:{p:3,textAlign:"center"},children:[f.jsx(R,{variant:"body1",color:"text.secondary",children:"No quality assessment available for this content."}),n&&f.jsx(G,{variant:"outlined",color:"primary",sx:{mt:2},children:"Request Quality Assessment"})]});const l=e=>e>=85?"#4caf50":e>=70?"#ff9800":"#f44336",c=e=>e>=85?f.jsx(ve,{fontSize:"small",sx:{color:"#4caf50"}}):e>=70?f.jsx(je,{fontSize:"small",sx:{color:"#ff9800"}}):f.jsx(fe,{fontSize:"small",sx:{color:"#f44336"}});return f.jsxs(O,{sx:{p:2,mb:3},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:2},children:[f.jsx(R,{variant:"h6",children:"Content Quality Analysis"}),f.jsx(_e,{title:"Content quality is evaluated based on readability, grammar, SEO optimization, engagement potential, and brand consistency.",children:f.jsx(F,{size:"small",sx:{ml:1},children:f.jsx(Me,{fontSize:"small"})})})]}),f.jsxs($,{container:!0,spacing:3,children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{sx:{textAlign:"center",bgcolor:"#f8f9fa",boxShadow:"none",border:"1px solid #e0e0e0",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Overall Quality Score"}),f.jsx(D,{sx:{position:"relative",display:"inline-flex",mb:1},children:f.jsx(D,{sx:{width:120,height:120,borderRadius:"50%",border:`8px solid ${l(o.overallScore)}`,display:"flex",alignItems:"center",justifyContent:"center"},children:f.jsx(R,{variant:"h4",fontWeight:"bold",children:o.overallScore})})}),f.jsx(R,{variant:"body1",sx:{fontWeight:"bold",color:l(o.overallScore)},children:(d=o.overallScore,d>=85?"Excellent":d>=70?"Good":d>=50?"Average":"Needs Improvement")}),f.jsx(R,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Based on 5 quality metrics"})]})})}),f.jsx($,{item:!0,xs:12,md:8,children:f.jsx(H,{sx:{boxShadow:"none",border:"1px solid #e0e0e0",height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Detailed Metrics"}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[c(o.metrics.readability),f.jsx(R,{variant:"body2",sx:{ml:1},children:"Readability"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto",fontWeight:"medium"},children:[o.metrics.readability,"/100"]})]}),f.jsx(Be,{variant:"determinate",value:o.metrics.readability,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:l(o.metrics.readability)}}})]}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[c(o.metrics.grammar),f.jsx(R,{variant:"body2",sx:{ml:1},children:"Grammar & Style"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto",fontWeight:"medium"},children:[o.metrics.grammar,"/100"]})]}),f.jsx(Be,{variant:"determinate",value:o.metrics.grammar,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:l(o.metrics.grammar)}}})]}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[c(o.metrics.seo),f.jsx(R,{variant:"body2",sx:{ml:1},children:"SEO Optimization"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto",fontWeight:"medium"},children:[o.metrics.seo,"/100"]})]}),f.jsx(Be,{variant:"determinate",value:o.metrics.seo,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:l(o.metrics.seo)}}})]}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[c(o.metrics.engagement),f.jsx(R,{variant:"body2",sx:{ml:1},children:"Engagement Potential"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto",fontWeight:"medium"},children:[o.metrics.engagement,"/100"]})]}),f.jsx(Be,{variant:"determinate",value:o.metrics.engagement,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:l(o.metrics.engagement)}}})]}),f.jsxs(D,{sx:{mb:0},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[c(o.metrics.brandConsistency),f.jsx(R,{variant:"body2",sx:{ml:1},children:"Brand Consistency"}),f.jsxs(R,{variant:"body2",sx:{ml:"auto",fontWeight:"medium"},children:[o.metrics.brandConsistency,"/100"]})]}),f.jsx(Be,{variant:"determinate",value:o.metrics.brandConsistency,sx:{height:6,borderRadius:3,bgcolor:"#f0f0f0","& .MuiLinearProgress-bar":{bgcolor:l(o.metrics.brandConsistency)}}})]})]})})})]}),f.jsx(Y,{sx:{my:3}}),f.jsxs($,{container:!0,spacing:3,children:[f.jsxs($,{item:!0,xs:12,md:6,children:[f.jsxs(R,{variant:"subtitle2",sx:{mb:2,display:"flex",alignItems:"center"},children:[f.jsx(Fe,{fontSize:"small",sx:{mr:1,color:"#4caf50"}}),"Content Strengths"]}),f.jsx(We,{dense:!0,disablePadding:!0,children:o.strengths.map(((e,t)=>f.jsxs(Oe,{disablePadding:!0,sx:{mb:1},children:[f.jsx(ne,{sx:{minWidth:32},children:f.jsx(ve,{fontSize:"small",sx:{color:"#4caf50"}})}),f.jsx(se,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t)))})]}),f.jsxs($,{item:!0,xs:12,md:6,children:[f.jsxs(R,{variant:"subtitle2",sx:{mb:2,display:"flex",alignItems:"center"},children:[f.jsx($e,{fontSize:"small",sx:{mr:1,color:"#ff9800"}}),"Areas for Improvement"]}),f.jsx(We,{dense:!0,disablePadding:!0,children:o.improvements.map(((e,t)=>f.jsxs(Oe,{disablePadding:!0,sx:{mb:1},children:[f.jsx(ne,{sx:{minWidth:32},children:f.jsx(je,{fontSize:"small",sx:{color:"#ff9800"}})}),f.jsx(se,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t)))})]})]}),o.suggestions&&o.suggestions.length>0&&f.jsxs(D,{sx:{mt:3},children:[f.jsx(G,{onClick:()=>r(!i),endIcon:f.jsx(Ee,{sx:{transform:i?"rotate(180deg)":"none"}}),sx:{mb:1},color:"primary",variant:"text",children:f.jsxs(R,{variant:"subtitle2",sx:{display:"flex",alignItems:"center"},children:[f.jsx(He,{fontSize:"small",sx:{mr:1,color:"#0066cc"}}),"Improvement Suggestions"]})}),f.jsx(Ve,{in:i,children:f.jsx(O,{sx:{p:2,bgcolor:"#f8fafd",border:"1px solid #e3f2fd"},children:f.jsx(We,{dense:!0,disablePadding:!0,children:o.suggestions.map(((e,t)=>f.jsxs(Oe,{disablePadding:!0,sx:{mb:1,display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[f.jsxs(D,{sx:{display:"flex",width:"100%"},children:[f.jsx(ne,{sx:{minWidth:32},children:f.jsx(He,{fontSize:"small",sx:{color:"#0066cc"}})}),f.jsx(se,{primary:e,primaryTypographyProps:{variant:"body2"}})]}),s&&f.jsx(G,{size:"small",variant:"outlined",color:"primary",onClick:()=>s(e),sx:{ml:4,mt:1},children:"Apply Suggestion"})]},t)))})})})]})]});var d},Oi=({onUsePrompt:e})=>{const[t,a]=x.useState(""),[n,s]=x.useState("all"),[i,r]=x.useState(null),[o,l]=x.useState(!1),[c,d]=x.useState([]),u=[{id:"blog-1",title:"Problem-Solution Blog Post",description:"A blog post that identifies a common problem and provides a solution.",content:'Create a blog post titled "[Problem]: [Solution]" that addresses [specific problem] faced by [target audience]. Begin by describing the problem and its impact. Then introduce [solution approach] as an effective solution. Include 3-5 practical steps to implement this solution, with specific examples. Conclude with the benefits of solving this problem and a call to action.',category:"blog",tags:["problem-solution","how-to","practical"],popularity:94,isFavorite:!1},{id:"email-1",title:"Product Launch Announcement",description:"Email announcing a new product or feature to existing customers.",content:"Craft an email announcing the launch of [product name], designed to [main benefit]. Begin with an engaging subject line that highlights the product's primary value. The first paragraph should create excitement about the innovation. Then describe 3 key features and their benefits to the customer. Include social proof if available. End with a clear call-to-action and a limited-time offer to create urgency.",category:"email",tags:["product launch","announcement","promotional"],popularity:87,isFavorite:!1},{id:"social-1",title:"Engaging Question Post",description:"Social media post with a question that encourages audience engagement.",content:"Create an engaging social media post for [platform] that asks the audience a thought-provoking question about [topic]. The question should be personally relevant to the audience and easy to answer. Include a striking statistic or fact related to the question to add credibility. End with a clear call-to-action asking followers to share their thoughts in the comments. Keep the tone conversational and authentic.",category:"social",tags:["engagement","question","conversation starter"],popularity:92,isFavorite:!1},{id:"ad-1",title:"AIDA Framework Ad Copy",description:"Advertisement copy following the Attention, Interest, Desire, Action framework.",content:"Write ad copy for [product/service] following the AIDA framework: \n1. Attention: Start with a headline that grabs attention by highlighting a pain point or unique benefit\n2. Interest: Develop interest by explaining how [product/service] works and its unique approach\n3. Desire: Build desire by describing specific benefits and including social proof\n4. Action: End with a clear, compelling call-to-action that creates urgency\n\nThe ad should be targeted at [audience] and emphasize [key value proposition].",category:"ad",tags:["AIDA","framework","conversion"],popularity:88,isFavorite:!1},{id:"blog-2",title:"Listicle Blog Post",description:"Easy-to-scan list-based article with valuable tips or examples.",content:'Create a listicle blog post titled "[Number] [Adjective] Ways to [Achieve Goal/Solve Problem]" targeted at [audience]. Start with a brief introduction explaining why this topic matters to the reader. Then provide [number] distinct points, each with its own subheading, short explanation, and specific example or actionable tip. Include a brief conclusion summarizing the key takeaways and a call to action. The tone should be [formal/conversational/inspirational] and the length should be approximately 1200-1500 words.',category:"blog",tags:["listicle","tips","numbered"],popularity:95,isFavorite:!1},{id:"email-2",title:"Re-engagement Email",description:"Email to win back inactive subscribers or customers.",content:"Create a re-engagement email for customers who haven't interacted with our [product/service/content] in [time period]. Begin with a subject line that creates curiosity or offers clear value. Open with an acknowledgment of their absence without being accusatory. Highlight 2-3 new features, improvements, or valuable content they've missed. Include a special incentive like [specific offer] to encourage them to return. Close with a simple, low-friction call to action. The tone should be friendly but not desperate.",category:"email",tags:["re-engagement","win-back","inactive customers"],popularity:83,isFavorite:!1},{id:"social-2",title:"Behind-the-Scenes Post",description:"Social media post showing the human side of your brand.",content:"Create a behind-the-scenes social media post for [platform] that showcases [specific aspect of your business]. Begin with an engaging opening line that creates curiosity. Describe what happens behind the scenes in an authentic, conversational way. Highlight one or two team members and their contributions. Include a personal anecdote or unexpected fact that humanizes the brand. End with a question that invites followers to share their thoughts or experiences. The post should be accompanied by [type of visual content].",category:"social",tags:["behind-the-scenes","authentic","brand story"],popularity:89,isFavorite:!1},{id:"ad-2",title:"PAS Framework Ad Copy",description:"Advertisement copy following the Problem, Agitation, Solution framework.",content:"Write ad copy using the Problem-Agitation-Solution (PAS) framework for [product/service]. \n1. Problem: Identify a specific problem that [target audience] faces related to [topic/need]\n2. Agitation: Expand on the problem, emphasizing the negative effects and pain points it causes\n3. Solution: Present [product/service] as the ideal solution, highlighting how it addresses the specific problem\n\nInclude a clear value proposition and end with a compelling call-to-action. The total length should be [character/word count] to fit [platform/format].",category:"ad",tags:["PAS","framework","problem-solution"],popularity:86,isFavorite:!1}].filter((e=>{const a=""===t||e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())||e.tags.some((e=>e.toLowerCase().includes(t.toLowerCase()))),s="all"===n||e.category===n,i="favorites"!==n||c.includes(e.id);return a&&s&&i})),m=()=>{l(!1)},h=t=>{e&&e(t),l(!1)},p=e=>{c.includes(e)?d(c.filter((t=>t!==e))):d([...c,e])};return f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:3},children:[f.jsxs(R,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[f.jsx(qe,{sx:{mr:1,color:"primary.main"}}),"Prompt Library"]}),f.jsxs(D,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[f.jsx(z,{placeholder:"Search prompts...",size:"small",value:t,onChange:e=>a(e.target.value),InputProps:{startAdornment:f.jsx(P,{position:"start",children:f.jsx(M,{fontSize:"small"})})},sx:{width:250,mr:2}}),f.jsx(_e,{title:"Filter by category",children:f.jsx(F,{onClick:()=>{},children:f.jsx(W,{})})})]})]}),f.jsxs(Ne,{value:n,onChange:(e,t)=>s(t),variant:"scrollable",scrollButtons:"auto",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[f.jsx(Ue,{label:"All Prompts",value:"all"}),f.jsx(Ue,{label:"Blog Posts",value:"blog"}),f.jsx(Ue,{label:"Email",value:"email"}),f.jsx(Ue,{label:"Social Media",value:"social"}),f.jsx(Ue,{label:"Ads",value:"ad"}),f.jsx(Ue,{label:"Favorites",value:"favorites",icon:f.jsx(Ge,{fontSize:"small"}),iconPosition:"start"})]}),f.jsx($,{container:!0,spacing:3,children:0===u.length?f.jsx($,{item:!0,xs:12,children:f.jsx(D,{sx:{textAlign:"center",py:4},children:f.jsx(R,{variant:"body1",color:"text.secondary",children:"No prompts found matching your search criteria."})})}):u.map((e=>{return f.jsx($,{item:!0,xs:12,sm:6,md:4,children:f.jsxs(H,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[f.jsxs(V,{sx:{flexGrow:1},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:1},children:[f.jsx(N,{label:e.category,size:"small",sx:{bgcolor:(t=e.category,{blog:"#4caf50",email:"#2196f3",social:"#9c27b0",ad:"#f44336"}[t]||"#607d8b"),color:"white",mr:1,textTransform:"capitalize"}}),f.jsxs(R,{variant:"caption",sx:{display:"flex",alignItems:"center",color:"text.secondary"},children:[f.jsx(Qe,{fontSize:"small",sx:{fontSize:14,mr:.5}}),e.popularity,"% success rate"]}),f.jsx(F,{size:"small",sx:{ml:"auto"},onClick:()=>p(e.id),children:c.includes(e.id)?f.jsx(Ge,{fontSize:"small",color:"primary"}):f.jsx(Ke,{fontSize:"small"})})]}),f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:e.title}),f.jsx(R,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.description}),f.jsx(D,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.tags.map((e=>f.jsx(N,{label:e,size:"small",variant:"outlined",sx:{height:20,fontSize:"0.7rem"}},e)))})]}),f.jsxs(U,{sx:{p:2,pt:0},children:[f.jsx(G,{size:"small",onClick:()=>(e=>{r(e),l(!0)})(e),fullWidth:!0,variant:"outlined",children:"View Prompt"}),f.jsx(G,{size:"small",onClick:()=>h(e),fullWidth:!0,variant:"contained",startIcon:f.jsx(Je,{}),children:"Use"})]})]})},e.id);var t}))}),f.jsx(D,{sx:{position:"fixed",bottom:20,right:20},children:f.jsx(_e,{title:"Add New Prompt",children:f.jsx(F,{color:"primary",size:"large",sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"},boxShadow:3},children:f.jsx(Ye,{})})})})]}),f.jsx(Ze,{open:o,onClose:m,maxWidth:"md",fullWidth:!0,children:i&&f.jsxs(f.Fragment,{children:[f.jsx(Xe,{children:f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(R,{variant:"h6",children:i.title}),f.jsx(F,{sx:{ml:"auto"},onClick:()=>p(i.id),children:c.includes(i.id)?f.jsx(Ge,{color:"primary"}):f.jsx(Ke,{})})]})}),f.jsx(et,{dividers:!0,children:f.jsxs($,{container:!0,spacing:3,children:[f.jsxs($,{item:!0,xs:12,md:8,children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Prompt Content"}),f.jsx(O,{variant:"outlined",sx:{p:2,mb:2,bgcolor:"#f8f9fa",fontFamily:"monospace",whiteSpace:"pre-wrap"},children:i.content}),f.jsx(G,{startIcon:f.jsx(ie,{}),variant:"outlined",size:"small",onClick:()=>{return e=i.content,void navigator.clipboard.writeText(e);var e},children:"Copy to Clipboard"})]}),f.jsxs($,{item:!0,xs:12,md:4,children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Prompt Details"}),f.jsxs(We,{dense:!0,disablePadding:!0,children:[f.jsxs(Oe,{disablePadding:!0,sx:{pb:1},children:[f.jsx(ne,{sx:{minWidth:40},children:f.jsx(tt,{fontSize:"small",color:"primary"})}),f.jsx(se,{primary:"Category",secondary:i.category,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body2",fontWeight:"medium",textTransform:"capitalize"}})]}),f.jsxs(Oe,{disablePadding:!0,sx:{pb:1},children:[f.jsx(ne,{sx:{minWidth:40},children:f.jsx(Qe,{fontSize:"small",color:"primary"})}),f.jsx(se,{primary:"Success Rate",secondary:`${i.popularity}%`,primaryTypographyProps:{variant:"body2",color:"text.secondary"},secondaryTypographyProps:{variant:"body2",fontWeight:"medium"}})]})]}),f.jsx(R,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2},children:"Tags"}),f.jsx(D,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:i.tags.map((e=>f.jsx(N,{label:e,size:"small",sx:{height:24}},e)))}),f.jsx(R,{variant:"subtitle2",gutterBottom:!0,sx:{mt:3},children:"Usage Tips"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Replace placeholders in [brackets] with your specific information. This prompt works best when you provide detailed information for each placeholder."})]})]})}),f.jsxs(at,{children:[f.jsx(G,{onClick:m,children:"Close"}),f.jsx(G,{variant:"contained",startIcon:f.jsx(Je,{}),onClick:()=>h(i),children:"Use This Prompt"})]})]})})]})},$i=[{id:"user1",name:"John Doe",color:"#e91e63",avatar:"JD",active:!0},{id:"user2",name:"Sarah Smith",color:"#2196f3",avatar:"SS",active:!0},{id:"user3",name:"Alex Wong",color:"#4caf50",avatar:"AW",active:!1}],Hi=[{id:"seo1",text:"Add a meta description with target keywords",severity:"high"},{id:"seo2",text:'Increase keyword density for "marketing automation"',severity:"medium"},{id:"seo3",text:"Add more headings to improve content structure",severity:"medium"},{id:"seo4",text:"Consider adding more images with alt text",severity:"low"}],Vi=[{id:"ai1",text:"Try using more conversational language here"},{id:"ai2",text:"This paragraph could be more concise"},{id:"ai3",text:'Consider addressing the reader directly with "you"'},{id:"ai4",text:"Add more statistics to support this claim"}],qi=[{id:"v1",createdAt:"2023-03-21T14:30:00Z",author:"John Doe",description:"Initial draft"},{id:"v2",createdAt:"2023-03-21T16:45:00Z",author:"Sarah Smith",description:"Added introduction"},{id:"v3",createdAt:"2023-03-22T09:15:00Z",author:"John Doe",description:"Major revision"},{id:"v4",createdAt:"2023-03-22T11:30:00Z",author:"Current",description:"Current version"}],Ni=[{id:"c1",author:"Sarah Smith",avatar:"SS",text:"Can we add more context here?",position:120,timestamp:"10:30 AM"},{id:"c2",author:"John Doe",avatar:"JD",text:"I think we should reword this sentence.",position:350,timestamp:"11:45 AM"}],Ui=({value:e,onChange:t,error:a,helperText:n,brandName:s="Brand"})=>{const i=nt(),r=da(i.breakpoints.down("sm")),[o,l]=x.useState(""),[c,d]=x.useState({start:0,end:0}),[u,m]=x.useState([]),[h,p]=x.useState(-1),[g,y]=x.useState($i),j=x.useRef(null),[v,b]=x.useState(!r),[C,S]=x.useState(0),[w,k]=x.useState(!1),[_,T]=x.useState(""),[I,A]=x.useState(""),[E,L]=x.useState(!1),[B,P]=x.useState(""),[W,$]=x.useState(""),[H,V]=x.useState(null),[q,U]=x.useState(!1),[Q,K]=x.useState(null),[J,Z]=x.useState(null),[ne,se]=x.useState(null),[re,oe]=x.useState(""),[le,ce]=x.useState({bold:!1,italic:!1,underline:!1,strikethrough:!1,h1:!1,h2:!1,h3:!1,bulletList:!1,numberList:!1,quote:!1,code:!1,alignLeft:!0,alignCenter:!1,alignRight:!1});x.useEffect((()=>{if(!o&&e){const t=e.split("\n\n").map((e=>`<p>${e.replace(/\n/g,"<br>")}</p>`)).join("");l(t),m([t]),p(0)}}),[e,o]);const de=x.useCallback((e=>{l(e);const a=document.createElement("div");a.innerHTML=e;const n=a.textContent||a.innerText||"";t(n),m((t=>[...t.slice(0,h+1),e].slice(-50))),p((e=>Math.min(e+1,49)))}),[t,h]),ue=e=>{j.current&&(document.execCommand(e),de(j.current.innerHTML),me())},me=()=>{ce({bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),underline:document.queryCommandState("underline"),strikethrough:document.queryCommandState("strikethrough"),h1:!1,h2:!1,h3:!1,bulletList:document.queryCommandState("insertUnorderedList"),numberList:document.queryCommandState("insertOrderedList"),quote:!1,code:!1,alignLeft:document.queryCommandState("justifyLeft"),alignCenter:document.queryCommandState("justifyCenter"),alignRight:document.queryCommandState("justifyRight")})},he=()=>{if(h>0){const e=h-1;p(e),l(u[e]);const a=document.createElement("div");a.innerHTML=u[e];const n=a.textContent||a.innerText||"";t(n)}},pe=()=>{if(h<u.length-1){const e=h+1;p(e),l(u[e]);const a=document.createElement("div");a.innerHTML=u[e];const n=a.textContent||a.innerText||"";t(n)}},ge=()=>{V(null)};return f.jsxs(D,{sx:{mt:1,display:"flex",flexDirection:"column"},children:[f.jsxs(O,{variant:"outlined",sx:{display:"flex",flexDirection:r?"column":"row",minHeight:400,border:a?"1px solid #d32f2f":void 0,backgroundColor:"#f8f9fa",borderRadius:2,overflow:"hidden"},children:[f.jsxs(D,{sx:{flex:1,display:"flex",flexDirection:"column",borderRight:v&&!r?"1px solid #e0e0e0":"none",maxWidth:r?"100%":v?"calc(100% - 280px)":"100%"},children:[f.jsxs(D,{sx:{display:"flex",flexWrap:"wrap",gap:.5,p:1,borderBottom:"1px solid #e0e0e0",backgroundColor:"#fff",overflowX:"auto"},children:[f.jsx(_e,{title:"Bold (Ctrl+B)",children:f.jsx(F,{size:"small",onClick:()=>ue("bold"),color:le.bold?"primary":"default","aria-label":"Bold",children:f.jsx(st,{fontSize:"small"})})}),f.jsx(_e,{title:"Italic (Ctrl+I)",children:f.jsx(F,{size:"small",onClick:()=>ue("italic"),color:le.italic?"primary":"default","aria-label":"Italic",children:f.jsx(it,{fontSize:"small"})})}),f.jsx(_e,{title:"Underline (Ctrl+U)",children:f.jsx(F,{size:"small",onClick:()=>ue("underline"),color:le.underline?"primary":"default","aria-label":"Underline",children:f.jsx(rt,{fontSize:"small"})})}),f.jsx(_e,{title:"Strikethrough",children:f.jsx(F,{size:"small",onClick:()=>ue("strikethrough"),color:le.strikethrough?"primary":"default","aria-label":"Strikethrough",children:f.jsx(ot,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Heading 1",children:f.jsx(F,{size:"small",onClick:()=>document.execCommand("formatBlock",!1,"<h1>"),color:le.h1?"primary":"default","aria-label":"Heading 1",children:f.jsx(D,{component:"span",sx:{fontSize:"16px",fontWeight:"bold"},children:"H1"})})}),f.jsx(_e,{title:"Heading 2",children:f.jsx(F,{size:"small",onClick:()=>document.execCommand("formatBlock",!1,"<h2>"),color:le.h2?"primary":"default","aria-label":"Heading 2",children:f.jsx(D,{component:"span",sx:{fontSize:"14px",fontWeight:"bold"},children:"H2"})})}),f.jsx(_e,{title:"Heading 3",children:f.jsx(F,{size:"small",onClick:()=>document.execCommand("formatBlock",!1,"<h3>"),color:le.h3?"primary":"default","aria-label":"Heading 3",children:f.jsx(D,{component:"span",sx:{fontSize:"12px",fontWeight:"bold"},children:"H3"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Bullet List",children:f.jsx(F,{size:"small",onClick:()=>ue("insertUnorderedList"),color:le.bulletList?"primary":"default","aria-label":"Bullet List",children:f.jsx(lt,{fontSize:"small"})})}),f.jsx(_e,{title:"Numbered List",children:f.jsx(F,{size:"small",onClick:()=>ue("insertOrderedList"),color:le.numberList?"primary":"default","aria-label":"Numbered List",children:f.jsx(ct,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Quote",children:f.jsx(F,{size:"small",onClick:()=>document.execCommand("formatBlock",!1,"<blockquote>"),color:le.quote?"primary":"default","aria-label":"Quote",children:f.jsx(dt,{fontSize:"small"})})}),f.jsx(_e,{title:"Code",children:f.jsx(F,{size:"small",onClick:()=>document.execCommand("formatBlock",!1,"<pre>"),color:le.code?"primary":"default","aria-label":"Code",children:f.jsx(ut,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Insert Link",children:f.jsx(F,{size:"small",onClick:()=>{if(j.current){const e=window.getSelection();e&&e.toString()&&A(e.toString())}k(!0)},"aria-label":"Insert Link",children:f.jsx(mt,{fontSize:"small"})})}),f.jsx(_e,{title:"Insert Image",children:f.jsx(F,{size:"small",onClick:()=>{L(!0)},"aria-label":"Insert Image",children:f.jsx(ht,{fontSize:"small"})})}),f.jsx(_e,{title:"Insert Table",children:f.jsx(F,{size:"small",onClick:()=>{document.execCommand("insertHTML",!1,'\n                    <table style="width:100%; border-collapse: collapse;">\n                      <tr><td style="border: 1px solid #ddd; padding: 8px;">Cell 1</td><td style="border: 1px solid #ddd; padding: 8px;">Cell 2</td></tr>\n                      <tr><td style="border: 1px solid #ddd; padding: 8px;">Cell 3</td><td style="border: 1px solid #ddd; padding: 8px;">Cell 4</td></tr>\n                    </table>\n                  '),j.current&&de(j.current.innerHTML)},"aria-label":"Insert Table",children:f.jsx(pt,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Align Left",children:f.jsx(F,{size:"small",onClick:()=>ue("justifyLeft"),color:le.alignLeft?"primary":"default","aria-label":"Align Left",children:f.jsx(gt,{fontSize:"small"})})}),f.jsx(_e,{title:"Align Center",children:f.jsx(F,{size:"small",onClick:()=>ue("justifyCenter"),color:le.alignCenter?"primary":"default","aria-label":"Align Center",children:f.jsx(xt,{fontSize:"small"})})}),f.jsx(_e,{title:"Align Right",children:f.jsx(F,{size:"small",onClick:()=>ue("justifyRight"),color:le.alignRight?"primary":"default","aria-label":"Align Right",children:f.jsx(yt,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Undo (Ctrl+Z)",children:f.jsx(F,{size:"small",onClick:he,disabled:h<=0,"aria-label":"Undo",children:f.jsx(ft,{fontSize:"small"})})}),f.jsx(_e,{title:"Redo (Ctrl+Y)",children:f.jsx(F,{size:"small",onClick:pe,disabled:h>=u.length-1,"aria-label":"Redo",children:f.jsx(jt,{fontSize:"small"})})}),f.jsx(_e,{title:"Version History",children:f.jsx(F,{size:"small",onClick:()=>{U(!0)},"aria-label":"Version History",children:f.jsx(Qe,{fontSize:"small"})})}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:.5}}),f.jsx(_e,{title:"Add Comment",children:f.jsx(F,{size:"small",onClick:e=>{Z(e.currentTarget)},"aria-label":"Add Comment",children:f.jsx(vt,{fontSize:"small"})})}),f.jsx(_e,{title:"More Formatting Options",children:f.jsx(F,{size:"small",onClick:e=>{V(e.currentTarget)},"aria-label":"More Formatting Options",children:f.jsx(ee,{fontSize:"small"})})}),f.jsx(D,{sx:{flexGrow:1}}),f.jsx(D,{sx:{display:"flex",gap:.5},children:g.filter((e=>e.active)).map(((e,t)=>f.jsx(_e,{title:e.name,children:f.jsx(bt,{sx:{width:24,height:24,fontSize:"0.8rem",bgcolor:e.color,border:"2px solid #fff"},children:e.avatar})},e.id)))}),r&&f.jsx(_e,{title:v?"Hide Sidebar":"Show Sidebar",children:f.jsx(F,{size:"small",onClick:()=>b(!v),"aria-label":v?"Hide Sidebar":"Show Sidebar",children:v?f.jsx(Ee,{fontSize:"small"}):f.jsx(Ct,{fontSize:"small"})})})]}),f.jsx(D,{ref:j,contentEditable:!0,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:o},onInput:e=>{de(e.currentTarget.innerHTML)},onSelect:()=>{me()},onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&"b"===e.key?(e.preventDefault(),ue("bold")):(e.ctrlKey||e.metaKey)&&"i"===e.key?(e.preventDefault(),ue("italic")):(e.ctrlKey||e.metaKey)&&"u"===e.key?(e.preventDefault(),ue("underline")):(e.ctrlKey||e.metaKey)&&"z"===e.key?(e.preventDefault(),he()):(e.ctrlKey||e.metaKey)&&("y"===e.key||e.shiftKey&&"z"===e.key)&&(e.preventDefault(),pe())},onBlur:()=>{const e=window.getSelection();if(e&&e.rangeCount>0){const t=e.getRangeAt(0);d({start:t.startOffset,end:t.endOffset})}},sx:{flex:1,p:2,overflow:"auto",outline:"none",fontSize:"1rem",lineHeight:1.6,"& p":{marginBottom:"1em"},"& h1":{fontSize:"2rem",marginBottom:"0.5em",fontWeight:"bold"},"& h2":{fontSize:"1.5rem",marginBottom:"0.5em",fontWeight:"bold"},"& h3":{fontSize:"1.25rem",marginBottom:"0.5em",fontWeight:"bold"},"& ul, & ol":{marginLeft:"2em",marginBottom:"1em"},"& blockquote":{borderLeft:"4px solid #ccc",paddingLeft:"1em",color:"text.secondary",marginBottom:"1em"},"& pre":{backgroundColor:"#f5f5f5",padding:"0.5em",borderRadius:"4px",overflowX:"auto",marginBottom:"1em"},"& a":{color:"primary.main"},"& table":{width:"100%",borderCollapse:"collapse",marginBottom:"1em"},"& td, & th":{border:"1px solid #ddd",padding:"8px",textAlign:"left"},"& img":{maxWidth:"100%",height:"auto"}},role:"textbox","aria-multiline":"true","aria-label":"Rich text editor",placeholder:"Start typing your content here..."}),f.jsxs(D,{sx:{borderTop:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",p:.5,backgroundColor:"#fff",fontSize:"0.75rem",color:"text.secondary"},children:[f.jsxs(D,{children:[Ni.length," comments"]}),f.jsxs(D,{children:["Last edited ",(new Date).toLocaleTimeString()]})]})]}),(!r||r&&v)&&f.jsxs(D,{sx:{width:r?"100%":280,backgroundColor:"#fff",borderTop:r?"1px solid #e0e0e0":"none",display:"flex",flexDirection:"column"},children:[f.jsxs(Ne,{value:C,onChange:(e,t)=>S(t),variant:"fullWidth","aria-label":"Editor sidebar tabs",children:[f.jsx(Ue,{icon:f.jsx(He,{}),label:r?void 0:"AI Suggestions","aria-label":"AI Suggestions",id:"sidebar-tab-0",iconPosition:"start"}),f.jsx(Ue,{icon:f.jsx(M,{}),label:r?void 0:"SEO Tips","aria-label":"SEO Tips",id:"sidebar-tab-1",iconPosition:"start"}),f.jsx(Ue,{icon:f.jsx(vt,{}),label:r?void 0:"Comments","aria-label":"Comments",id:"sidebar-tab-2",iconPosition:"start"})]}),f.jsxs(D,{sx:{flex:1,overflow:"auto",p:2},children:[0===C&&f.jsxs(f.Fragment,{children:[f.jsxs(R,{variant:"subtitle2",gutterBottom:!0,children:["AI Writing Suggestions for ",s]}),Vi.map((e=>f.jsxs(O,{elevation:0,sx:{p:1,mb:1,border:"1px solid #e0e0e0",backgroundColor:"#f8f9fa"},children:[f.jsx(R,{variant:"body2",children:e.text}),f.jsxs(D,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:[f.jsx(G,{size:"small",variant:"outlined",startIcon:f.jsx(X,{}),sx:{mr:1},children:"Apply"}),f.jsx(F,{size:"small","aria-label":"Dismiss suggestion",children:f.jsx(xe,{fontSize:"small"})})]})]},e.id)))]}),1===C&&f.jsxs(f.Fragment,{children:[f.jsxs(R,{variant:"subtitle2",gutterBottom:!0,children:["SEO Optimization for ",s]}),Hi.map((e=>f.jsxs(O,{elevation:0,sx:{p:1,mb:1,border:"1px solid #e0e0e0",backgroundColor:"high"===e.severity?"#fff8e1":"medium"===e.severity?"#f5f5f5":"#e8f5e9"},children:[f.jsx(D,{sx:{display:"flex",alignItems:"flex-start"},children:f.jsx(N,{label:e.severity.toUpperCase(),size:"small",color:"high"===e.severity?"warning":"medium"===e.severity?"default":"success",sx:{mr:1,mb:1}})}),f.jsx(R,{variant:"body2",children:e.text})]},e.id)))]}),2===C&&f.jsxs(f.Fragment,{children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Content Comments"}),Ni.map((e=>f.jsxs(O,{elevation:0,sx:{p:1,mb:1,border:"1px solid #e0e0e0",backgroundColor:"#f8f9fa",cursor:"pointer"},onClick:t=>{return a=e.id,n=t,se(a),void Z(n.currentTarget);var a,n},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:.5},children:[f.jsx(bt,{sx:{width:24,height:24,fontSize:"0.8rem",mr:1},children:e.avatar}),f.jsx(R,{variant:"body2",fontWeight:"bold",children:e.author}),f.jsx(D,{sx:{flexGrow:1}}),f.jsx(R,{variant:"caption",color:"text.secondary",children:e.timestamp})]}),f.jsx(R,{variant:"body2",children:e.text})]},e.id)))]})]})]})]}),a&&n&&f.jsx(ke,{error:!0,children:n}),f.jsxs(Ze,{open:w,onClose:()=>k(!1),"aria-labelledby":"link-dialog-title",children:[f.jsx(Xe,{id:"link-dialog-title",children:"Insert Link"}),f.jsxs(et,{children:[f.jsx(z,{autoFocus:!0,margin:"dense",id:"url",label:"Link URL",type:"url",fullWidth:!0,value:_,onChange:e=>T(e.target.value),variant:"outlined",placeholder:"https://example.com"}),I&&f.jsx(z,{margin:"dense",id:"text",label:"Link Text",type:"text",fullWidth:!0,value:I,onChange:e=>A(e.target.value),variant:"outlined"})]}),f.jsxs(at,{children:[f.jsx(G,{onClick:()=>k(!1),children:"Cancel"}),f.jsx(G,{onClick:()=>{_&&(document.execCommand("createLink",!1,_),j.current&&de(j.current.innerHTML),T(""),A(""),k(!1))},variant:"contained",disabled:!_,children:"Insert"})]})]}),f.jsxs(Ze,{open:E,onClose:()=>L(!1),"aria-labelledby":"image-dialog-title",children:[f.jsx(Xe,{id:"image-dialog-title",children:"Insert Image"}),f.jsxs(et,{children:[f.jsx(z,{autoFocus:!0,margin:"dense",id:"imageUrl",label:"Image URL",type:"url",fullWidth:!0,value:B,onChange:e=>P(e.target.value),variant:"outlined",placeholder:"https://example.com/image.jpg"}),f.jsx(z,{margin:"dense",id:"imageAlt",label:"Alt Text (for accessibility)",type:"text",fullWidth:!0,value:W,onChange:e=>$(e.target.value),variant:"outlined"})]}),f.jsxs(at,{children:[f.jsx(G,{onClick:()=>L(!1),children:"Cancel"}),f.jsx(G,{onClick:()=>{B&&(document.execCommand("insertHTML",!1,`<img src="${B}" alt="${W}" style="max-width: 100%;">`),j.current&&de(j.current.innerHTML),P(""),$(""),L(!1))},variant:"contained",disabled:!B,children:"Insert"})]})]}),f.jsxs(te,{anchorEl:H,open:Boolean(H),onClose:ge,children:[f.jsxs(ae,{onClick:()=>{document.execCommand("subscript"),j.current&&de(j.current.innerHTML),ge()},children:[f.jsx(St,{fontSize:"small",sx:{mr:1}})," Subscript"]}),f.jsxs(ae,{onClick:()=>{document.execCommand("superscript"),j.current&&de(j.current.innerHTML),ge()},children:[f.jsx(wt,{fontSize:"small",sx:{mr:1}})," Superscript"]}),f.jsxs(ae,{onClick:()=>{document.execCommand("formatBlock",!1,"<pre>"),j.current&&de(j.current.innerHTML),ge()},children:[f.jsx(ut,{fontSize:"small",sx:{mr:1}})," Code Block"]}),f.jsxs(ae,{onClick:()=>{document.execCommand("foreColor",!1,"#e91e63"),j.current&&de(j.current.innerHTML),ge()},children:[f.jsx(kt,{fontSize:"small",sx:{mr:1}})," Text Color"]}),f.jsxs(ae,{onClick:()=>{document.execCommand("removeFormat"),j.current&&de(j.current.innerHTML),ge()},children:[f.jsx(_t,{fontSize:"small",sx:{mr:1}})," Clear Formatting"]}),f.jsx(Y,{}),f.jsxs(ae,{onClick:()=>{j.current&&navigator.clipboard.writeText(j.current.innerText),ge()},children:[f.jsx(ie,{fontSize:"small",sx:{mr:1}})," Copy Text"]}),f.jsxs(ae,{onClick:()=>{j.current&&navigator.clipboard.writeText(j.current.innerHTML),ge()},children:[f.jsx(Tt,{fontSize:"small",sx:{mr:1}})," Copy HTML"]})]}),f.jsxs(Ze,{open:q,onClose:()=>U(!1),fullWidth:!0,maxWidth:"sm","aria-labelledby":"version-history-dialog-title",children:[f.jsx(Xe,{id:"version-history-dialog-title",children:"Version History"}),f.jsx(et,{children:f.jsxs(D,{sx:{mb:2},children:[f.jsx(R,{variant:"body2",color:"text.secondary",paragraph:!0,children:"View and restore previous versions of your content."}),qi.map((e=>{return f.jsxs(O,{elevation:0,sx:{p:1.5,mb:1,backgroundColor:Q===e.id?"action.selected":"background.paper",border:"1px solid",borderColor:Q===e.id?"primary.main":"divider"},onClick:()=>K(e.id),children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(R,{variant:"subtitle2",children:e.description}),"v4"===e.id&&f.jsx(N,{label:"Current",size:"small",color:"primary",sx:{ml:1}}),f.jsx(D,{sx:{flexGrow:1}}),f.jsx(R,{variant:"caption",color:"text.secondary",children:(t=e.createdAt,new Date(t).toLocaleString())})]}),f.jsx(D,{sx:{display:"flex",alignItems:"center",mt:.5},children:f.jsx(R,{variant:"body2",color:"text.secondary",children:e.author})})]},e.id);var t}))]})}),f.jsxs(at,{children:[f.jsx(G,{onClick:()=>U(!1),children:"Cancel"}),f.jsx(G,{onClick:()=>{U(!1)},variant:"contained",disabled:!Q,children:"Restore This Version"})]})]}),f.jsx(te,{anchorEl:J,open:Boolean(J),onClose:()=>Z(null),children:f.jsxs(D,{sx:{p:2,width:300},children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Add Comment"}),f.jsx(z,{autoFocus:!0,margin:"dense",id:"comment",placeholder:"Add your comment here...",type:"text",fullWidth:!0,value:re,onChange:e=>oe(e.target.value),variant:"outlined",multiline:!0,rows:3}),f.jsxs(D,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:[f.jsx(G,{onClick:()=>Z(null),sx:{mr:1},children:"Cancel"}),f.jsx(G,{onClick:()=>{re.trim()&&(oe(""),Z(null))},variant:"contained",disabled:!re.trim(),children:"Add"})]})]})})]})},Gi=({testId:e,initialTestData:t,onUpdateTest:a,onCreateVariant:n,onViewContent:s,onCompareVariants:i})=>{var r,o,l;const{getABTest:c,updateABTest:d,startABTest:u,stopABTest:m}=Ri(),[h,p]=x.useState(t),[g,y]=x.useState(!t),[j,v]=x.useState(null),[b,C]=x.useState(0),[S,w]=x.useState(!1),[k,_]=x.useState([]),[T,I]=x.useState(!1),[A,E]=x.useState((null==t?void 0:t.name)||""),[L,B]=x.useState(!1);if(x.useEffect((()=>{t||(y(!0),c(e).then((e=>{const t={id:(a=e).id,name:a.title,description:"",status:a.status,startDate:a.created_at,endDate:a.end_date,variants:a.content_variations.map(((e,t)=>{var n,s,i,r,o,l,c,d,u,m,h,p,g,x,y,f,j,v,b,C;return{id:e.variation_id,name:`Variant ${t+1}`,content:e.content,status:a.status,isOriginal:0===t,isWinner:a.winner_id===e.variation_id,metrics:(null==(s=null==(n=a.results)?void 0:n.find((t=>t.variation_id===e.variation_id)))?void 0:s.metrics)?{impressions:(null==(o=null==(r=null==(i=a.results)?void 0:i.find((t=>t.variation_id===e.variation_id)))?void 0:r.metrics)?void 0:o.impressions)||0,clicks:(null==(d=null==(c=null==(l=a.results)?void 0:l.find((t=>t.variation_id===e.variation_id)))?void 0:c.metrics)?void 0:d.clicks)||0,conversions:(null==(h=null==(m=null==(u=a.results)?void 0:u.find((t=>t.variation_id===e.variation_id)))?void 0:m.metrics)?void 0:h.conversions)||0,engagementRate:(null==(x=null==(g=null==(p=a.results)?void 0:p.find((t=>t.variation_id===e.variation_id)))?void 0:g.metrics)?void 0:x.engagement_rate)||0,ctr:(null==(j=null==(f=null==(y=a.results)?void 0:y.find((t=>t.variation_id===e.variation_id)))?void 0:f.metrics)?void 0:j.ctr)||0,conversionRate:(null==(C=null==(b=null==(v=a.results)?void 0:v.find((t=>t.variation_id===e.variation_id)))?void 0:b.metrics)?void 0:C.conversion_rate)||0}:void 0}})),metrics:a.results?{totalImpressions:a.results.reduce(((e,t)=>{var a;return e+((null==(a=t.metrics)?void 0:a.impressions)||0)}),0),totalClicks:a.results.reduce(((e,t)=>{var a;return e+((null==(a=t.metrics)?void 0:a.clicks)||0)}),0),totalConversions:a.results.reduce(((e,t)=>{var a;return e+((null==(a=t.metrics)?void 0:a.conversions)||0)}),0),confidence:95}:void 0};var a;p(t),E(t.name),y(!1)})).catch((e=>{v("Failed to load A/B test data"),y(!1)})))}),[e,t,c]),g)return f.jsxs(O,{sx:{p:3,textAlign:"center"},children:[f.jsx(R,{variant:"body1",children:"Loading A/B test data..."}),f.jsx(Be,{sx:{mt:2}})]});if(j||!h)return f.jsxs(O,{sx:{p:3,textAlign:"center"},children:[f.jsx(R,{variant:"body1",color:"error",children:j||"A/B test data not available"}),f.jsx(G,{variant:"outlined",color:"primary",sx:{mt:2},onClick:()=>window.location.reload(),children:"Retry"})]});const P=(e,t,a=!0)=>{var n,s;if(!e.metrics||!h.variants[0].metrics)return null;const i=(null==(s=null==(n=h.variants.find((e=>e.isOriginal)))?void 0:n.metrics)?void 0:s[t])||0,r=e.metrics[t];if(0===i)return null;const o=(r-i)/i*100,l=o>0,c=o<0;return Math.abs(o)<.5||a&&!l||!a&&!c?null:f.jsx(N,{label:`${l?"+":""}${o.toFixed(1)}%`,size:"small",color:l?"success":"error",sx:{ml:1,height:20,fontWeight:"bold"}})};return f.jsxs(D,{children:[f.jsxs(O,{sx:{p:2,mb:3},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:2},children:[f.jsx(oe,{sx:{mr:1,color:"primary.main"}}),T?f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(z,{value:A,onChange:e=>E(e.target.value),variant:"standard",size:"small",sx:{mr:1},autoFocus:!0}),f.jsx(G,{size:"small",onClick:()=>{if(""===A.trim())return;const t={...h,name:A};p(t),d(e,{title:A}).catch((e=>{p(h),E(h.name)})),a&&a(t),I(!1)},children:"Save"}),f.jsx(G,{size:"small",onClick:()=>{E(h.name),I(!1)},children:"Cancel"})]}):f.jsxs(f.Fragment,{children:[f.jsx(R,{variant:"h6",sx:{flexGrow:1},children:h.name}),f.jsx(F,{size:"small",onClick:()=>I(!0),children:f.jsx(X,{fontSize:"small"})})]}),f.jsxs(D,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[f.jsx(_e,{title:"View test details",children:f.jsx(F,{size:"small",onClick:()=>B(!0),children:f.jsx(Z,{fontSize:"small"})})}),f.jsxs(Ce,{size:"small",sx:{ml:2,minWidth:120},children:[f.jsx(Se,{id:"test-status-label",children:"Status"}),f.jsxs(we,{labelId:"test-status-label",value:h.status,label:"Status",onChange:t=>{const n=t.target.value,s={...h,status:n};p(s),"running"===n?u(e).catch((e=>{p(h)})):"paused"===n||"completed"===n?m(e).catch((e=>{p(h)})):d(e,{status:n}).catch((e=>{p(h)})),a&&a(s)},size:"small",children:[f.jsx(ae,{value:"draft",children:"Draft"}),f.jsx(ae,{value:"scheduled",children:"Scheduled"}),f.jsx(ae,{value:"running",children:"Running"}),f.jsx(ae,{value:"paused",children:"Paused"}),f.jsx(ae,{value:"completed",children:"Completed"})]})]}),f.jsx(G,{variant:"outlined",startIcon:f.jsx(oe,{}),size:"small",onClick:()=>w(!S),sx:{ml:2},children:S?"Exit Compare":"Compare"})]})]}),"running"===h.status&&f.jsxs(D,{sx:{mb:2,p:1,bgcolor:"#f0f7ff",borderRadius:1,display:"flex",alignItems:"center"},children:[f.jsx(It,{sx:{mr:1,color:"primary.main"}}),f.jsx(R,{variant:"body2",children:"Test is currently running. Data is being collected and analyzed in real-time."}),h.metrics&&f.jsxs(D,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[f.jsxs(R,{variant:"body2",sx:{mr:1},children:[f.jsx("strong",{children:h.metrics.totalImpressions.toLocaleString()})," impressions"]}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),f.jsxs(R,{variant:"body2",sx:{mr:1},children:[f.jsx("strong",{children:h.metrics.totalClicks.toLocaleString()})," clicks"]}),f.jsx(Y,{orientation:"vertical",flexItem:!0,sx:{mx:1}}),f.jsxs(R,{variant:"body2",children:[f.jsx("strong",{children:h.metrics.totalConversions.toLocaleString()})," conversions"]})]})]}),"completed"===h.status&&h.variants.some((e=>e.isWinner))&&f.jsxs(D,{sx:{mb:2,p:1,bgcolor:"#f1f8e9",borderRadius:1,display:"flex",alignItems:"center"},children:[f.jsx(ve,{sx:{mr:1,color:"success.main"}}),f.jsxs(R,{variant:"body2",children:["Test completed. Variant ",f.jsx("strong",{children:null==(r=h.variants.find((e=>e.isWinner)))?void 0:r.name})," is the winner with ",null==(l=null==(o=h.variants.find((e=>e.isWinner)))?void 0:o.metrics)?void 0:l.conversionRate.toFixed(2),"% conversion rate."]}),f.jsx(G,{size:"small",sx:{ml:"auto"},startIcon:f.jsx(At,{}),children:"Implement Winner"})]}),f.jsxs(D,{sx:{width:"100%",mb:2},children:[f.jsx(D,{sx:{borderBottom:1,borderColor:"divider"},children:f.jsxs(Ne,{value:b,onChange:(e,t)=>{C(t)},variant:"scrollable",scrollButtons:"auto",children:[h.variants.map(((e,t)=>f.jsx(Ue,{label:f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[S?f.jsx(F,{size:"small",onClick:t=>{var a;t.stopPropagation(),a=e.id,k.includes(a)?_(k.filter((e=>e!==a))):k.length<2&&_([...k,a])},sx:{mr:1},children:k.includes(e.id)?f.jsx(ve,{color:"primary",fontSize:"small"}):f.jsx(Et,{fontSize:"small"})}):null,e.isOriginal?f.jsx(N,{label:"Original",size:"small",sx:{mr:1,height:20}}):f.jsx(N,{label:`Variant ${t}`,size:"small",sx:{mr:1,height:20}}),e.name,e.isWinner&&f.jsx(N,{label:"Winner",size:"small",color:"success",sx:{ml:1,height:20},icon:f.jsx(ve,{fontSize:"small"})})]})},e.id))),n&&f.jsx(Ue,{icon:f.jsx(Lt,{}),"aria-label":"add variant",sx:{minWidth:"auto"},onClick:()=>n(h.id)})]})}),S&&k.length>0?f.jsxs(D,{sx:{mt:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:2},children:[f.jsxs(R,{variant:"subtitle1",children:["Compare Variants (",k.length,"/2 selected)"]}),f.jsx(G,{variant:"contained",onClick:()=>{2===k.length&&i&&i(k)},disabled:2!==k.length,sx:{ml:"auto"},children:"Compare Selected"})]}),2===k.length&&f.jsx($,{container:!0,spacing:2,children:k.map((e=>{const t=h.variants.find((t=>t.id===e));return f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(H,{variant:"outlined",children:[f.jsxs(V,{children:[f.jsxs(R,{variant:"subtitle1",gutterBottom:!0,children:[t.name,t.isOriginal&&f.jsx(N,{label:"Original",size:"small",sx:{ml:1,height:20}})]}),f.jsxs(R,{variant:"body2",color:"text.secondary",noWrap:!0,children:[t.content.substring(0,100),"..."]}),t.metrics&&f.jsx(D,{sx:{mt:2},children:f.jsxs($,{container:!0,spacing:1,children:[f.jsxs($,{item:!0,xs:6,children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Click-through Rate:"}),f.jsxs(R,{variant:"body2",fontWeight:"bold",children:[t.metrics.ctr.toFixed(2),"%"]})]}),f.jsxs($,{item:!0,xs:6,children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Conversion Rate:"}),f.jsxs(R,{variant:"body2",fontWeight:"bold",children:[t.metrics.conversionRate.toFixed(2),"%"]})]})]})})]}),f.jsx(U,{children:f.jsx(G,{size:"small",onClick:()=>s&&s(t.content),children:"View Content"})})]})},t.id)}))})]}):f.jsx(f.Fragment,{children:h.variants.map(((e,t)=>f.jsx(D,{role:"tabpanel",hidden:b!==t,id:`variant-tabpanel-${t}`,"aria-labelledby":`variant-tab-${t}`,sx:{py:2},children:b===t&&f.jsxs($,{container:!0,spacing:3,children:[f.jsx($,{item:!0,xs:12,md:8,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:2},children:[f.jsx(R,{variant:"subtitle1",children:e.name}),e.isOriginal&&f.jsx(N,{label:"Original",size:"small",sx:{ml:1,height:20}}),e.isWinner&&f.jsx(N,{label:"Winner",size:"small",color:"success",sx:{ml:1,height:20},icon:f.jsx(ve,{fontSize:"small"})}),f.jsx(N,{label:e.status,size:"small",color:"running"===e.status?"success":"paused"===e.status?"warning":"completed"===e.status?"info":"default",sx:{ml:1,height:20}})]}),f.jsxs(R,{variant:"body2",sx:{whiteSpace:"pre-wrap",mb:2},children:[e.content.substring(0,300),e.content.length>300&&"..."]}),f.jsx(G,{size:"small",onClick:()=>s&&s(e.content),startIcon:f.jsx(Z,{}),children:"View Full Content"})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsxs(H,{variant:"outlined",children:[f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Performance Metrics"}),e.metrics?f.jsxs(D,{children:[f.jsxs(D,{sx:{mb:2},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Impressions"}),f.jsx(R,{variant:"body1",fontWeight:"medium",children:e.metrics.impressions.toLocaleString()})]}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Click-through Rate (CTR)"}),!1===e.isOriginal&&P(e,"ctr",!0)]}),f.jsxs(R,{variant:"body1",fontWeight:"medium",children:[e.metrics.ctr.toFixed(2),"%"]}),f.jsx(Be,{variant:"determinate",value:Math.min(5*e.metrics.ctr,100),sx:{height:4,borderRadius:2,mt:.5}})]}),f.jsxs(D,{sx:{mb:2},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Conversion Rate"}),!1===e.isOriginal&&P(e,"conversionRate",!0)]}),f.jsxs(R,{variant:"body1",fontWeight:"medium",children:[e.metrics.conversionRate.toFixed(2),"%"]}),f.jsx(Be,{variant:"determinate",value:Math.min(5*e.metrics.conversionRate,100),sx:{height:4,borderRadius:2,mt:.5}})]}),f.jsxs(D,{children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(R,{variant:"caption",color:"text.secondary",children:"Engagement Rate"}),!1===e.isOriginal&&P(e,"engagementRate",!0)]}),f.jsxs(R,{variant:"body1",fontWeight:"medium",children:[e.metrics.engagementRate.toFixed(2),"%"]}),f.jsx(Be,{variant:"determinate",value:Math.min(2*e.metrics.engagementRate,100),sx:{height:4,borderRadius:2,mt:.5}})]})]}):f.jsx(R,{variant:"body2",color:"text.secondary",sx:{py:2},children:"No metrics available yet. Start the test to collect data."})]}),f.jsx(U,{children:f.jsx(G,{size:"small",startIcon:f.jsx(Bt,{}),disabled:!e.metrics,children:"Detailed Analytics"})})]})})]})},e.id)))})]}),f.jsxs(D,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[f.jsx(G,{startIcon:f.jsx(Dt,{}),sx:{mr:1},children:"Export Results"}),f.jsx(G,{startIcon:f.jsx(re,{}),children:"Share Test"})]})]}),f.jsxs(Ze,{open:L,onClose:()=>B(!1),maxWidth:"md",fullWidth:!0,children:[f.jsx(Xe,{children:f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[f.jsx(oe,{sx:{mr:1}}),"Test Details: ",h.name]})}),f.jsx(et,{dividers:!0,children:f.jsxs($,{container:!0,spacing:3,children:[f.jsxs($,{item:!0,xs:12,md:6,children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"General Information"}),f.jsx(Rt,{component:O,variant:"outlined",children:f.jsx(zt,{size:"small",children:f.jsxs(Pt,{children:[f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Description"}),f.jsx(Ft,{children:h.description||"No description provided"})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Status"}),f.jsx(Ft,{children:f.jsx(N,{label:h.status,size:"small",color:"running"===h.status?"success":"paused"===h.status?"warning":"completed"===h.status?"info":"default"})})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Start Date"}),f.jsx(Ft,{children:h.startDate||"Not started"})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"End Date"}),f.jsx(Ft,{children:h.endDate||"Not completed"})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Target Audience"}),f.jsx(Ft,{children:h.targetAudience||"All visitors"})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Conversion Goal"}),f.jsx(Ft,{children:h.conversionGoal||"Not specified"})]}),f.jsxs(Mt,{children:[f.jsx(Ft,{component:"th",scope:"row",sx:{fontWeight:"medium"},children:"Traffic Allocation"}),f.jsx(Ft,{children:h.trafficAllocation?`${h.trafficAllocation}%`:"100%"})]})]})})})]}),f.jsxs($,{item:!0,xs:12,md:6,children:[f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Test Results"}),h.metrics?f.jsxs(f.Fragment,{children:[f.jsx(D,{sx:{mb:3},children:f.jsxs($,{container:!0,spacing:2,children:[f.jsx($,{item:!0,xs:4,children:f.jsxs(O,{sx:{p:2,textAlign:"center"},variant:"outlined",children:[f.jsx(R,{variant:"h6",fontWeight:"bold",children:h.metrics.totalImpressions.toLocaleString()}),f.jsx(R,{variant:"caption",color:"text.secondary",children:"Total Impressions"})]})}),f.jsx($,{item:!0,xs:4,children:f.jsxs(O,{sx:{p:2,textAlign:"center"},variant:"outlined",children:[f.jsx(R,{variant:"h6",fontWeight:"bold",children:h.metrics.totalClicks.toLocaleString()}),f.jsx(R,{variant:"caption",color:"text.secondary",children:"Total Clicks"})]})}),f.jsx($,{item:!0,xs:4,children:f.jsxs(O,{sx:{p:2,textAlign:"center"},variant:"outlined",children:[f.jsx(R,{variant:"h6",fontWeight:"bold",children:h.metrics.totalConversions.toLocaleString()}),f.jsx(R,{variant:"caption",color:"text.secondary",children:"Total Conversions"})]})})]})}),f.jsx(R,{variant:"subtitle2",gutterBottom:!0,children:"Variant Performance"}),f.jsx(Rt,{component:O,variant:"outlined",children:f.jsxs(zt,{size:"small",children:[f.jsx(Wt,{children:f.jsxs(Mt,{children:[f.jsx(Ft,{children:"Variant"}),f.jsx(Ft,{align:"right",children:"CTR"}),f.jsx(Ft,{align:"right",children:"Conv. Rate"}),f.jsx(Ft,{align:"right",children:"Engagement"})]})}),f.jsx(Pt,{children:h.variants.map((e=>{var t,a,n;return f.jsxs(Mt,{children:[f.jsx(Ft,{children:f.jsxs(D,{sx:{display:"flex",alignItems:"center"},children:[e.name,e.isOriginal&&f.jsx(N,{label:"Original",size:"small",sx:{ml:1,height:20}}),e.isWinner&&f.jsx(N,{label:"Winner",size:"small",color:"success",sx:{ml:1,height:20}})]})}),f.jsxs(Ft,{align:"right",children:[null==(t=e.metrics)?void 0:t.ctr.toFixed(2),"%"]}),f.jsxs(Ft,{align:"right",children:[null==(a=e.metrics)?void 0:a.conversionRate.toFixed(2),"%"]}),f.jsxs(Ft,{align:"right",children:[null==(n=e.metrics)?void 0:n.engagementRate.toFixed(2),"%"]})]},e.id)}))})]})}),h.metrics.confidence>0&&f.jsx(D,{sx:{mt:2,p:2,bgcolor:"#f1f8e9",borderRadius:1},children:f.jsxs(R,{variant:"body2",children:["Statistical Confidence: ",f.jsxs("strong",{children:[h.metrics.confidence.toFixed(2),"%"]}),h.metrics.confidence>=95&&f.jsx(f.Fragment,{children:" - Statistically significant result"})]})})]}):f.jsx(O,{sx:{p:3,textAlign:"center"},variant:"outlined",children:f.jsx(R,{variant:"body2",color:"text.secondary",children:"No test results available yet. Start the test to collect data."})})]})]})}),f.jsxs(at,{children:[f.jsx(G,{onClick:()=>B(!1),children:"Close"}),f.jsx(G,{variant:"contained",startIcon:f.jsx(Bt,{}),disabled:!h.metrics,children:"Full Analytics"})]})]})]})},Qi={trackEvent:e=>ra.post("/analytics/events",{...e,timestamp:(new Date).toISOString()}),trackTemplateUsage:(e,t,a,n,s,i)=>Qi.trackEvent({event_name:"template_usage",event_data:{template_id:e,template_name:t,success:a,generation_time_ms:n,variables:s,error_type:i}}),trackTemplateError:(e,t,a)=>Qi.trackEvent({event_name:"template_error",event_data:{template_id:e,error_type:t,error_message:a}}),getTemplateAnalytics:e=>ra.get(`/analytics/templates/${e}`),getAllTemplatesAnalytics:e=>ra.get("/analytics/templates",{params:e}),getUserAnalytics:e=>ra.get(`/analytics/users/${e}`),getEvents:e=>ra.get("/analytics/events",{params:e})},Ki={id:"test-1",name:"Landing Page Headline Test",description:"Testing different headline variations for the new landing page",status:"running",startDate:"2025-03-15",endDate:"2025-03-22",variants:[{id:"var-1",name:"Original Headline",content:"Create Amazing Content with AI",status:"running",isOriginal:!0,metrics:{impressions:1245,clicks:87,conversions:12,engagementRate:65.4,ctr:6.99,conversionRate:13.79}},{id:"var-2",name:"Benefit-focused Headline",content:"Save 10 Hours Every Week with AI-Powered Content",status:"running",metrics:{impressions:1251,clicks:106,conversions:18,engagementRate:72.1,ctr:8.47,conversionRate:16.98}}],metrics:{totalImpressions:2496,totalClicks:193,totalConversions:30,confidence:89},targetAudience:"Marketing professionals",conversionGoal:"Free trial signup",trafficAllocation:50},Ji={overallScore:84,metrics:{readability:92,grammar:95,seo:78,engagement:81,brandConsistency:85},strengths:["Clear and concise language throughout","Excellent grammar and punctuation","Good use of heading structure for SEO","Consistent brand voice and terminology"],improvements:["Could use more engaging introductory paragraph","Consider adding more industry-specific keywords","Some sentences are too long and complex"],suggestions:["Break up the third paragraph into smaller chunks for better readability","Add a call-to-action at the end of each major section","Include 2-3 more internal links to related content","Consider using bulleted lists to highlight key benefits"]},Yi=()=>{const{templatesQuery:e}=Bi(),{generateContent:t,taskStatus:a,isGenerating:n,clearTaskStatus:s,assessContent:i,getQualityAssessment:r}=Di(),{createABTest:o,abTestsQuery:l}=Ri(),{showSuccess:c,showError:d,showInfo:u,ToastComponent:m}=Ti(),{apiError:h,isError:p,handleApiError:g,clearApiError:y}=(()=>{const[e,t]=x.useState({error:null,isError:!1}),a=Ti(),n=x.useCallback(((e,n=!0)=>{var i,r,o;if(e){if(t({error:e,isError:!0}),n){const t=e.message||"An unexpected error occurred",n=e.details||(null==(r=null==(i=e.response)?void 0:i.data)?void 0:r.message)||`Error code: ${e.code||(null==(o=e.response)?void 0:o.status)||"unknown"}`;a.showError(t,n)}}else s()}),[a]),s=x.useCallback((()=>{t({error:null,isError:!1})}),[]),i=x.useCallback(((e,t,a=!0)=>{var s,i,r;const o={message:t||e.message||"An unexpected error occurred",code:e.code||((null==(s=e.response)?void 0:s.status)?String(e.response.status):void 0),details:e.details||(null==(r=null==(i=e.response)?void 0:i.data)?void 0:r.message),response:e.response};return n(o,a),o}),[n]),r=x.useCallback((async(e,t,a=!0)=>{try{return s(),await e()}catch(n){return i(n,t,a),null}}),[i,s]);return{...e,setApiError:n,clearApiError:s,handleApiError:i,withErrorHandling:r,ToastComponent:a.ToastComponent}})(),[j,v]=x.useState(0),[b,C]=x.useState(""),[S,w]=x.useState({}),[k,_]=x.useState(""),[T,I]=x.useState(!1),[A,E]=x.useState(""),[L,B]=x.useState([]),[z,P]=x.useState(""),[M,W]=x.useState(null),[q,N]=x.useState(!1),[U,Q]=x.useState(null),[K,J]=x.useState(0),[Z,X]=x.useState(null),[ee,te]=x.useState(0),ae=["Select Template","Customize Variables","Generate Content","Review & Enhance"],ne=e=>{C(e)},se=e=>{w(e)};x.useEffect((()=>{var t,n,s,o,l,m,h,p;if(a)if("completed"===a.status&&a.result){const d=Date.now(),h=ee>0?d-ee:0,p=(null==(n=null==(t=e.data)?void 0:t.find((e=>e.id===b)))?void 0:n.name)||"Unknown Template";if(Qi.trackTemplateUsage(b,p,!0,h,S).catch((e=>{})),B(a.result),E((null==(s=a.result[0])?void 0:s.content)||""),I(!0),c("Content generated successfully!","Your content is ready for review and enhancement."),null==(o=a.result[0])?void 0:o.content){N(!0);const t=(null==(m=null==(l=e.data)?void 0:l.find((e=>e.id===b)))?void 0:m.content_type)||"blog";i({content:a.result[0].content,contentType:t}).then((e=>{e&&e.task_id&&(P(e.task_id),setTimeout((()=>{r(e.task_id).then((e=>{W(e),N(!1),u("Content quality assessment completed","Review the metrics to improve your content.")})).catch((e=>{g(e,"Error fetching quality assessment"),N(!1)}))}),2e3))})).catch((e=>{g(e,"Error requesting quality assessment"),N(!1)}))}}else if("failed"===a.status){const t=a.error||"Content generation failed";X(t),d("Generation failed",t),null==(p=null==(h=e.data)?void 0:h.find((e=>e.id===b)))||p.name,Qi.trackTemplateError(b,"generation_failed",t).catch((e=>{}))}}),[a,i,r,b,e.data,c,d,u,g,S,ee]);const ie=x.useCallback((()=>{var a,n;X(null),I(!1),s(),y(),te(Date.now()),u("Generating content...","This may take a moment. Please wait.");const i={content_type:(null==(n=null==(a=e.data)?void 0:a.find((e=>e.id===b)))?void 0:n.content_type)||"blog",template_id:b,variables:S,quality_assessment:!0};t(i).then((t=>{var a,n;if(t.task_id)_(t.task_id);else{const t="No task ID returned from generation request";X(t),d("Generation failed",t),null==(n=null==(a=e.data)?void 0:a.find((e=>e.id===b)))||n.name,Qi.trackTemplateError(b,"generation_failed",t).catch((e=>{}))}})).catch((t=>{var a,n;const s="Failed to start content generation. Please try again.";g(t,s),X(s),null==(n=null==(a=e.data)?void 0:a.find((e=>e.id===b)))||n.name,Qi.trackTemplateError(b,"api_error",t.message||s).catch((e=>{}))}))}),[b,S,t,s,e.data,u,d,g,y]),re=e=>{if(E(e),L.length>0){const t=[...L];t[0].content=e,B(t)}},oe=e=>{const t=A+`\n\n\x3c!-- Applied suggestion: ${e} --\x3e`;if(E(t),L.length>0){const e=[...L];e[0].content=t,B(e)}},le=(e,t)=>{J(t)};return f.jsx(Si,{onError:e=>g(e),children:f.jsxs(Ot,{maxWidth:"xl",children:[f.jsx(m,{}),f.jsxs(D,{sx:{my:4},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:4},children:[f.jsx(F,{onClick:()=>{},sx:{mr:2},children:f.jsx(he,{})}),f.jsx(R,{variant:"h4",component:"h1",children:"AI Content Generator"}),f.jsx(_e,{title:"Help and documentation",children:f.jsx(F,{sx:{ml:"auto"},children:f.jsx(Te,{})})}),f.jsx(_e,{title:"Generator settings",children:f.jsx(F,{children:f.jsx($t,{})})}),f.jsx(_e,{title:"Generation history",children:f.jsx(F,{children:f.jsx(Qe,{})})})]}),f.jsx(O,{sx:{p:3,mb:4},children:f.jsx(De,{activeStep:j,alternativeLabel:!0,children:ae.map((e=>f.jsx(Re,{children:f.jsx(ze,{children:e})},e)))})}),f.jsxs(O,{sx:{p:3,mb:4},children:[(e=>{switch(e){case 0:return f.jsxs(D,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Select a Template"}),f.jsxs(Ne,{value:K,onChange:le,variant:"scrollable",scrollButtons:"auto",sx:{mb:3,borderBottom:1,borderColor:"divider"},children:[f.jsx(Ue,{label:"Featured Templates"}),f.jsx(Ue,{label:"Prompt Library"})]}),0===K?f.jsx(zi,{onSelect:ne,selectedTemplateId:b}):f.jsx(Oi,{onUsePrompt:e=>{ne("blog-standard")}})]});case 1:return f.jsxs(D,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Customize Template Variables"}),f.jsx(Pi,{templateId:b,onChange:se,initialValues:S})]});case 2:return f.jsxs(D,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Generation"}),Z&&f.jsxs(ue,{severity:"error",sx:{mb:3},children:[f.jsx(Vt,{children:"Error"}),Z]}),T?f.jsxs(ue,{severity:"success",sx:{mb:3},children:[f.jsx(Vt,{children:"Generation Complete"}),"Your content has been successfully generated. Proceed to the next step to review and enhance your content."]}):f.jsx(Fi,{taskId:k,onCancel:()=>{s(),v(1)},onComplete:e=>{e&&e.length>0&&(B(e),E(e[0].content),I(!0))}})]});case 3:return f.jsxs(D,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Review & Enhance"}),f.jsxs($,{container:!0,spacing:3,children:[f.jsxs($,{item:!0,xs:12,md:8,children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Generated Content"}),f.jsx(Ui,{value:A,onChange:re})]}),f.jsx($,{item:!0,xs:12,md:4,children:q?f.jsxs(O,{sx:{p:3,textAlign:"center"},children:[f.jsx(R,{variant:"body1",gutterBottom:!0,children:"Analyzing content quality..."}),f.jsx(de,{size:40})]}):f.jsx(Wi,{assessment:M,data:Ji,isLoading:q,onApplySuggestion:oe})})]})]});case 4:return f.jsxs(D,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"A/B Testing"}),U?f.jsx(Gi,{testId:U.id,initialTestData:U,onUpdateTest:e=>{Q(e)},onCreateVariant:e=>{if(A){const e=A.replace(/(#\s.+)/,"$1 - Alternative Version");alert("Creating new variant: "+e.substring(0,50)+"...")}},onViewContent:e=>{alert("Viewing content: "+e.substring(0,50)+"...")},onCompareVariants:e=>{alert("Comparing variants: "+e.join(", "))}}):f.jsxs(ue,{severity:"info",children:[f.jsx(Vt,{children:"No A/B Test Created"}),"You haven't created any A/B tests yet. Create one to start testing different versions of your content."]})]});default:return"Unknown step"}})(j),f.jsx(Y,{sx:{my:3}}),f.jsxs(D,{sx:{display:"flex"},children:[f.jsx(G,{variant:"outlined",disabled:0===j,onClick:()=>{v((e=>e-1))},sx:{mr:1},children:"Back"}),f.jsx(D,{sx:{flex:"1 1 auto"}}),j===ae.length&&f.jsx(G,{onClick:()=>{v(0),C(""),w({}),_(""),I(!1),E(""),B([]),W(null),Q(null),X(null),s()},variant:"outlined",sx:{mr:1},children:"Create New Content"}),3===j&&f.jsx(G,{variant:"outlined",startIcon:f.jsx(Ht,{}),sx:{mr:1},onClick:()=>{c("Content saved","Your content draft has been saved successfully."),Qi.trackEvent({event_name:"content_saved",event_data:{template_id:b,content_length:A.length,has_quality_assessment:!!M}}).catch((e=>{}))},children:"Save Draft"}),j<ae.length&&f.jsx(G,{variant:"contained",onClick:()=>{if(2===j&&ie(),3===j)if(L.length>0){u("Creating A/B test...","Setting up your test with the generated content variations.");const e={title:`A/B Test for ${S.title||"Content"}`,content_variations:L,metrics:["clicks","conversions","engagement"],duration_days:7};o(e).then((e=>{Q(e),c("A/B test created successfully","Your test is ready to run."),Qi.trackEvent({event_name:"ab_test_created",event_data:{test_id:e.id,test_title:e.title,variation_count:e.content_variations.length,template_id:b}}).catch((e=>{}))})).catch((e=>{g(e,"Failed to create A/B test. Using mock data instead."),Q(Ki)}))}else Q(Ki),u("Using sample A/B test data","No content variations were available to create a real test.");v((e=>e+1))},disabled:0===j&&!b||1===j&&0===Object.keys(S).length||2===j&&(!T||n),children:j===ae.length-1?"Create A/B Test":"Next"})]})]}),0===j&&f.jsxs(O,{sx:{p:3},children:[f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:2},children:[f.jsx(qe,{sx:{mr:1,color:"primary.main"}}),f.jsx(R,{variant:"h6",children:"Tips for Effective Content Generation"})]}),f.jsxs($,{container:!0,spacing:3,children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Choose the Right Template"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Select a template that best matches your content goal. Templates are designed for specific content types and purposes."})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Be Specific with Variables"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"The more detailed and specific your variable inputs, the better your generated content will be. Provide clear context and details."})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Review and Refine"}),f.jsx(R,{variant:"body2",color:"text.secondary",children:"Always review and edit the generated content. Add your personal touch and ensure it aligns with your brand voice and style."})]})})})]})]})]})]})})};function Zi(e){var t,a,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=Zi(e[t]))&&(n&&(n+=" "),n+=a);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Xi(){for(var e,t,a=0,n="";a<arguments.length;)(e=arguments[a++])&&(t=Zi(e))&&(n&&(n+=" "),n+=t);return n}let er={data:""},tr=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ar=/\/\*[^]*?\*\/|  +/g,nr=/\n+/g,sr=(e,t)=>{let a="",n="",s="";for(let i in e){let r=e[i];"@"==i[0]?"i"==i[1]?a=i+" "+r+";":n+="f"==i[1]?sr(r,i):i+"{"+sr(r,"k"==i[1]?"":t)+"}":"object"==typeof r?n+=sr(r,t?t.replace(/([^,])+/g,(e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):i):null!=r&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=sr.p?sr.p(i,r):i+":"+r+";")}return a+(t&&s?t+"{"+s+"}":s)+n},ir={},rr=e=>{if("object"==typeof e){let t="";for(let a in e)t+=a+rr(e[a]);return t}return e};function or(e){let t=this||{},a=e.call?e(t.p):e;return((e,t,a,n,s)=>{let i=rr(e),r=ir[i]||(ir[i]=(e=>{let t=0,a=11;for(;t<e.length;)a=101*a+e.charCodeAt(t++)>>>0;return"go"+a})(i));if(!ir[r]){let t=i!==e?e:(e=>{let t,a,n=[{}];for(;t=tr.exec(e.replace(ar,""));)t[4]?n.shift():t[3]?(a=t[3].replace(nr," ").trim(),n.unshift(n[0][a]=n[0][a]||{})):n[0][t[1]]=t[2].replace(nr," ").trim();return n[0]})(e);ir[r]=sr(s?{["@keyframes "+r]:t}:t,a?"":"."+r)}let o=a&&ir.g?ir.g:null;return a&&(ir.g=ir[r]),l=ir[r],c=t,d=n,(u=o)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),r;var l,c,d,u})(a.unshift?a.raw?((e,t,a)=>e.reduce(((e,n,s)=>{let i=t[s];if(i&&i.call){let e=i(a),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":sr(e,""):!1===e?"":e}return e+n+(null==i?"":i)}),""))(a,[].slice.call(arguments,1),t.p):a.reduce(((e,a)=>Object.assign(e,a&&a.call?a(t.p):a)),{}):a,(n=t.target,"object"==typeof window?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||er),t.g,t.o,t.k);var n}function lr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cr(){return cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},cr.apply(this,arguments)}function dr(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}or.bind({g:1}),or.bind({k:1});var ur=function(){return""},mr=k.createContext({enqueueSnackbar:ur,closeSnackbar:ur}),hr="@media (max-width:599.95px)",pr="@media (min-width:600px)",gr="unmounted",xr="exited",yr="entering",fr="entered",jr="exiting",vr=function(e){var t,a;function n(t){var a;a=e.call(this,t)||this;var n,s=t.appear;return a.appearStatus=null,t.in?s?(n=xr,a.appearStatus=yr):n=fr:n=t.unmountOnExit||t.mountOnEnter?gr:xr,a.state={status:n},a.nextCallback=null,a}a=e,(t=n).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===gr?{status:xr}:null};var s,i,r,o=n.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var a=this.state.status;this.props.in?a!==yr&&a!==fr&&(t=yr):a!==yr&&a!==fr||(t=jr)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e=this.props.timeout,t=e,a=e;return null!=e&&"number"!=typeof e&&"string"!=typeof e&&(a=e.exit,t=e.enter),{exit:a,enter:t}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===yr?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===xr&&this.setState({status:gr})},o.performEnter=function(e){var t=this,a=this.props.enter,n=e,s=this.getTimeouts();e||a?(this.props.onEnter&&this.props.onEnter(this.node,n),this.safeSetState({status:yr},(function(){t.props.onEntering&&t.props.onEntering(t.node,n),t.onTransitionEnd(s.enter,(function(){t.safeSetState({status:fr},(function(){t.props.onEntered&&t.props.onEntered(t.node,n)}))}))}))):this.safeSetState({status:fr},(function(){t.props.onEntered&&t.props.onEntered(t.node,n)}))},o.performExit=function(){var e=this,t=this.props.exit,a=this.getTimeouts();t?(this.props.onExit&&this.props.onExit(this.node),this.safeSetState({status:jr},(function(){e.props.onExiting&&e.props.onExiting(e.node),e.onTransitionEnd(a.exit,(function(){e.safeSetState({status:xr},(function(){e.props.onExited&&e.props.onExited(e.node)}))}))}))):this.safeSetState({status:xr},(function(){e.props.onExited&&e.props.onExited(e.node)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&this.nextCallback.cancel&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,a=!0;return this.nextCallback=function(){a&&(a=!1,t.nextCallback=null,e())},this.nextCallback.cancel=function(){a=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var a=null==e&&!this.props.addEndListener;this.node&&!a?(this.props.addEndListener&&this.props.addEndListener(this.node,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===gr)return null;var t=this.props;return(0,t.children)(e,dr(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]))},s=n,(i=[{key:"node",get:function(){var e,t=null===(e=this.props.nodeRef)||void 0===e?void 0:e.current;if(!t)throw new Error("notistack - Custom snackbar is not refForwarding");return t}}])&&lr(s.prototype,i),r&&lr(s,r),n}(k.Component);function br(){}function Cr(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Sr(e,t){return x.useMemo((function(){return null==e&&null==t?null:function(a){Cr(e,a),Cr(t,a)}}),[e,t])}function wr(e){var t=e.timeout,a=e.style,n=void 0===a?{}:a,s=e.mode;return{duration:"object"==typeof t?t[s]||0:t,easing:n.transitionTimingFunction,delay:n.transitionDelay}}vr.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:br,onEntering:br,onEntered:br,onExit:br,onExiting:br,onExited:br};var kr="cubic-bezier(0.4, 0, 0.2, 1)",_r="cubic-bezier(0.0, 0, 0.2, 1)",Tr="cubic-bezier(0.4, 0, 0.6, 1)",Ir=function(e){e.scrollTop=e.scrollTop},Ar=function(e){return Math.round(e)+"ms"};function Er(e,t){void 0===e&&(e=["all"]);var a=t||{},n=a.duration,s=void 0===n?300:n,i=a.easing,r=void 0===i?kr:i,o=a.delay,l=void 0===o?0:o;return(Array.isArray(e)?e:[e]).map((function(e){var t="string"==typeof s?s:Ar(s),a="string"==typeof l?l:Ar(l);return e+" "+t+" "+r+" "+a})).join(",")}function Lr(e){var t=function(e){return e&&e.ownerDocument||document}(e);return t.defaultView||window}function Br(e,t){if(t){var a=function(e,t){var a,n=t.getBoundingClientRect(),s=Lr(t);if(t.fakeTransform)a=t.fakeTransform;else{var i=s.getComputedStyle(t);a=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var r=0,o=0;if(a&&"none"!==a&&"string"==typeof a){var l=a.split("(")[1].split(")")[0].split(",");r=parseInt(l[4],10),o=parseInt(l[5],10)}switch(e){case"left":return"translateX("+(s.innerWidth+r-n.left)+"px)";case"right":return"translateX(-"+(n.left+n.width-r)+"px)";case"up":return"translateY("+(s.innerHeight+o-n.top)+"px)";default:return"translateY(-"+(n.top+n.height-o)+"px)"}}(e,t);a&&(t.style.webkitTransform=a,t.style.transform=a)}}function Dr(e){return Object.entries(e).reduce((function(e,t){var a,n=t[0],s=t[1];return cr({},e,((a={})[n]=or(s),a))}),{})}x.forwardRef((function(e,t){var a=e.children,n=e.direction,s=void 0===n?"down":n,i=e.in,r=e.style,o=e.timeout,l=void 0===o?0:o,c=e.onEnter,d=e.onEntered,u=e.onExit,m=e.onExited,h=dr(e,["children","direction","in","style","timeout","onEnter","onEntered","onExit","onExited"]),p=x.useRef(null),g=Sr(a.ref,p),y=Sr(g,t),f=x.useCallback((function(){p.current&&Br(s,p.current)}),[s]);return x.useEffect((function(){if(!i&&"down"!==s&&"right"!==s){var e=function(e,t){var a;function n(){for(var n=this,s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];clearTimeout(a),a=setTimeout((function(){e.apply(n,i)}),t)}return void 0===t&&(t=166),n.clear=function(){clearTimeout(a)},n}((function(){p.current&&Br(s,p.current)})),t=Lr(p.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[s,i]),x.useEffect((function(){i||f()}),[i,f]),x.createElement(vr,Object.assign({appear:!0,nodeRef:p,onEnter:function(e,t){Br(s,e),Ir(e),c&&c(e,t)},onEntered:d,onEntering:function(e){var t=(null==r?void 0:r.transitionTimingFunction)||_r,a=wr({timeout:l,mode:"enter",style:cr({},r,{transitionTimingFunction:t})});e.style.webkitTransition=Er("-webkit-transform",a),e.style.transition=Er("transform",a),e.style.webkitTransform="none",e.style.transform="none"},onExit:function(e){var t=(null==r?void 0:r.transitionTimingFunction)||Tr,a=wr({timeout:l,mode:"exit",style:cr({},r,{transitionTimingFunction:t})});e.style.webkitTransition=Er("-webkit-transform",a),e.style.transition=Er("transform",a),Br(s,e),u&&u(e)},onExited:function(e){e.style.webkitTransition="",e.style.transition="",m&&m(e)},in:i,timeout:l},h),(function(e,t){return x.cloneElement(a,cr({ref:y,style:cr({visibility:"exited"!==e||i?void 0:"hidden"},r,{},a.props.style)},t))}))})).displayName="Slide";var Rr="notistack-Snackbar",zr="notistack-CollapseWrapper",Pr="notistack-MuiContent",Mr=function(e){return"notistack-MuiContent-"+e},Fr=Dr({root:{height:0},entered:{height:"auto"}}),Wr="0px";x.forwardRef((function(e,t){var a=e.children,n=e.in,s=e.onExited,i=x.useRef(null),r=x.useRef(null),o=Sr(t,r),l=function(){return i.current?i.current.clientHeight:0};return x.createElement(vr,{in:n,unmountOnExit:!0,onEnter:function(e){e.style.height=Wr},onEntered:function(e){e.style.height="auto"},onEntering:function(e){var t=l(),a=wr({timeout:175,mode:"enter"}),n=a.duration,s=a.easing;e.style.transitionDuration="string"==typeof n?n:n+"ms",e.style.height=t+"px",e.style.transitionTimingFunction=s||""},onExit:function(e){e.style.height=l()+"px"},onExited:s,onExiting:function(e){Ir(e);var t=wr({timeout:175,mode:"exit"}),a=t.duration,n=t.easing;e.style.transitionDuration="string"==typeof a?a:a+"ms",e.style.height=Wr,e.style.transitionTimingFunction=n||""},nodeRef:r,timeout:175},(function(e,t){return x.createElement("div",Object.assign({ref:o,className:Xi(Fr.root,"entered"===e&&Fr.entered),style:cr({pointerEvents:"all",overflow:"hidden",minHeight:Wr,transition:Er("height")},"entered"===e&&{overflow:"visible"},{},"exited"===e&&!n&&{visibility:"hidden"})},t),x.createElement("div",{ref:i,className:zr,style:{display:"flex",width:"100%"}},a))}))})).displayName="Collapse";var Or,$r="undefined"!=typeof window?x.useLayoutEffect:x.useEffect;function Hr(e){var t=x.useRef(e);return $r((function(){t.current=e})),x.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}x.forwardRef((function(e,t){var a=e.children,n=e.className,s=e.autoHideDuration,i=e.disableWindowBlurListener,r=void 0!==i&&i,o=e.onClose,l=e.id,c=e.open,d=e.SnackbarProps,u=void 0===d?{}:d,m=x.useRef(),h=Hr((function(){o&&o.apply(void 0,arguments)})),p=Hr((function(e){o&&null!=e&&(m.current&&clearTimeout(m.current),m.current=setTimeout((function(){h(null,"timeout",l)}),e))}));x.useEffect((function(){return c&&p(s),function(){m.current&&clearTimeout(m.current)}}),[c,s,p]);var g=function(){m.current&&clearTimeout(m.current)},y=x.useCallback((function(){null!=s&&p(.5*s)}),[s,p]);return x.useEffect((function(){if(!r&&c)return window.addEventListener("focus",y),window.addEventListener("blur",g),function(){window.removeEventListener("focus",y),window.removeEventListener("blur",g)}}),[r,y,c]),x.createElement("div",Object.assign({ref:t},u,{className:Xi(Rr,n),onMouseEnter:function(e){u.onMouseEnter&&u.onMouseEnter(e),g()},onMouseLeave:function(e){u.onMouseLeave&&u.onMouseLeave(e),y()}}),a)})).displayName="Snackbar";var Vr=Dr({root:(Or={display:"flex",flexWrap:"wrap",flexGrow:1},Or[pr]={flexGrow:"initial",minWidth:"288px"},Or)}),qr=x.forwardRef((function(e,t){var a=e.className,n=dr(e,["className"]);return k.createElement("div",Object.assign({ref:t,className:Xi(Vr.root,a)},n))}));qr.displayName="SnackbarContent";var Nr,Ur,Gr,Qr=Dr({root:{backgroundColor:"#313131",fontSize:"0.875rem",lineHeight:1.43,letterSpacing:"0.01071em",color:"#fff",alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"},lessPadding:{paddingLeft:"20px"},default:{backgroundColor:"#313131"},success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},warning:{backgroundColor:"#ff9800"},info:{backgroundColor:"#2196f3"},message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:"16px",marginRight:"-8px"}}),Kr="notistack-snackbar";x.forwardRef((function(e,t){var a=e.id,n=e.message,s=e.action,i=e.iconVariant,r=e.variant,o=e.hideIconVariant,l=e.style,c=e.className,d=i[r],u=s;return"function"==typeof u&&(u=u(a)),k.createElement(qr,{ref:t,role:"alert","aria-describedby":Kr,style:l,className:Xi(Pr,Mr(r),Qr.root,Qr[r],c,!o&&d&&Qr.lessPadding)},k.createElement("div",{id:Kr,className:Qr.message},o?null:d,n),u&&k.createElement("div",{className:Qr.action},u))})).displayName="MaterialDesignContent";var Jr={default:20,dense:4},Yr={default:6,dense:2},Zr="."+zr;(Nr={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:1400,height:"auto",width:"auto",transition:Er(["top","right","bottom","left","max-width"],{duration:300,easing:"ease"}),pointerEvents:"none"})[Zr]={padding:Yr.default+"px 0px",transition:"padding 300ms ease 0ms"},Nr.maxWidth="calc(100% - "+2*Jr.default+"px)",Nr[hr]={width:"100%",maxWidth:"calc(100% - 32px)"},Yr.dense,Jr.default,Yr.default,Jr.default,Yr.default,(Ur={left:Jr.default+"px"})[pr]={alignItems:"flex-start"},Ur[hr]={left:"16px"},(Gr={right:Jr.default+"px"})[pr]={alignItems:"flex-end"},Gr[hr]={right:"16px"};const Xr=new class{async initializeGoogleAuth(e){try{return(await ra.get("/seo/auth/google/init",{params:{brand_id:e}})).data}catch(t){throw t}}async processOAuthCallback(e,t,a){try{return(await ra.post("/seo/auth/google/callback",{code:e,state:t,brand_id:a})).data}catch(n){throw n}}async checkAuthorizationStatus(e){try{return(await ra.get("/seo/auth/status",{params:{brand_id:e}})).data}catch(t){return{status:"error",is_authorized:!1,message:"Failed to check authorization status"}}}async getSearchPerformance(e){try{const{brand_id:t,start_date:a,end_date:n,dimension:s="query"}=e;return(await ra.get("/seo/search-performance",{params:{brand_id:t,start_date:a,end_date:n,dimension:s}})).data}catch(t){return{data:[{query:"marketing automation",clicks:120,impressions:1560,ctr:.077,position:3.2},{query:"email marketing tools",clicks:95,impressions:1230,ctr:.077,position:4.5},{query:"best marketing platform",clicks:85,impressions:980,ctr:.087,position:5.1},{query:"social media automation",clicks:76,impressions:1100,ctr:.069,position:6.3},{query:"content marketing software",clicks:65,impressions:890,ctr:.073,position:7.2}]}}}async getContentSearchData(e,t){try{return(await ra.get(`/seo/content/${e}/search-data`,{params:{brand_id:t}})).data}catch(a){return{data:{total_clicks:320,total_impressions:4150,average_ctr:.077,average_position:6.3,top_queries:[{query:"content marketing examples",clicks:48,impressions:580,position:4.2},{query:"effective content strategy",clicks:35,impressions:490,position:5.1},{query:"content optimization tips",clicks:29,impressions:420,position:6.3}],trends:{clicks:[25,28,32,35,38,42,45],impressions:[320,350,380,410,450,480,510],ctr:[.078,.08,.084,.085,.084,.088,.088],position:[7.2,7,6.8,6.5,6.3,6,5.8]},devices:{MOBILE:{clicks:180,impressions:2350},DESKTOP:{clicks:110,impressions:1450},TABLET:{clicks:30,impressions:350}}}}}}async getKeywordOpportunities(e,t){try{return(await ra.get(`/seo/content/${e}/keyword-opportunities`,{params:{brand_id:t}})).data}catch(a){return{opportunities:[{keyword:"marketing automation strategies",current_ranking:null,search_volume:2900,competition:"MEDIUM",opportunity_score:85,recommended_action:"Create new content targeting this keyword"},{keyword:"email marketing best practices",current_ranking:12,search_volume:3500,competition:"HIGH",opportunity_score:78,recommended_action:"Optimize existing content to improve ranking"},{keyword:"social media content calendar",current_ranking:18,search_volume:2200,competition:"MEDIUM",opportunity_score:82,recommended_action:"Create supporting content and internal links"}]}}}async analyzeSearchIntent(e){try{return(await ra.post("/seo/analyze-search-intent",e)).data.keyword_analysis}catch(t){return{"content marketing":{primary_intent:"informational",secondary_intent:"commercial",suggested_content_type:"article",suggested_headings:["Introduction","What is Content Marketing","Benefits","Best Practices","Examples"],topic_clusters:["digital marketing","content strategy","SEO","social media marketing"],search_features:["featured_snippet"]}}}}async validateContent(e){try{return(await ra.post("/seo/validate-content",e)).data}catch(t){return{status:"success",overall_score:78,title_validation:{score:80,issues:["Title is too short (under 30 characters)"],suggestions:["Extend title to 50-60 characters for optimal display in search results"],title_length:25,has_primary_keyword:!0},structure_validation:{score:75,issues:["Not enough section headings"],suggestions:["Add more headings to structure your content (at least one heading for every 300-400 words)","Consider adding bulleted or numbered lists to improve scannability"],content_length:1200,paragraph_count:8,avg_paragraph_length:150,heading_count:2,list_count:0},keyword_validation:{score:85,issues:[],suggestions:["Include primary keyword in at least one heading"],primary_keyword_count:5,primary_keyword_density:1.2,secondary_keyword_presence:{"digital marketing":2,"content strategy":1},keyword_in_first_paragraph:!0,keyword_in_headings:!1},readability_validation:{score:90,issues:[],suggestions:["Reduce use of passive voice for more engaging content"],word_count:1200,sentence_count:45,avg_sentence_length:18,complex_word_percentage:15,readability_score:65,passive_voice_count:8},eeat_validation:{score:60,issues:["Limited data citations or statistics","Limited external references"],suggestions:["Include more statistics, studies, or data points to enhance E-E-A-T signals","Include more references to authoritative sources to improve trustworthiness"],stat_citation_count:1,reference_count:1,expertise_signal_count:2},recommendations:[{type:"structure_improvement",priority:2,issue:"Not enough section headings",score_impact:25},{type:"eeat_improvement",priority:2,issue:"Limited data citations or statistics",score_impact:40},{type:"eeat_improvement",priority:2,issue:"Limited external references",score_impact:40},{type:"title_optimization",priority:3,issue:"Title is too short (under 30 characters)",score_impact:20}]}}}async generateStructuredData(e){var t,a;try{return(await ra.post("/seo/structured-data",e)).data}catch(n){return{status:"success",schema_type:e.schema_type,json_ld:{"@context":"https://schema.org","@type":e.schema_type,headline:e.metadata.title||"",description:e.metadata.description||"",author:{"@type":"Person",name:(null==(t=e.metadata.author)?void 0:t.name)||""},datePublished:e.metadata.datePublished||(new Date).toISOString()},json_ld_script:`<script type="application/ld+json">${JSON.stringify({"@context":"https://schema.org","@type":e.schema_type,headline:e.metadata.title||"",description:e.metadata.description||"",author:{"@type":"Person",name:(null==(a=e.metadata.author)?void 0:a.name)||""},datePublished:e.metadata.datePublished||(new Date).toISOString()},null,2)}<\/script>`}}}async detectSchemaType(e){try{return(await ra.post("/seo/detect-schema-type",e)).data}catch(t){return{status:"success",recommended_schema:"BlogPosting",confidence:80,scores:{HowTo:20,FAQPage:10,Product:5,BlogPosting:80,Article:60}}}}async getIndexationStatus(e,t){try{return(await ra.get("/seo/indexation-status",{params:{brand_id:e,url:t}})).data}catch(a){return{status:"success",url:t,is_indexed:!0,indexing_state:"INDEXED",last_crawled:"2025-03-22T14:35:12Z",sitemap:"https://example.com/sitemap.xml",mobile_usability:"USABLE",enhancements:{mobile_usability:{status:"VALID",issues:[]},structured_data:{status:"VALID",detected_items:["Article","BreadcrumbList"]}}}}}async getMobileUsability(e,t){try{return(await ra.get("/seo/mobile-usability",{params:{brand_id:e,url:t}})).data}catch(a){return{status:"success",url:t,usability_status:"USABLE",issues:[],last_checked:"2025-03-24T09:15:43Z",screenshot:"https://example.com/screenshots/mobile_123.png",device_tested:"Smartphone"}}}async getDecliningRankings(e,t){try{return(await ra.get(`/seo/content/${e}/declining-rankings`,{params:{brand_id:t}})).data}catch(a){return{status:"success",declining_keywords:[{query:"marketing automation tools",current_position:8.3,previous_position:5.1,position_change:3.2,clicks_change_pct:-25,impressions:580},{query:"best email marketing software",current_position:15.2,previous_position:11.4,position_change:3.8,clicks_change_pct:-35,impressions:410}]}}}async analyzeContentPerformance(e,t){try{return(await ra.post("/seo/content/analyze-performance",e,{params:{brand_id:t}})).data}catch(a){return{status:"success",performance_overview:{average_position:6.3,total_clicks:320,total_impressions:4150,average_ctr:.077,trend:{clicks:"stable",impressions:"stable",position:"declining"}},performance_issues:[{type:"declining_rankings",description:"Rankings have declined over time",severity:"high"}],performance_insights:[{insight:"Your content is ranking lower than before",action:"Review competing content and update your content to be more comprehensive"},{insight:"Content structure could be improved",action:"Add more headings to organize content and improve readability"}]}}}async getContentUpdateRecommendations(e,t){try{return(await ra.post("/seo/content/update-recommendations",e,{params:{brand_id:t}})).data}catch(a){return{status:"success",content_id:e.content_id,recommendations:[{type:"content_length",recommendation:"Expand content length",details:"Increase content length to 1500+ words for better topical coverage",priority:1},{type:"headings",recommendation:"Add more section headings",details:"Structure content with more headings (H2, H3) to improve organization",priority:2},{type:"missing_keyword",recommendation:"Add the keyword 'content marketing strategy'",details:"Include 'content marketing strategy' in content, preferably in a heading and early paragraph",priority:1}]}}}async getContentUpdateSchedule(e,t,a){try{return(await ra.get(`/seo/content/${e}/update-schedule`,{params:{brand_id:t,content_age_days:a}})).data}catch(n){return{status:"success",content_id:e,content_age_days:a,update_urgency:"medium",next_update_date:"2025-04-25",update_schedule:[{type:"moderate_update",scheduled_date:"2025-04-25",priority:"medium"},{type:"performance_review",scheduled_date:"2025-06-24",priority:"medium"}]}}}};function eo(e){const{children:t,value:a,index:n,...s}=e;return f.jsx("div",{role:"tabpanel",hidden:a!==n,id:`seo-tabpanel-${n}`,"aria-labelledby":`seo-tab-${n}`,...s,children:a===n&&f.jsx(D,{sx:{p:3},children:t})})}const to=()=>{const{contentId:e}=b();y();const{enqueueSnackbar:t}=x.useContext(mr),[a,n]=x.useState(!1),[s,i]=x.useState(0),[r,o]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),[m,h]=x.useState([]),[p,g]=x.useState(""),[j,v]=x.useState("blog_post"),[C,S]=x.useState(null),[w,k]=x.useState("BlogPosting"),[_,T]=x.useState(null),[I,A]=x.useState({title:"",description:"",author:{name:"",url:""},publisher:{name:"Ultimate Marketing Team",logo:"https://example.com/logo.png"},datePublished:(new Date).toISOString(),featuredImage:"",url:""}),[E,L]=x.useState(null),[B,P]=x.useState(null),[M,W]=x.useState(null),[q,U]=x.useState(30),[Q,K]=x.useState(null),[J,Y]=x.useState(!1),[Z,X]=x.useState(""),[ee,te]=x.useState(""),[ie,re]=x.useState(!1),[oe,le]=x.useState(!1),[ce,me]=x.useState((()=>{const e=new Date,t=new Date;return t.setDate(t.getDate()-28),{start:t.toISOString().split("T")[0],end:e.toISOString().split("T")[0]}})),[he,pe]=x.useState([]),[ge,xe]=x.useState([]),ye=async()=>{n(!0);try{const e=await Xr.initializeGoogleAuth(1);X(e.auth_url),te(e.state),re(!0)}catch(e){t("Failed to initialize Google authentication",{variant:"error"})}finally{n(!1)}},fe=()=>{re(!1)};x.useEffect((()=>{e&&(n(!0),setTimeout((()=>{c("10 Effective Marketing Strategies for 2025"),o("# 10 Effective Marketing Strategies for 2025\n\nMarketing continues to evolve rapidly as technology advances and consumer behaviors change. Here are the top strategies that will dominate marketing in 2025.\n\n## Content Marketing Evolution\n\nContent marketing remains the cornerstone of digital strategy, but has evolved significantly. Brands now focus on creating comprehensive, value-driven content ecosystems rather than one-off blog posts.\n\nKey points:\n- Integration of AI for personalized content delivery\n- Focus on video and interactive content experiences\n- Content optimization for voice search and featured snippets\n\n## Data-Driven Decision Making\n\nMarketing decisions in 2025 are increasingly backed by comprehensive data analysis. The most successful marketers leverage predictive analytics and machine learning to anticipate market trends and consumer needs.\n\n## Omnichannel Integration\n\nThe lines between marketing channels continue to blur. Successful strategies now seamlessly integrate the customer experience across all touchpoints - from social media to email, website to in-store."),u("marketing strategies 2025"),h(["content marketing trends","data-driven marketing","omnichannel marketing"]),v("blog_post"),n(!1)}),1e3),(async()=>{le(!0);try{const e=await Xr.checkAuthorizationStatus(1);Y(e.is_authorized),e.is_authorized&&t("Google Search Console is authorized",{variant:"success"})}catch(e){Y(!1)}finally{le(!1)}})())}),[e]),x.useEffect((()=>{e&&J&&(Te(),Ee())}),[e,J]);const je=()=>{p&&!m.includes(p)&&(h([...m,p]),g(""))},ve=async()=>{if(r&&l&&d){n(!0);try{const e={content_text:r,content_type:j,title:l,primary_keyword:d,secondary_keywords:m,url:`https://example.com/blog/${l.toLowerCase().replace(/\s+/g,"-")}`},a=await Xr.validateContent(e);S(a),t("Content validation completed",{variant:"success"})}catch(e){t("Error validating content",{variant:"error"})}finally{n(!1)}}else t("Please fill in all required fields",{variant:"error"})},be=async()=>{if(r){n(!0);try{const e={...I,title:I.title||l,description:I.description||r.substring(0,160)+"..."},a={content_text:r,schema_type:w,metadata:e},n=await Xr.generateStructuredData(a);T(n),t("Structured data generated successfully",{variant:"success"})}catch(e){t("Error generating structured data",{variant:"error"})}finally{n(!1)}}else t("Please enter content text",{variant:"error"})},ke=async()=>{if(r&&l){n(!0);try{const e=await Xr.detectSchemaType({text:r,title:l});"success"===e.status&&(k(e.recommended_schema),t(`Detected schema type: ${e.recommended_schema}`,{variant:"info"}))}catch(e){t("Error detecting schema type",{variant:"error"})}finally{n(!1)}}else t("Please enter content text and title",{variant:"error"})},Te=async()=>{try{if(e){n(!0);const a=await Xr.getContentSearchData(parseInt(e),1);a.data?(L(a.data),(e=>{var t;if(!e||!e.trends)return[];const{trends:a}=e,n=(null==(t=a.dates)?void 0:t.map(((e,t)=>({date:e,clicks:a.clicks[t]||0,impressions:a.impressions[t]||0,ctr:100*(a.ctr[t]||0),position:a.position[t]||0}))))||[];if(pe(n),e.devices){const t=[{name:"Mobile",value:e.devices.MOBILE.clicks||0},{name:"Desktop",value:e.devices.DESKTOP.clicks||0},{name:"Tablet",value:e.devices.TABLET.clicks||0}];xe(t)}})(a.data)):t("Failed to load search performance data",{variant:"warning"})}}catch(a){t("Error loading search performance data",{variant:"error"})}finally{n(!1)}},Ee=async()=>{try{if(e){const t=await Xr.getKeywordOpportunities(parseInt(e),1);P(t.opportunities)}}catch(t){}},De=async()=>{if(e&&r){n(!0);try{const a={content_id:parseInt(e),content_text:r},n=await Xr.getContentUpdateRecommendations(a,1);W(n.recommendations),t("Update recommendations loaded",{variant:"success"})}catch(a){t("Error loading update recommendations",{variant:"error"})}finally{n(!1)}}else t("Content ID and text are required",{variant:"error"})},Re=async()=>{if(e){n(!0);try{const a=await Xr.getContentUpdateSchedule(parseInt(e),1,q);K(a),t("Update schedule loaded",{variant:"success"})}catch(a){t("Error loading update schedule",{variant:"error"})}finally{n(!1)}}},ze=e=>{navigator.clipboard.writeText(e),t("Copied to clipboard",{variant:"success"})},Pe=(e,t,a,n)=>f.jsx(H,{variant:"outlined",sx:{height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:e}),f.jsxs(D,{sx:{display:"flex",alignItems:"center",mb:1},children:[n,f.jsx(R,{variant:"h4",sx:{ml:1,color:a},children:t})]}),f.jsx(Be,{variant:"determinate",value:t,sx:{height:10,borderRadius:5,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:a}}})]})}),Me=e=>e>=80?"success.main":e>=60?"warning.main":"error.main",Fe=e=>e>=80?f.jsx(ea,{color:"success"}):e>=60?f.jsx(ta,{color:"warning"}):f.jsx(aa,{color:"error"}),$e=(e,t,a)=>f.jsxs(H,{variant:"outlined",sx:{mt:2},children:[f.jsx(na,{title:a}),f.jsxs(V,{children:[e.length>0?f.jsxs(f.Fragment,{children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Issues:"}),f.jsx(We,{dense:!0,children:e.map(((e,t)=>f.jsxs(Oe,{children:[f.jsx(ne,{children:f.jsx(aa,{color:"error"})}),f.jsx(se,{primary:e})]},t)))})]}):f.jsx(ue,{severity:"success",sx:{mb:2},children:"No issues found"}),t.length>0&&f.jsxs(f.Fragment,{children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Suggestions:"}),f.jsx(We,{dense:!0,children:t.map(((e,t)=>f.jsxs(Oe,{children:[f.jsx(ne,{children:f.jsx(sa,{color:"info"})}),f.jsx(se,{primary:e})]},t)))})]})]})]}),He=["#0088FE","#00C49F","#FFBB28","#FF8042"],Ve=()=>f.jsxs(Ze,{open:ie,onClose:fe,maxWidth:"md",children:[f.jsx(Xe,{children:"Connect to Google Search Console"}),f.jsxs(et,{children:[f.jsx(Gt,{children:"To view real search performance data for your content, you need to authenticate with Google Search Console. Click the button below to open Google's authorization page in a new window."}),f.jsx(D,{sx:{mt:2,mb:2},children:f.jsx(G,{variant:"contained",color:"primary",startIcon:f.jsx(Qt,{}),onClick:()=>window.open(Z,"_blank"),sx:{mr:2},children:"Authorize with Google"})}),f.jsx(Gt,{children:"After completing authorization, paste the code from Google below:"}),f.jsx(z,{autoFocus:!0,margin:"dense",id:"auth-code",label:"Authorization Code",type:"text",fullWidth:!0,variant:"outlined",sx:{mt:1},onChange:e=>te(e.target.value)})]}),f.jsxs(at,{children:[f.jsx(G,{onClick:fe,color:"inherit",children:"Cancel"}),f.jsx(G,{onClick:()=>(async e=>{n(!0);try{await Xr.processOAuthCallback(e,ee,1),Y(!0),re(!1),t("Successfully authenticated with Google Search Console",{variant:"success"}),await Te(),await Ee()}catch(a){t("Failed to complete Google authentication",{variant:"error"})}finally{n(!1)}})(ee),color:"primary",variant:"contained",disabled:!ee,children:"Submit"})]})]});return a&&!l?f.jsx(D,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:f.jsx(de,{})}):f.jsxs(D,{sx:{width:"100%"},children:[f.jsx(O,{sx:{mb:3},children:f.jsx(D,{sx:{borderBottom:1,borderColor:"divider"},children:f.jsxs(Ne,{value:s,onChange:(e,t)=>{i(t)},"aria-label":"SEO tabs",variant:"scrollable",scrollButtons:"auto",children:[f.jsx(Ue,{label:"SEO Validation"}),f.jsx(Ue,{label:"Search Performance"}),f.jsx(Ue,{label:"Keyword Opportunities"}),f.jsx(Ue,{label:"Content Updates"}),f.jsx(Ue,{label:"Structured Data"})]})})}),f.jsx(eo,{value:s,index:0,children:f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Information"}),f.jsxs($,{container:!0,spacing:2,children:[f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Content Title",fullWidth:!0,value:l,onChange:e=>c(e.target.value),margin:"normal",required:!0})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(Ce,{fullWidth:!0,margin:"normal",required:!0,children:[f.jsx(Se,{children:"Content Type"}),f.jsxs(we,{value:j,onChange:e=>v(e.target.value),label:"Content Type",children:[f.jsx(ae,{value:"blog_post",children:"Blog Post"}),f.jsx(ae,{value:"article",children:"Article"}),f.jsx(ae,{value:"landing_page",children:"Landing Page"}),f.jsx(ae,{value:"product_page",children:"Product Page"}),f.jsx(ae,{value:"guide",children:"Guide"}),f.jsx(ae,{value:"how_to",children:"How-To"}),f.jsx(ae,{value:"news",children:"News"}),f.jsx(ae,{value:"press_release",children:"Press Release"})]})]})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Primary Keyword",fullWidth:!0,value:d,onChange:e=>u(e.target.value),margin:"normal",required:!0,helperText:"The main keyword you want to rank for"})}),f.jsxs($,{item:!0,xs:12,md:6,children:[f.jsx(z,{label:"Secondary Keyword",fullWidth:!0,value:p,onChange:e=>g(e.target.value),margin:"normal",helperText:"Press Enter or Add button to add keywords",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),je())},InputProps:{endAdornment:f.jsx(G,{variant:"contained",color:"primary",onClick:je,size:"small",sx:{ml:1},children:"Add"})}}),f.jsx(D,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:.5},children:m.map((e=>f.jsx(N,{label:e,onDelete:()=>(e=>{h(m.filter((t=>t!==e)))})(e),color:"primary",variant:"outlined",size:"small"},e)))})]}),f.jsx($,{item:!0,xs:12,children:f.jsx(z,{label:"Content Text",fullWidth:!0,multiline:!0,rows:8,value:r,onChange:e=>o(e.target.value),margin:"normal",required:!0,helperText:"Paste your content here (markdown supported)"})}),f.jsx($,{item:!0,xs:12,children:f.jsx(G,{variant:"contained",color:"primary",onClick:ve,disabled:a,sx:{mt:2},children:a?f.jsx(de,{size:24}):"Validate Content"})})]})]}),C&&f.jsxs(D,{children:[f.jsx(R,{variant:"h5",gutterBottom:!0,children:"Validation Results"}),f.jsxs($,{container:!0,spacing:3,sx:{mb:3},children:[f.jsx($,{item:!0,xs:12,md:4,children:Pe("Overall Score",C.overall_score,Me(C.overall_score),Fe(C.overall_score))}),f.jsx($,{item:!0,xs:12,md:4,children:Pe("Title Optimization",C.title_validation.score,Me(C.title_validation.score),Fe(C.title_validation.score))}),f.jsx($,{item:!0,xs:12,md:4,children:Pe("Content Structure",C.structure_validation.score,Me(C.structure_validation.score),Fe(C.structure_validation.score))}),f.jsx($,{item:!0,xs:12,md:4,children:Pe("Keyword Usage",C.keyword_validation.score,Me(C.keyword_validation.score),Fe(C.keyword_validation.score))}),f.jsx($,{item:!0,xs:12,md:4,children:Pe("Readability",C.readability_validation.score,Me(C.readability_validation.score),Fe(C.readability_validation.score))}),f.jsx($,{item:!0,xs:12,md:4,children:Pe("E-E-A-T Signals",C.eeat_validation.score,Me(C.eeat_validation.score),Fe(C.eeat_validation.score))})]}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Priority Recommendations"}),f.jsx(H,{variant:"outlined",sx:{mb:3},children:f.jsx(V,{children:f.jsx(We,{children:C.recommendations.sort(((e,t)=>e.priority-t.priority)).slice(0,3).map(((e,t)=>f.jsxs(Oe,{children:[f.jsx(ne,{children:1===e.priority?f.jsx(qt,{color:"error"}):f.jsx(Nt,{color:"info"})}),f.jsx(se,{primary:e.issue,secondary:`Priority: ${e.priority} | Impact Score: ${e.score_impact}`})]},t)))})})}),f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"Title Validation Details"})}),f.jsx(Le,{children:$e(C.title_validation.issues,C.title_validation.suggestions,"Title Validation")})]}),f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"Content Structure Details"})}),f.jsx(Le,{children:$e(C.structure_validation.issues,C.structure_validation.suggestions,"Content Structure")})]}),f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"Keyword Usage Details"})}),f.jsx(Le,{children:$e(C.keyword_validation.issues,C.keyword_validation.suggestions,"Keyword Usage")})]}),f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"Readability Details"})}),f.jsx(Le,{children:$e(C.readability_validation.issues,C.readability_validation.suggestions,"Readability")})]}),f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"E-E-A-T Signal Details"})}),f.jsx(Le,{children:$e(C.eeat_validation.issues,C.eeat_validation.suggestions,"E-E-A-T Signals")})]}),C.url_validation&&f.jsxs(Ie,{children:[f.jsx(Ae,{expandIcon:f.jsx(Ut,{}),children:f.jsx(R,{children:"URL Validation Details"})}),f.jsx(Le,{children:$e(C.url_validation.issues,C.url_validation.suggestions,"URL Validation")})]})]})]})}),f.jsx(eo,{value:s,index:1,children:f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[f.jsx(R,{variant:"h6",children:"Google Search Console Integration"}),oe?f.jsx(de,{size:24}):J?f.jsx(G,{variant:"outlined",color:"primary",startIcon:f.jsx(Kt,{}),onClick:Te,disabled:a,children:"Refresh Data"}):f.jsx(G,{variant:"contained",color:"primary",startIcon:f.jsx(Qt,{}),onClick:ye,disabled:a,children:"Connect to Google Search Console"})]}),!J&&f.jsxs(ue,{severity:"info",sx:{mt:2},children:[f.jsx(Vt,{children:"Connect to Google Search Console"}),"To view real search performance data, you need to connect to Google Search Console. This integration provides accurate search metrics for your content including clicks, impressions, and rankings."]}),J&&f.jsxs(ue,{severity:"success",sx:{mt:2},children:[f.jsx(Vt,{children:"Connected to Google Search Console"}),"Your Google Search Console integration is active. You're seeing real search performance data."]}),J&&f.jsxs(D,{sx:{mt:3,display:"flex",alignItems:"center",gap:2},children:[f.jsx(z,{label:"Start Date",type:"date",value:ce.start,onChange:e=>me({...ce,start:e.target.value}),InputLabelProps:{shrink:!0},size:"small"}),f.jsx(z,{label:"End Date",type:"date",value:ce.end,onChange:e=>me({...ce,end:e.target.value}),InputLabelProps:{shrink:!0},size:"small"}),f.jsx(G,{variant:"outlined",size:"small",onClick:Te,disabled:a,children:"Apply"})]})]}),f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Search Performance Overview"}),a&&f.jsx(D,{sx:{display:"flex",justifyContent:"center",p:3},children:f.jsx(de,{})}),!a&&E?f.jsxs(f.Fragment,{children:[f.jsxs($,{container:!0,spacing:3,sx:{mb:3},children:[f.jsx($,{item:!0,xs:12,sm:6,md:3,children:f.jsx(H,{variant:"outlined",sx:{height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",color:"textSecondary",children:"Average Position"}),f.jsxs(R,{variant:"h4",children:[E.average_position.toFixed(1),E.trends.position[0]>E.trends.position[E.trends.position.length-1]?f.jsx(Jt,{color:"success",sx:{ml:1}}):f.jsx(Yt,{color:"error",sx:{ml:1}})]})]})})}),f.jsx($,{item:!0,xs:12,sm:6,md:3,children:f.jsx(H,{variant:"outlined",sx:{height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",color:"textSecondary",children:"Total Clicks"}),f.jsxs(R,{variant:"h4",children:[E.total_clicks,E.trends.clicks[0]<E.trends.clicks[E.trends.clicks.length-1]?f.jsx(Jt,{color:"success",sx:{ml:1}}):f.jsx(Yt,{color:"error",sx:{ml:1}})]})]})})}),f.jsx($,{item:!0,xs:12,sm:6,md:3,children:f.jsx(H,{variant:"outlined",sx:{height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",color:"textSecondary",children:"Total Impressions"}),f.jsxs(R,{variant:"h4",children:[E.total_impressions,E.trends.impressions[0]<E.trends.impressions[E.trends.impressions.length-1]?f.jsx(Jt,{color:"success",sx:{ml:1}}):f.jsx(Yt,{color:"error",sx:{ml:1}})]})]})})}),f.jsx($,{item:!0,xs:12,sm:6,md:3,children:f.jsx(H,{variant:"outlined",sx:{height:"100%"},children:f.jsxs(V,{children:[f.jsx(R,{variant:"subtitle1",color:"textSecondary",children:"Average CTR"}),f.jsxs(R,{variant:"h4",children:[(100*E.average_ctr).toFixed(2),"%",E.trends.ctr[0]<E.trends.ctr[E.trends.ctr.length-1]?f.jsx(Jt,{color:"success",sx:{ml:1}}):f.jsx(Yt,{color:"error",sx:{ml:1}})]})]})})})]}),he.length>0&&f.jsxs(D,{sx:{mb:4},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Performance Trends"}),f.jsxs(O,{variant:"outlined",sx:{p:2},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Clicks & Impressions"}),f.jsx(ma,{width:"100%",height:300,children:f.jsxs(ha,{data:he,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(pa,{strokeDasharray:"3 3"}),f.jsx(ga,{dataKey:"date"}),f.jsx(xa,{yAxisId:"left"}),f.jsx(xa,{yAxisId:"right",orientation:"right"}),f.jsx(ya,{}),f.jsx(fa,{}),f.jsx(ja,{yAxisId:"left",type:"monotone",dataKey:"clicks",stroke:"#8884d8",activeDot:{r:8}}),f.jsx(ja,{yAxisId:"right",type:"monotone",dataKey:"impressions",stroke:"#82ca9d"})]})})]}),f.jsxs($,{container:!0,spacing:2,sx:{mt:2},children:[f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(O,{variant:"outlined",sx:{p:2},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Average Position"}),f.jsx(ma,{width:"100%",height:250,children:f.jsxs(ha,{data:he,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(pa,{strokeDasharray:"3 3"}),f.jsx(ga,{dataKey:"date"}),f.jsx(xa,{reversed:!0,domain:[1,"dataMax"]}),f.jsx(ya,{}),f.jsx(ja,{type:"monotone",dataKey:"position",stroke:"#ff7300",activeDot:{r:8}})]})})]})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(O,{variant:"outlined",sx:{p:2},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"CTR (%)"}),f.jsx(ma,{width:"100%",height:250,children:f.jsxs(va,{data:he,margin:{top:5,right:30,left:20,bottom:5},children:[f.jsx(pa,{strokeDasharray:"3 3"}),f.jsx(ga,{dataKey:"date"}),f.jsx(xa,{}),f.jsx(ya,{}),f.jsx(ba,{type:"monotone",dataKey:"ctr",stroke:"#8884d8",fill:"#8884d8"})]})})]})})]})]}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Top Performing Queries"}),f.jsx(Rt,{component:O,variant:"outlined",sx:{mb:3},children:f.jsxs(zt,{children:[f.jsx(Wt,{children:f.jsxs(Mt,{children:[f.jsx(Ft,{children:"Query"}),f.jsx(Ft,{align:"right",children:"Clicks"}),f.jsx(Ft,{align:"right",children:"Impressions"}),f.jsx(Ft,{align:"right",children:"CTR"}),f.jsx(Ft,{align:"right",children:"Position"})]})}),f.jsx(Pt,{children:E.top_queries.map(((e,t)=>f.jsxs(Mt,{hover:!0,children:[f.jsx(Ft,{children:e.query}),f.jsx(Ft,{align:"right",children:e.clicks}),f.jsx(Ft,{align:"right",children:e.impressions}),f.jsxs(Ft,{align:"right",children:[(e.clicks/e.impressions*100).toFixed(2),"%"]}),f.jsx(Ft,{align:"right",children:e.position.toFixed(1)})]},t)))})]})}),f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Device Breakdown"}),f.jsxs($,{container:!0,spacing:3,children:[f.jsx($,{item:!0,xs:12,md:8,children:f.jsxs($,{container:!0,spacing:2,children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"h6",children:"Mobile"}),f.jsxs(R,{variant:"h4",children:[E.devices.MOBILE.clicks," clicks"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:[E.devices.MOBILE.impressions," impressions"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:["CTR:"," ",(E.devices.MOBILE.clicks/E.devices.MOBILE.impressions*100).toFixed(2),"%"]})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"h6",children:"Desktop"}),f.jsxs(R,{variant:"h4",children:[E.devices.DESKTOP.clicks," clicks"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:[E.devices.DESKTOP.impressions," impressions"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:["CTR:"," ",(E.devices.DESKTOP.clicks/E.devices.DESKTOP.impressions*100).toFixed(2),"%"]})]})})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(H,{variant:"outlined",children:f.jsxs(V,{children:[f.jsx(R,{variant:"h6",children:"Tablet"}),f.jsxs(R,{variant:"h4",children:[E.devices.TABLET.clicks," clicks"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:[E.devices.TABLET.impressions," impressions"]}),f.jsxs(R,{variant:"body2",color:"textSecondary",children:["CTR:"," ",(E.devices.TABLET.clicks/E.devices.TABLET.impressions*100).toFixed(2),"%"]})]})})})]})}),f.jsx($,{item:!0,xs:12,md:4,children:ge.length>0&&f.jsxs(O,{variant:"outlined",sx:{p:2,height:"100%"},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Device Distribution (Clicks)"}),f.jsx(ma,{width:"100%",height:200,children:f.jsxs(Ca,{children:[f.jsx(Sa,{data:ge,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:e,percent:t})=>`${e} ${(100*t).toFixed(0)}%`,children:ge.map(((e,t)=>f.jsx(wa,{fill:He[t%He.length]},`cell-${t}`)))}),f.jsx(ya,{})]})})]})})]})]}):!a&&f.jsx(D,{sx:{p:3},children:f.jsx(ue,{severity:"info",children:J?"No search performance data available for this content.":"Connect to Google Search Console to view search performance data."})})]}),Ve()]})}),f.jsx(eo,{value:s,index:2,children:f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Keyword Opportunities"}),B?f.jsx(Rt,{children:f.jsxs(zt,{children:[f.jsx(Wt,{children:f.jsxs(Mt,{children:[f.jsx(Ft,{children:"Keyword"}),f.jsx(Ft,{align:"right",children:"Current Ranking"}),f.jsx(Ft,{align:"right",children:"Search Volume"}),f.jsx(Ft,{align:"right",children:"Competition"}),f.jsx(Ft,{align:"right",children:"Opportunity Score"}),f.jsx(Ft,{children:"Recommended Action"})]})}),f.jsx(Pt,{children:B.map(((e,t)=>f.jsxs(Mt,{hover:!0,children:[f.jsx(Ft,{children:e.keyword}),f.jsx(Ft,{align:"right",children:e.current_ranking?e.current_ranking:"Not Ranking"}),f.jsx(Ft,{align:"right",children:e.search_volume}),f.jsx(Ft,{align:"right",children:f.jsx(N,{label:e.competition,color:"LOW"===e.competition?"success":"MEDIUM"===e.competition?"warning":"error",size:"small"})}),f.jsx(Ft,{align:"right",children:f.jsxs(D,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[f.jsx(Be,{variant:"determinate",value:e.opportunity_score,sx:{width:60,height:8,borderRadius:5,mr:1,bgcolor:"grey.200","& .MuiLinearProgress-bar":{bgcolor:e.opportunity_score>=80?"success.main":e.opportunity_score>=60?"warning.main":"error.main"}}}),e.opportunity_score]})}),f.jsx(Ft,{children:e.recommended_action})]},t)))})]})}):f.jsx(D,{sx:{display:"flex",justifyContent:"center",p:3},children:f.jsx(de,{})})]}),f.jsxs(O,{sx:{p:3},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[f.jsx(R,{variant:"h6",children:"Analyze Search Intent"}),f.jsx(G,{variant:"outlined",startIcon:f.jsx(Zt,{}),onClick:()=>{if(B){const e=B.map((e=>e.keyword)).slice(0,3);t(`Analyzing search intent for: ${e.join(", ")}`,{variant:"info"})}},children:"Analyze Top Keywords"})]}),f.jsxs(ue,{severity:"info",sx:{mb:2},children:[f.jsx(Vt,{children:"Search Intent Analysis"}),"Search intent analysis helps you understand what users are looking for when they search for these keywords. This can guide your content strategy."]}),f.jsx(R,{variant:"body1",paragraph:!0,children:"Select up to 3 keywords from the opportunities table above to analyze their search intent."})]})]})}),f.jsx(eo,{value:s,index:3,children:f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Content Update Recommendations"}),f.jsx(D,{sx:{mb:3},children:f.jsx(G,{variant:"contained",color:"primary",onClick:De,disabled:a,sx:{mr:2},children:a?f.jsx(de,{size:24}):"Get Update Recommendations"})}),M?f.jsx(Rt,{children:f.jsxs(zt,{children:[f.jsx(Wt,{children:f.jsxs(Mt,{children:[f.jsx(Ft,{children:"Priority"}),f.jsx(Ft,{children:"Type"}),f.jsx(Ft,{children:"Recommendation"}),f.jsx(Ft,{children:"Details"})]})}),f.jsx(Pt,{children:M.map(((e,t)=>f.jsxs(Mt,{hover:!0,children:[f.jsx(Ft,{children:f.jsx(N,{label:e.priority,color:1===e.priority?"error":2===e.priority?"warning":"info",size:"small"})}),f.jsx(Ft,{children:e.type.replace(/_/g," ")}),f.jsx(Ft,{children:e.recommendation}),f.jsx(Ft,{children:e.details})]},t)))})]})}):f.jsx(ue,{severity:"info",children:"Click the button above to get content update recommendations based on performance data and content analysis."})]}),f.jsxs(O,{sx:{p:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Update Schedule"}),f.jsxs($,{container:!0,spacing:2,alignItems:"center",sx:{mb:3},children:[f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(z,{label:"Content Age (days)",type:"number",value:q,onChange:e=>U(parseInt(e.target.value)||30),fullWidth:!0,margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:4,children:f.jsx(G,{variant:"contained",color:"primary",onClick:Re,disabled:a,sx:{mt:2},children:a?f.jsx(de,{size:24}):"Get Update Schedule"})})]}),Q?f.jsxs(D,{children:[f.jsxs(ue,{severity:"high"===Q.update_urgency?"error":"medium"===Q.update_urgency?"warning":"info",sx:{mb:2},children:[f.jsxs(Vt,{children:["Update Urgency: ",Q.update_urgency.toUpperCase()]}),"Next scheduled update: ",f.jsx("strong",{children:Q.next_update_date})]}),f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"Recommended Update Schedule"}),f.jsx(Rt,{children:f.jsxs(zt,{children:[f.jsx(Wt,{children:f.jsxs(Mt,{children:[f.jsx(Ft,{children:"Update Type"}),f.jsx(Ft,{children:"Scheduled Date"}),f.jsx(Ft,{children:"Priority"})]})}),f.jsx(Pt,{children:Q.update_schedule.map(((e,t)=>f.jsxs(Mt,{hover:!0,children:[f.jsx(Ft,{children:e.type.replace(/_/g," ")}),f.jsx(Ft,{children:e.scheduled_date}),f.jsx(Ft,{children:f.jsx(N,{label:e.priority,color:"high"===e.priority?"error":"medium"===e.priority?"warning":"info",size:"small"})})]},t)))})]})})]}):f.jsx(ue,{severity:"info",children:"Click the button above to get a recommended update schedule based on content performance and age."})]})]})}),f.jsx(eo,{value:s,index:4,children:f.jsxs(D,{children:[f.jsxs(O,{sx:{p:3,mb:3},children:[f.jsx(R,{variant:"h6",gutterBottom:!0,children:"Generate Structured Data"}),f.jsxs($,{container:!0,spacing:2,children:[f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(Ce,{fullWidth:!0,margin:"normal",required:!0,children:[f.jsx(Se,{children:"Schema Type"}),f.jsxs(we,{value:w,onChange:e=>k(e.target.value),label:"Schema Type",children:[f.jsx(ae,{value:"Article",children:"Article"}),f.jsx(ae,{value:"BlogPosting",children:"BlogPosting"}),f.jsx(ae,{value:"FAQPage",children:"FAQPage"}),f.jsx(ae,{value:"HowTo",children:"HowTo"}),f.jsx(ae,{value:"Product",children:"Product"})]})]})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsxs(D,{sx:{display:"flex",alignItems:"center",mt:3},children:[f.jsx(G,{variant:"outlined",onClick:ke,disabled:a,sx:{mr:2},children:a?f.jsx(de,{size:24}):"Detect Schema Type"}),f.jsx(R,{variant:"body2",color:"textSecondary",children:"Auto-detect the best schema type for your content"})]})}),"Article"===w||"BlogPosting"===w?f.jsxs(f.Fragment,{children:[f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Title",fullWidth:!0,value:I.title||l,onChange:e=>A({...I,title:e.target.value}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Description",fullWidth:!0,value:I.description,onChange:e=>A({...I,description:e.target.value}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Author Name",fullWidth:!0,value:(null==(qe=I.author)?void 0:qe.name)||"",onChange:e=>A({...I,author:{...I.author,name:e.target.value}}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Featured Image URL",fullWidth:!0,value:I.featuredImage,onChange:e=>A({...I,featuredImage:e.target.value}),margin:"normal"})})]}):"Product"===w?f.jsxs(f.Fragment,{children:[f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Product Name",fullWidth:!0,value:I.name||l,onChange:e=>A({...I,name:e.target.value}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Product Description",fullWidth:!0,value:I.description,onChange:e=>A({...I,description:e.target.value}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Product Brand",fullWidth:!0,value:I.brand||"",onChange:e=>A({...I,brand:e.target.value}),margin:"normal"})}),f.jsx($,{item:!0,xs:12,md:6,children:f.jsx(z,{label:"Product Image URL",fullWidth:!0,value:I.image,onChange:e=>A({...I,image:e.target.value}),margin:"normal"})})]}):null,f.jsx($,{item:!0,xs:12,children:f.jsx(G,{variant:"contained",color:"primary",onClick:be,disabled:a,sx:{mt:2},children:a?f.jsx(de,{size:24}):"Generate Structured Data"})})]})]}),_&&f.jsxs(O,{sx:{p:3},children:[f.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[f.jsxs(R,{variant:"h6",children:["Generated ",_.schema_type," Schema"]}),f.jsx(_e,{title:"Copy JSON-LD to clipboard",children:f.jsx(F,{onClick:()=>ze(JSON.stringify(_.json_ld,null,2)),children:f.jsx(Xt,{})})})]}),f.jsx(D,{sx:{p:2,bgcolor:"grey.900",color:"grey.100",borderRadius:1,overflow:"auto",maxHeight:400,fontFamily:"monospace",fontSize:"0.875rem",mb:2},children:f.jsx("pre",{children:JSON.stringify(_.json_ld,null,2)})}),f.jsxs(D,{sx:{mt:3},children:[f.jsx(R,{variant:"subtitle1",gutterBottom:!0,children:"HTML Script Tag"}),f.jsx(D,{sx:{p:2,bgcolor:"grey.100",borderRadius:1,overflow:"auto",fontFamily:"monospace",fontSize:"0.875rem"},children:f.jsx("code",{children:_.json_ld_script})}),f.jsx(G,{startIcon:f.jsx(Xt,{}),onClick:()=>ze(_.json_ld_script),sx:{mt:1},children:"Copy to Clipboard"})]})]})]})}),Ve()]});var qe},ao=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=_(),t=b(),{selectedBrand:a}=j((e=>e.brands));return x.useEffect((()=>{}),[e,t,a]),f.jsx(D,{sx:{p:3},children:f.jsxs(T,{children:[f.jsx(I,{path:"/",element:f.jsx(gi,{})}),f.jsx(I,{path:"/library",element:f.jsx(xi,{})}),f.jsx(I,{path:"/calendar",element:f.jsx(ji,{})}),f.jsx(I,{path:"/generator",element:f.jsx(Yi,{})}),f.jsx(I,{path:"/seo",element:f.jsx(to,{})}),f.jsx(I,{path:"/seo/:contentId",element:f.jsx(to,{})}),f.jsx(I,{path:"/templates",element:f.jsx(ka,{})}),f.jsx(I,{path:"/templates/:id/use",element:f.jsx(_a,{useMode:!0})}),f.jsx(I,{path:"/templates/:id",element:f.jsx(_a,{})}),f.jsx(I,{path:"/:id",element:f.jsx(bi,{})}),f.jsx(I,{path:"*",element:f.jsx(A,{to:"/content"})})]})})}},Symbol.toStringTag,{value:"Module"}));export{yi as C,Aa as a,Ea as b,Ii as c,ui as d,vi as e,Ia as f,Ci as g,ao as h,mi as p,La as s,Bi as u,pi as w};
